{
  "SaveName": "MoV",
  "EpochTime": 1624396370,
  "Date": "6/22/2021 2:12:50 PM",
  "VersionNumber": "v13.1.1",
  "GameMode": "MoV",
  "GameType": "Game",
  "GameComplexity": "Low Complexity",
  "PlayingTime": [
    0,
    120
  ],
  "PlayerCounts": [
    0,
    4
  ],
  "Tags": [
    "Board Games"
  ],
  "Gravity": 0.5,
  "PlayArea": 0.5,
  "Table": "Table_None",
  "Sky": "Sky_Museum",
  "SkyURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/bg.png",
  "Note": "",
  "TabStates": {
    "0": {
      "title": "Rules",
      "body": "",
      "color": "Grey",
      "visibleColor": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "id": 0
    },
    "1": {
      "title": "White",
      "body": "",
      "color": "White",
      "visibleColor": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "id": 1
    },
    "2": {
      "title": "Brown",
      "body": "",
      "color": "Brown",
      "visibleColor": {
        "r": 0.443,
        "g": 0.231,
        "b": 0.09
      },
      "id": 2
    },
    "3": {
      "title": "Red",
      "body": "",
      "color": "Red",
      "visibleColor": {
        "r": 0.856,
        "g": 0.1,
        "b": 0.094
      },
      "id": 3
    },
    "4": {
      "title": "Orange",
      "body": "",
      "color": "Orange",
      "visibleColor": {
        "r": 0.956,
        "g": 0.392,
        "b": 0.113
      },
      "id": 4
    },
    "5": {
      "title": "Yellow",
      "body": "",
      "color": "Yellow",
      "visibleColor": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.172
      },
      "id": 5
    },
    "6": {
      "title": "Green",
      "body": "",
      "color": "Green",
      "visibleColor": {
        "r": 0.192,
        "g": 0.701,
        "b": 0.168
      },
      "id": 6
    },
    "7": {
      "title": "Blue",
      "body": "",
      "color": "Blue",
      "visibleColor": {
        "r": 0.118,
        "g": 0.53,
        "b": 1.0
      },
      "id": 7
    },
    "8": {
      "title": "Teal",
      "body": "",
      "color": "Teal",
      "visibleColor": {
        "r": 0.129,
        "g": 0.694,
        "b": 0.607
      },
      "id": 8
    },
    "9": {
      "title": "Purple",
      "body": "",
      "color": "Purple",
      "visibleColor": {
        "r": 0.627,
        "g": 0.125,
        "b": 0.941
      },
      "id": 9
    },
    "10": {
      "title": "Pink",
      "body": "",
      "color": "Pink",
      "visibleColor": {
        "r": 0.96,
        "g": 0.439,
        "b": 0.807
      },
      "id": 10
    },
    "11": {
      "title": "Black",
      "body": "",
      "color": "Black",
      "visibleColor": {
        "r": 0.25,
        "g": 0.25,
        "b": 0.25
      },
      "id": 11
    }
  },
  "MusicPlayer": {
    "RepeatSong": false,
    "PlaylistEntry": 0,
    "CurrentAudioTitle": "Typhons Children - Mission Briefing",
    "CurrentAudioURL": "http://cloud-3.steamusercontent.com/ugc/781859262304608199/3E220047A4B3A0CE8ED3435C5D9FDDE1133CBCC8/",
    "AudioLibrary": [
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304608199/3E220047A4B3A0CE8ED3435C5D9FDDE1133CBCC8/",
        "Item2": "Typhons Children - Mission Briefing"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262301397823/8AFDF3A837114301F1330792C9AFA80CD6EE7E44/",
        "Item2": "Typhons Children - Act 1 - Abes Log"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304596731/890471B08AADA2F3A7D8CC26E23216365A324C31/",
        "Item2": "Typhons Children - Act 1 - RiverCrossing"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304595712/46267F4421FFF49CD51105818598B5A4B95B9160/",
        "Item2": "Typhons Children - Act 1 - After Action Report"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304598758/2F68ED600FF153C9FFBA88CFF1C80580505203DC/",
        "Item2": "Typhons Children - Act 2 -  Abes Log"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304600404/124AEB03CEA937246392B68BE1A6E90A0868F784/",
        "Item2": "Typhons Children - Act 2 - VillageRecon"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304599374/DC5B8D8ABE2462FE22DA1A4B97990B3A37EE1ED1/",
        "Item2": "Typhons Children - Act 2 - After Action Report"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304603237/0027353CB12E636E719218CBFCEC031AA1E9196F/",
        "Item2": "Typhons Children - Act 3 - Abes Log"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304605976/81DB3DC21CA3B752B24E27731D201851002ADB7D/",
        "Item2": "Typhons Children - Act 3 - MineAssault"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304604710/57B595C2CF2B13E49B404748D2D89A46ED518710/",
        "Item2": "Typhons Children - Act 3 - After Action Report"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304582207/44A479DA3A8D37F3DEE9342E4FB1395350B105D6/",
        "Item2": "A Mothers Love - Mission Briefing"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262301397823/8AFDF3A837114301F1330792C9AFA80CD6EE7E44/",
        "Item2": "A Mothers Love - Act 1 - Abes Log"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304567652/5BB6B8AE07399C1761C7F9D255B02F2B3BBEC08A/",
        "Item2": "A Mothers Love - Act 1 - Betrayal"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262301400619/1C11D1757B70A0B6273635593A0E8CEAD1C29B6D/",
        "Item2": "A Mothers Love - Act 1 - After Action Report"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304572613/DB0203511C39AF5DECB282025789B1C6DF401B37/",
        "Item2": "A Mothers Love - Act 2 - Abes Log"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304574505/45AE8B9626CEC8232AE9FCBC6943EF529B05E320/",
        "Item2": "A Mothers Love - Act 2 - TheNursery"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304573378/3D5D74834604F2B77237255D92BF489A76C26F8A/",
        "Item2": "A Mothers Love - Act 2 - After Action Report"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304578756/C00FE19A4A2E8A4ADBE85D46B6051B275A80E901/",
        "Item2": "A Mothers Love - Act 3 - Abes Log"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262301391408/CA1697BC46999F99D8E6507304CB79E4EE753FB8/",
        "Item2": "A Mother's Love - Act 3 - Mother of the Infinite"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304579208/9BF9B762E7C39B010097732582D6E86D97427942/",
        "Item2": "A Mothers Love - Act 3 - After Action Report"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304594578/DAAB2024175C609927E619C31C00185409E0A5C6/",
        "Item2": "Follow the Moon - Mission Briefing"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304582721/8FF7F5EF0BC8A8EB51DBEA5ADEE83513E6EEFE94/",
        "Item2": "Follow the Moon - Act 1 - Abes Log"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304584279/15B1C0184420B67E8B876BEDA82DB11769378FFD/",
        "Item2": "Follow the Moon - Act 1 - What Lies Beneath"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304583451/B6ABDAA7DA2190A2B29AF758C1F237C28A19E0AD/",
        "Item2": "Follow the Moon - Act 1 - After Action Report"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304586962/F4EFB96C532E275A5ABD3326ACBC0F160598CAC5/",
        "Item2": "Follow the Moon - Act 2 - Abes Log"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304588284/0053B28857E70B90E6E5E5BFCD570A96C8D51E97/",
        "Item2": "Follow the Moon - Act 2 - Gateway"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304587431/EBF6E9EE36F2D837BCE31865716400CF633D7B15/",
        "Item2": "Follow the Moon - Act 2 - After Action Report"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304590671/A79755EEFE21C8DAD9986326B780808207D9A011/",
        "Item2": "Follow the Moon - Act 3 - Abes Log"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304592388/1D2E56553743616DF94E175718926418CC9F25AE/",
        "Item2": "Follow the Moon - Act 3 - Blue Moon"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/781859262304591489/FB85A75E238F4858576D3FBB340C58540B1B4B54/",
        "Item2": "Follow the Moon - Act 3 - After Action Report"
      }
    ]
  },
  "Grid": {
    "Type": 0,
    "Lines": true,
    "Color": {
      "r": 0.498039216,
      "g": 0.498039216,
      "b": 0.498039216
    },
    "Opacity": 0.0931031257,
    "ThickLines": false,
    "Snapping": false,
    "Offset": false,
    "BothSnapping": true,
    "xSize": 0.5,
    "ySize": 0.5,
    "PosOffset": {
      "x": 0.0,
      "y": 1.0,
      "z": 0.0
    }
  },
  "Lighting": {
    "LightIntensity": 0.54,
    "LightColor": {
      "r": 1.0,
      "g": 1.0,
      "b": 1.0
    },
    "AmbientIntensity": 1.3,
    "AmbientType": 0,
    "AmbientSkyColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientEquatorColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientGroundColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "ReflectionIntensity": 1.0,
    "LutIndex": 0,
    "LutContribution": 1.0,
    "LutURL": ""
  },
  "Hands": {
    "Enable": true,
    "DisableUnused": true,
    "Hiding": 2
  },
  "ComponentTags": {
    "labels": [
      {
        "displayed": "card",
        "normalized": "card"
      },
      {
        "displayed": "culture",
        "normalized": "culture"
      },
      {
        "displayed": "token",
        "normalized": "token"
      },
      {
        "displayed": "good",
        "normalized": "good"
      },
      {
        "displayed": "normal",
        "normalized": "normal"
      },
      {
        "displayed": "factory",
        "normalized": "factory"
      },
      {
        "displayed": "deed",
        "normalized": "deed"
      },
      {
        "displayed": "scoring",
        "normalized": "scoring"
      },
      {
        "displayed": "spaceport",
        "normalized": "spaceport"
      },
      {
        "displayed": "credits",
        "normalized": "credits"
      },
      {
        "displayed": "encounter",
        "normalized": "encounter"
      },
      {
        "displayed": "hazard",
        "normalized": "hazard"
      },
      {
        "displayed": "relic",
        "normalized": "relic"
      },
      {
        "displayed": "telegate",
        "normalized": "telegate"
      },
      {
        "displayed": "event",
        "normalized": "event"
      },
      {
        "displayed": "passenger",
        "normalized": "passenger"
      },
      {
        "displayed": "original",
        "normalized": "original"
      },
      {
        "displayed": "expansion",
        "normalized": "expansion"
      },
      {
        "displayed": "demand",
        "normalized": "demand"
      },
      {
        "displayed": "player",
        "normalized": "player"
      },
      {
        "displayed": "ship",
        "normalized": "ship"
      },
      {
        "displayed": "display",
        "normalized": "display"
      },
      {
        "displayed": "transactions",
        "normalized": "transactions"
      },
      {
        "displayed": "ui",
        "normalized": "ui"
      },
      {
        "displayed": "yellow",
        "normalized": "yellow"
      },
      {
        "displayed": "red",
        "normalized": "red"
      },
      {
        "displayed": "green",
        "normalized": "green"
      },
      {
        "displayed": "orange",
        "normalized": "orange"
      },
      {
        "displayed": "zone",
        "normalized": "zone"
      },
      {
        "displayed": "system",
        "normalized": "system"
      },
      {
        "displayed": "details",
        "normalized": "details"
      },
      {
        "displayed": "c01",
        "normalized": "c01"
      },
      {
        "displayed": "c02",
        "normalized": "c02"
      },
      {
        "displayed": "c03",
        "normalized": "c03"
      },
      {
        "displayed": "c04",
        "normalized": "c04"
      },
      {
        "displayed": "c05",
        "normalized": "c05"
      },
      {
        "displayed": "c06",
        "normalized": "c06"
      },
      {
        "displayed": "c07",
        "normalized": "c07"
      },
      {
        "displayed": "c08",
        "normalized": "c08"
      },
      {
        "displayed": "c09",
        "normalized": "c09"
      },
      {
        "displayed": "c10",
        "normalized": "c10"
      },
      {
        "displayed": "c11",
        "normalized": "c11"
      },
      {
        "displayed": "c12",
        "normalized": "c12"
      },
      {
        "displayed": "c13",
        "normalized": "c13"
      },
      {
        "displayed": "c14",
        "normalized": "c14"
      },
      {
        "displayed": "c00",
        "normalized": "c00"
      },
      {
        "displayed": "s01",
        "normalized": "s01"
      },
      {
        "displayed": "s02",
        "normalized": "s02"
      },
      {
        "displayed": "s03",
        "normalized": "s03"
      },
      {
        "displayed": "s04",
        "normalized": "s04"
      },
      {
        "displayed": "s05",
        "normalized": "s05"
      },
      {
        "displayed": "s06",
        "normalized": "s06"
      },
      {
        "displayed": "s07",
        "normalized": "s07"
      },
      {
        "displayed": "s08",
        "normalized": "s08"
      },
      {
        "displayed": "s09",
        "normalized": "s09"
      },
      {
        "displayed": "s10",
        "normalized": "s10"
      },
      {
        "displayed": "s11",
        "normalized": "s11"
      },
      {
        "displayed": "s12",
        "normalized": "s12"
      },
      {
        "displayed": "s13",
        "normalized": "s13"
      },
      {
        "displayed": "s14",
        "normalized": "s14"
      },
      {
        "displayed": "bag",
        "normalized": "bag"
      },
      {
        "displayed": "m1000",
        "normalized": "m1000"
      },
      {
        "displayed": "m0500",
        "normalized": "m0500"
      },
      {
        "displayed": "m0100",
        "normalized": "m0100"
      },
      {
        "displayed": "m0050",
        "normalized": "m0050"
      },
      {
        "displayed": "m0010",
        "normalized": "m0010"
      },
      {
        "displayed": "m0005",
        "normalized": "m0005"
      },
      {
        "displayed": "m0001",
        "normalized": "m0001"
      },
      {
        "displayed": "miniature",
        "normalized": "miniature"
      },
      {
        "displayed": "tablet",
        "normalized": "tablet"
      },
      {
        "displayed": "discard",
        "normalized": "discard"
      }
    ]
  },
  "Turns": {
    "Enable": false,
    "Type": 0,
    "TurnOrder": [],
    "Reverse": false,
    "SkipEmpty": false,
    "DisableInteractions": false,
    "PassTurns": true,
    "TurnColor": ""
  },
  "DecalPallet": [
    {
      "Name": "culture card back",
      "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
      "Size": 5.0
    }
  ],
  "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Global.-1.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Global.-1.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/global/global\")\n\nend)\n__bundle_register(\"lua/global/global\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal setup = require(\"lua/global/setup\")\r\nlocal reset = require(\"lua/global/reset\")\r\nlocal money = require(\"lua/global/money\")\r\n\r\n---@param save_state table\r\nfunction onLoad(save_state)\r\n  disableNonInteractables()\r\n  money.init()\r\nend\r\n\r\n---@param player table\r\n---@param setupButtonId string\r\nfunction setupGame(player, setupButtonId)\r\n  setup.setupGame(player, setupButtonId)\r\nend\r\n\r\n---@param player table\r\n---@param resetButtonId string\r\nfunction resetGame(player, resetButtonId)\r\n  reset.resetGame(player, resetButtonId)\r\nend\r\n\r\nfunction disableNonInteractables()\r\n  table.forEach(constants.GUIDS_TO_DISABLE, function(guid)\r\n    getObjectFromGUID(guid).interactable = false\r\n  end)\r\nend\r\n\nend)\n__bundle_register(\"lua/global/money\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\n\r\n---@type table<string, number> | table<number, string>\r\nlocal lookupTable\r\n\r\n---@type number[]\r\nlocal denominations\r\n\r\nlocal initialized = false\r\nlocal function init()\r\n  if (initialized) then return end\r\n  lookupTable = constants.MONEY_LOOKUP\r\n  denominations = { table.unpack(constants.MONEY_VALUES) } --copy the table because sorting is destructive\r\n  table.sort(denominations, function(a, b) return b < a end) -- sort descending\r\n  initialized = true\r\nend\r\n\r\n---@param amount number\r\n---@param allowedDenominations number[]\r\n---@return table<number, number>\r\nlocal function calculateAmounts(amount, allowedDenominations)\r\n  if (allowedDenominations == nil) then\r\n    allowedDenominations = denominations\r\n  end\r\n\r\n  return table.reduce(allowedDenominations, function(acc, denomination)\r\n    acc[denomination] = 0\r\n    while (denomination <= amount) do\r\n      amount = amount - denomination\r\n      acc[denomination] = acc[denomination] + 1\r\n    end\r\n    return acc\r\n  end, {})\r\nend\r\n\r\n---@param amounts table<number, number>\r\n---@param player table\r\nlocal function dealToPlayer(amounts, player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  for k, v in pairs(amounts) do\r\n    if (v > 0) then\r\n      local moneyTag = lookupTable[k]\r\n      local moneyBag = getObjectsWithAllTags({ 'bag', 'credits', moneyTag })[1]\r\n      moneyBag.deal(v, player.color)\r\n    end\r\n  end\r\nend\r\n\r\n---@param amount number\r\n---@param player table\r\n---@param allowedDenominations number[]\r\nlocal function payPlayer(amount, player, allowedDenominations)\r\n  local amountsToDeal = calculateAmounts(amount, allowedDenominations)\r\n  dealToPlayer(amountsToDeal, player)\r\nend\r\n\r\n---@param amount number\r\n---@param player table\r\n---@return table<number, number>\r\nlocal function breakBill(amount, player)\r\n  -- disallow the bill being broken from the denominations\r\n  local allowedDenominations = table.filter(denominations, function(denomination) return denomination ~= amount end)\r\n  local amountsToDeal = calculateAmounts(amount, player, allowedDenominations)\r\n  return amountsToDeal\r\nend\r\n\r\n---@param amounts number[]\r\n---@param player table\r\n---@return table<number, number>\r\nlocal function combineBills(amounts, player)\r\n  local amount = table.sum(amounts)\r\n  local amountsToDeal = calculateAmounts(amount, player)\r\n  return amountsToDeal\r\nend\r\n\r\nreturn {\r\n  init = init,\r\n  breakBill = breakBill,\r\n  combineBills = combineBills,\r\n  payPlayer = payPlayer,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/global/reset\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\n\r\n---@class Vector\r\n---@field x number\r\n---@field y number\r\n---@field z number\r\n\r\n---@class Config\r\n---@field start Vector\r\n---@field step Vector\r\n---@field row number\r\n\r\nlocal function getDefaultConfig()\r\n  return {\r\n    start = { x = 0, y = 5, z = 0 },\r\n    step = { x = 5, z = -5 },\r\n    row = 10,\r\n  }\r\nend\r\n\r\nlocal function getDefaultTakeParams()\r\n  return {\r\n    callback_function = function(obj) obj.setLock(true) end,\r\n    rotation = {0, 180, 0},\r\n  }\r\nend\r\n\r\n---@param bag table\r\n---@param configOverrides Config\r\n---@param takeOverrides table\r\nlocal function layout(bag, configOverrides, takeOverrides)\r\n  ---@type Config\r\n  local config = table.merge(getDefaultConfig(), configOverrides or {})\r\n  local takeParams = table.merge(getDefaultTakeParams(), takeOverrides or {})\r\n\r\n  local start = config.start\r\n  local step = config.step\r\n  local row = config.row\r\n\r\n  ---@type table[]\r\n  local objects = table.sort(\r\n    table.map(bag.getObjects(), function(obj) return { name = obj.name, guid = obj.guid } end),\r\n    function(a, b) return a.name < b.name end\r\n  )\r\n\r\n  local multiplier = 0\r\n  table.forEach(objects, function(obj)\r\n    takeParams.guid = obj.guid\r\n    takeParams.position = {\r\n      start.x + step.x * (multiplier % row),\r\n      start.y,\r\n      start.z + step.z * math.floor(multiplier / row)\r\n    }\r\n    bag.takeObject(takeParams, true)\r\n    multiplier = multiplier + 1\r\n  end)\r\nend\r\n\r\n---@param tags string[]\r\n---@param bag table\r\nlocal function gatherTaggedItemsIntoBag(tags, bag)\r\n  ---@type table[]\r\n  local objects = getObjectsWithAllTags(tags)\r\n  table.forEach(objects, function(obj)\r\n    obj.setLock(false)\r\n    bag.putObject(obj)\r\n  end)\r\nend\r\n\r\n---@param callback fun(obj:table)\r\nlocal function spawnBagThen(callback)\r\n  spawnObject({\r\n    scale = { x = 0, y = 0, z = 0 },\r\n    type = 'Bag',\r\n    callback_function = callback,\r\n  })\r\nend\r\n\r\nlocal function resetEventTokens()\r\n  local bag = getObjectFromGUID(constants.GUIDS.EventTokenBagGUID)\r\n  gatherTaggedItemsIntoBag({ 'event', 'token' }, bag)\r\n\r\n  local layoutConfig = {\r\n    start = { x = 9.5, y = 1.5, z = 44.5 },\r\n    step = { x = 2.75, z = -3.75 },\r\n    row = 13,\r\n  }\r\n\r\n  layout(bag, layoutConfig)\r\nend\r\n\r\nlocal function resetCultureCards()\r\n  local bag = getObjectFromGUID(constants.GUIDS.CultureCardBagGUID)\r\n  gatherTaggedItemsIntoBag({ 'culture', 'card' }, bag)\r\n\r\n  local layoutConfig = {\r\n    start = { x = -44, y = 1.5, z = 44 },\r\n    step = { x = 3.75, z = -5.25 },\r\n    row = 5,\r\n  }\r\n\r\n  layout(bag, layoutConfig)\r\nend\r\n\r\nlocal function resetEncounters()\r\n  local bag = getObjectFromGUID(constants.GUIDS.EncounterBagGUID)\r\n  gatherTaggedItemsIntoBag({ 'encounter', 'token' }, bag)\r\n\r\n  local layoutConfig = {\r\n    start = { x = -25.5, y = 1.5, z = 45 },\r\n    step = { x = 2.75, z = -3 },\r\n    row = 7,\r\n  }\r\n\r\n  layout(bag, layoutConfig)\r\nend\r\n\r\nlocal function resetCultureTokens()\r\n  local tokenData = {\r\n    {\r\n      tags = { 'culture', 'details', 'token' },\r\n      layoutConfig = {\r\n        start = { x = -33.5, y = 1.5, z = 19.5 },\r\n        step = { x = 0, z = -3 },\r\n        row = 1,\r\n      },\r\n    },\r\n    {\r\n      tags = { 'good', 'normal', 'token' },\r\n      layoutConfig = {\r\n        start = { x = -37.5, y = 1.5, z = 19.5 },\r\n        step = { x = 0, z = -3 },\r\n        row = 1,\r\n      },\r\n    },\r\n    {\r\n      tags = { 'good', 'factory', 'token' },\r\n      layoutConfig = {\r\n        start = { x = -37.5, y = 2.25, z = 19.5 },\r\n        step = { x = 0, z = -3 },\r\n        row = 1,\r\n      },\r\n    },\r\n    {\r\n      tags = { 'deed', 'factory', 'token' },\r\n      layoutConfig = {\r\n        start = { x = -37.5, y = 2.5, z = 19.5 },\r\n        step = { x = 0, z = -3 },\r\n        row = 1,\r\n      },\r\n    },\r\n  }\r\n  spawnBagThen(function(bag)\r\n    table.forEach(tokenData, function(data)\r\n      gatherTaggedItemsIntoBag(data.tags, bag)\r\n      layout(bag, data.layoutConfig)\r\n    end)\r\n    bag.destruct()\r\n  end)\r\nend\r\n\r\n---@param player table\r\n---@param resetButtonId string\r\nlocal function resetGame(player, resetButtonId)\r\n  if (not player.host) then\r\n    broadcastToColor('Only the host may reset the table.', player.color, 'Red')\r\n    return\r\n  end\r\n  resetEventTokens()\r\n  resetCultureCards()\r\n  resetEncounters()\r\n  resetCultureTokens()\r\nend\r\n\r\nreturn {\r\n  resetGame = resetGame,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/setup\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal money = require(\"lua/global/money\")\r\n\r\n---@param container table\r\n---@param snaps table[]\r\n---@param flip boolean\r\nlocal function dealFromContainerToSnaps(container, snaps, flip)\r\n  local totalWaitTime = 0\r\n  local delayBetween = 0.1\r\n  table.forEach(snaps, function(snap)\r\n    if (#container.getObjects() <= 0) then\r\n      return\r\n    end\r\n\r\n    local destPosition = snap.position\r\n    destPosition.y = snap.position.y + 1 -- lift it off the table a bit\r\n\r\n    local destRotation = snap.rotation\r\n    if (flip) then\r\n      destRotation.z = 180 -- the 'flip' opt of takeObject doesn't work\r\n    end\r\n\r\n    local takeOptions = {\r\n      position = destPosition,\r\n      rotation = destRotation,\r\n    }\r\n\r\n    Wait.time(function() container.takeObject(takeOptions) end, totalWaitTime)\r\n    totalWaitTime = totalWaitTime + delayBetween\r\n  end)\r\nend\r\n\r\nlocal function setupPlayers()\r\n  table.forEach(Player.getPlayers(), function(player)\r\n    player.promote()\r\n  end)\r\nend\r\n\r\nlocal function setupMoney()\r\n  local seatedPlayers = getSeatedPlayers()\r\n  local amount = #seatedPlayers * 20\r\n  table.forEach(seatedPlayers, function(playerColor)\r\n    money.payPlayer(amount, Player[playerColor])\r\n  end)\r\nend\r\n\r\nlocal function setupEventTokens()\r\n  local eventTokens = getObjectsWithAllTags({ 'event', 'token' })\r\n  local eventTokenBag = getObjectFromGUID(constants.GUIDS.EventTokenBagGUID)\r\n  table.forEach(eventTokens, function(obj)\r\n    obj.setLock(false)\r\n    eventTokenBag.putObject(obj)\r\n  end)\r\nend\r\n\r\n---@param cultureCardSnaps table[]\r\nlocal function setupCultureCards(cultureCardSnaps)\r\n  local cultureCards = getObjectsWithAllTags({ 'culture', 'card' })\r\n  local cultureCardBag = getObjectFromGUID(constants.GUIDS.CultureCardBagGUID)\r\n  table.forEach(cultureCards, function(obj)\r\n    if (obj.type == 'Card') then\r\n      obj.setLock(false)\r\n      cultureCardBag.putObject(obj)\r\n    end\r\n  end)\r\n  dealFromContainerToSnaps(cultureCardBag, cultureCardSnaps, true)\r\nend\r\n\r\n---@param encounterSnaps table[]\r\nlocal function setupEncounters(encounterSnaps)\r\n  local encounterTokens = getObjectsWithAllTags({ 'encounter', 'token' })\r\n  local encounterBag = getObjectFromGUID(constants.GUIDS.EncounterBagGUID)\r\n  table.forEach(encounterTokens, function(obj)\r\n    obj.setLock(false)\r\n    encounterBag.putObject(obj)\r\n  end)\r\n  dealFromContainerToSnaps(encounterBag, encounterSnaps, true)\r\nend\r\n\r\n---@param snap table\r\n---@return boolean\r\nlocal function isCultureCardSnap(snap)\r\n  return table.includes(snap.tags, 'culture') and table.includes(snap.tags, 'card')\r\nend\r\n\r\n---@param snap table\r\n---@return boolean\r\nlocal function isEncounterSnap(snap)\r\n  return table.includes(snap.tags, 'encounter')\r\nend\r\n\r\n---@param player table\r\n---@param setupButtonId string\r\nlocal function setupGame(player, setupButtonId)\r\n  Global.UI.hide(setupButtonId)\r\n\r\n  local snapPointList = Global.getSnapPoints()\r\n  local cultureCardSnaps = table.filter(snapPointList, isCultureCardSnap)\r\n  local encounterSnaps = table.filter(snapPointList, isEncounterSnap)\r\n\r\n  setupPlayers()\r\n  setupMoney()\r\n  setupEventTokens()\r\n  setupCultureCards(cultureCardSnaps)\r\n  setupEncounters(encounterSnaps)\r\nend\r\n\r\nreturn {\r\n  setupGame = setupGame\r\n}\r\n\nend)\nreturn __bundle_require(\"Global.-1.lua\")",
  "LuaScriptState": "{\"chimeraExtA\":true,\"chimeraExtB\":true}",
  "XmlUI": "<!-- include lua/global/global.xml -->\n<Button\r\n  id=\"setupButton\"\r\n  onClick=\"setupGame(setupButton)\"\r\n  offsetXY=\"400 0\"\r\n  rectAlignment=\"UpperCenter\"\r\n  width=\"50\"\r\n  height=\"50\"\r\n  fontStyle=\"bold\"\r\n>\r\n  Setup\r\n</Button>\r\n<Button\r\n  id=\"resetButton\"\r\n  onClick=\"resetGame(resetButton)\"\r\n  offsetXY=\"453 0\"\r\n  rectAlignment=\"UpperCenter\"\r\n  width=\"50\"\r\n  height=\"50\"\r\n  fontStyle=\"bold\"\r\n  visibility=\"Host\"\r\n>\r\n  Reset\r\n</Button>\r\n\n<!-- include lua/global/global.xml -->",
  "SnapPoints": [
    {
      "Position": {
        "x": -20.1179371,
        "y": 1.0,
        "z": -20.93324
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": -25.5278645,
        "y": 1.00959909,
        "z": -14.5296516
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": -24.1670723,
        "y": 1.01180911,
        "z": -11.5297174
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": -22.3622723,
        "y": 1.0197525,
        "z": -3.45249081
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": -6.461369,
        "y": 1.032842,
        "z": 21.1892376
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": -2.34247828,
        "y": 1.01509738,
        "z": 10.2903633
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 0.8567517,
        "y": 1.00784767,
        "z": 7.166827
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 4.12264729,
        "y": 1.0,
        "z": 2.87106323
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": -1.38364911,
        "y": 1.0,
        "z": -1.232402
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 4.09835529,
        "y": 1.0,
        "z": -2.15443158
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 7.55290747,
        "y": 1.0,
        "z": -10.6451416
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": -3.01271,
        "y": 1.0,
        "z": -20.9232941
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 0.08617768,
        "y": 1.0,
        "z": -18.3161449
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 3.46341014,
        "y": 1.0,
        "z": -21.071743
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 11.2345781,
        "y": 1.0,
        "z": -20.8486156
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 23.2115154,
        "y": 1.0,
        "z": -20.5522518
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 30.856678,
        "y": 1.0,
        "z": -17.6482048
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 25.3824158,
        "y": 1.0,
        "z": -13.048173
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 22.358345,
        "y": 1.0,
        "z": -2.49489975
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 27.6747017,
        "y": 1.0,
        "z": 4.918308
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 20.4612846,
        "y": 1.0,
        "z": 8.088037
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 23.8570728,
        "y": 1.0,
        "z": 12.8477049
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 9.28121948,
        "y": 1.00677216,
        "z": 13.6721859
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": 30.44363,
        "y": 1.0,
        "z": 16.7093334
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "encounter"
      ]
    },
    {
      "Position": {
        "x": -23.5895424,
        "y": 1.04362822,
        "z": 14.9945431
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s01"
      ]
    },
    {
      "Position": {
        "x": -5.401427,
        "y": 1.02635717,
        "z": 16.8158741
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s02"
      ]
    },
    {
      "Position": {
        "x": 24.3445969,
        "y": 1.0,
        "z": 17.1329651
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s03"
      ]
    },
    {
      "Position": {
        "x": 24.6117344,
        "y": 1.0,
        "z": 1.67882776
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s08"
      ]
    },
    {
      "Position": {
        "x": 16.412281,
        "y": 1.0,
        "z": -5.94838
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s11"
      ]
    },
    {
      "Position": {
        "x": 25.2331715,
        "y": 1.0,
        "z": -16.6426563
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s14"
      ]
    },
    {
      "Position": {
        "x": 7.84799,
        "y": 1.0,
        "z": -13.9536295
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s13"
      ]
    },
    {
      "Position": {
        "x": 1.830292,
        "y": 1.0,
        "z": -6.084536
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s10"
      ]
    },
    {
      "Position": {
        "x": -1.06620288,
        "y": 1.00494659,
        "z": 3.10894942
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s07"
      ]
    },
    {
      "Position": {
        "x": 9.709501,
        "y": 1.00193787,
        "z": 10.0946407
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s05"
      ]
    },
    {
      "Position": {
        "x": -13.8508282,
        "y": 1.02610815,
        "z": 9.20559
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s04"
      ]
    },
    {
      "Position": {
        "x": -21.4170151,
        "y": 1.02655482,
        "z": 2.93833137
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s06"
      ]
    },
    {
      "Position": {
        "x": -23.9553413,
        "y": 1.01712632,
        "z": -6.996278
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s09"
      ]
    },
    {
      "Position": {
        "x": -21.1257458,
        "y": 1.00208867,
        "z": -16.81195
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "card",
        "culture",
        "s12"
      ]
    },
    {
      "Position": {
        "x": -25.0118637,
        "y": 1.04654133,
        "z": 16.1298141
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s01"
      ]
    },
    {
      "Position": {
        "x": -3.96234822,
        "y": 1.02622759,
        "z": 17.9714222
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s02"
      ]
    },
    {
      "Position": {
        "x": -15.2946405,
        "y": 1.02906823,
        "z": 10.3603325
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s04"
      ]
    },
    {
      "Position": {
        "x": 22.929884,
        "y": 1.0,
        "z": 18.3532333
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s03"
      ]
    },
    {
      "Position": {
        "x": 8.29494,
        "y": 1.004807,
        "z": 11.2007561
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s05"
      ]
    },
    {
      "Position": {
        "x": 23.14416,
        "y": 1.0,
        "z": 2.79620361
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s08"
      ]
    },
    {
      "Position": {
        "x": 0.325927168,
        "y": 1.004903,
        "z": 4.29367542
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s07"
      ]
    },
    {
      "Position": {
        "x": -20.0096989,
        "y": 1.02655137,
        "z": 4.16921759
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s06"
      ]
    },
    {
      "Position": {
        "x": 17.850853,
        "y": 1.0,
        "z": -4.74367046
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s11"
      ]
    },
    {
      "Position": {
        "x": 3.23718667,
        "y": 1.0,
        "z": -4.90640974
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s10"
      ]
    },
    {
      "Position": {
        "x": -22.50719,
        "y": 1.01704669,
        "z": -5.79192
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s09"
      ]
    },
    {
      "Position": {
        "x": -19.6789017,
        "y": 1.00203,
        "z": -15.5916815
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s12"
      ]
    },
    {
      "Position": {
        "x": 9.269763,
        "y": 1.0,
        "z": -12.719492
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s13"
      ]
    },
    {
      "Position": {
        "x": 23.7959442,
        "y": 1.0,
        "z": -15.4581337
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "factory",
        "s14"
      ]
    },
    {
      "Position": {
        "x": -25.8717251,
        "y": 1.04440033,
        "z": 13.6253328
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s01"
      ]
    },
    {
      "Position": {
        "x": -3.04719448,
        "y": 1.02219141,
        "z": 15.4732895
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s02"
      ]
    },
    {
      "Position": {
        "x": 22.0624561,
        "y": 1.0,
        "z": 15.7882071
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s03"
      ]
    },
    {
      "Position": {
        "x": 7.384098,
        "y": 1.00277388,
        "z": 8.739912
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s05"
      ]
    },
    {
      "Position": {
        "x": 22.30063,
        "y": 1.0,
        "z": 0.355319619
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s08"
      ]
    },
    {
      "Position": {
        "x": 1.260949,
        "y": 1.00086248,
        "z": 1.80937481
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s07"
      ]
    },
    {
      "Position": {
        "x": -16.1921043,
        "y": 1.02697229,
        "z": 7.85987854
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s04"
      ]
    },
    {
      "Position": {
        "x": -19.1209812,
        "y": 1.02252662,
        "z": 1.65714741
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s06"
      ]
    },
    {
      "Position": {
        "x": 18.779871,
        "y": 1.0,
        "z": -7.2593236
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s11"
      ]
    },
    {
      "Position": {
        "x": 4.109732,
        "y": 1.0,
        "z": -7.43586254
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s10"
      ]
    },
    {
      "Position": {
        "x": -21.6151085,
        "y": 1.01301241,
        "z": -8.308747
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s09"
      ]
    },
    {
      "Position": {
        "x": -18.7964764,
        "y": 1.0,
        "z": -18.1150017
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s12"
      ]
    },
    {
      "Position": {
        "x": 10.187871,
        "y": 1.0,
        "z": -15.2529306
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s13"
      ]
    },
    {
      "Position": {
        "x": 22.89144,
        "y": 1.0,
        "z": -17.9661617
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "factory",
        "deed",
        "s14"
      ]
    },
    {
      "Position": {
        "x": -22.11175,
        "y": 1.043421,
        "z": 16.1206417
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s01"
      ]
    },
    {
      "Position": {
        "x": -12.4510765,
        "y": 1.02600861,
        "z": 10.3511486
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s04"
      ]
    },
    {
      "Position": {
        "x": -6.837858,
        "y": 1.02936542,
        "z": 18.016428
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s02"
      ]
    },
    {
      "Position": {
        "x": 25.8284245,
        "y": 1.0,
        "z": 18.3091583
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s03"
      ]
    },
    {
      "Position": {
        "x": 26.0157261,
        "y": 1.0,
        "z": 2.85900736
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s08"
      ]
    },
    {
      "Position": {
        "x": 11.1407709,
        "y": 1.00186908,
        "z": 11.2930813
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s05"
      ]
    },
    {
      "Position": {
        "x": -2.53024387,
        "y": 1.0079509,
        "z": 4.28217125
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s07"
      ]
    },
    {
      "Position": {
        "x": 0.375169754,
        "y": 1.0,
        "z": -4.953498
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s10"
      ]
    },
    {
      "Position": {
        "x": 14.9936113,
        "y": 1.0,
        "z": -4.75308752
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s11"
      ]
    },
    {
      "Position": {
        "x": 26.6150684,
        "y": 1.0,
        "z": -15.4687033
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s14"
      ]
    },
    {
      "Position": {
        "x": 6.43851471,
        "y": 1.0,
        "z": -12.7127924
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s13"
      ]
    },
    {
      "Position": {
        "x": -22.5396175,
        "y": 1.005095,
        "z": -15.5931187
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s12"
      ]
    },
    {
      "Position": {
        "x": -25.3572311,
        "y": 1.02009118,
        "z": -5.80090237
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s09"
      ]
    },
    {
      "Position": {
        "x": -22.9015636,
        "y": 1.02965677,
        "z": 4.17341375
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "good",
        "normal",
        "s06"
      ]
    },
    {
      "Position": {
        "x": -22.9079075,
        "y": 1.041241,
        "z": 13.6401482
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s01"
      ]
    },
    {
      "Position": {
        "x": -6.03185368,
        "y": 1.02537227,
        "z": 15.4578934
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s02"
      ]
    },
    {
      "Position": {
        "x": 24.9714832,
        "y": 1.0,
        "z": 15.7841778
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s03"
      ]
    },
    {
      "Position": {
        "x": 10.361166,
        "y": 1.0,
        "z": 8.758768
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s05"
      ]
    },
    {
      "Position": {
        "x": 25.1579342,
        "y": 1.0,
        "z": 0.31471765
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s08"
      ]
    },
    {
      "Position": {
        "x": 15.7825155,
        "y": 1.0,
        "z": -7.3106885
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s11"
      ]
    },
    {
      "Position": {
        "x": 25.895895,
        "y": 1.0,
        "z": -18.0243282
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s14"
      ]
    },
    {
      "Position": {
        "x": 7.226949,
        "y": 1.0,
        "z": -15.3026142
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s13"
      ]
    },
    {
      "Position": {
        "x": -21.787632,
        "y": 1.00114214,
        "z": -18.1661472
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s12"
      ]
    },
    {
      "Position": {
        "x": -24.58585,
        "y": 1.01612115,
        "z": -8.370928
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s09"
      ]
    },
    {
      "Position": {
        "x": -22.0422554,
        "y": 1.02561533,
        "z": 1.62201774
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s06"
      ]
    },
    {
      "Position": {
        "x": -13.1902008,
        "y": 1.02369523,
        "z": 7.81170034
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s04"
      ]
    },
    {
      "Position": {
        "x": -1.71458626,
        "y": 1.0039804,
        "z": 1.75047266
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s07"
      ]
    },
    {
      "Position": {
        "x": 1.19809282,
        "y": 1.0,
        "z": -7.432282
      },
      "Rotation": {
        "x": 0.0,
        "y": 180.0,
        "z": 0.0
      },
      "Tags": [
        "culture",
        "details",
        "s10"
      ]
    }
  ],
  "ObjectStates": [
    {
      "GUID": "9f9496",
      "Name": "HandTrigger",
      "Transform": {
        "posX": -12.33,
        "posY": 2.5,
        "posZ": -48.5,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 24.0,
        "scaleY": 6.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999997,
        "b": 0.09399996,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Red",
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hand Trigger.9f9496.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hand Trigger.9f9496.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/hands/hand\")\r\n\nend)\n__bundle_register(\"lua/components/hands/hand\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param obj table\r\n---@return boolean\r\nlocal function isCash(obj)\r\n  if (obj == nil) then return false end\r\n  return obj.hasTag('credits')\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectEnterZone(zone, obj)\r\n  if (zone == self and isCash(obj)) then\r\n    obj.setRotation({0, 90, 0})\r\n  end\r\nend\r\n\nend)\nreturn __bundle_require(\"Hand Trigger.9f9496.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "072475",
      "Name": "HandTrigger",
      "Transform": {
        "posX": 12.33,
        "posY": 2.5,
        "posZ": -48.5,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 24.0,
        "scaleY": 6.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.191999972,
        "g": 0.701,
        "b": 0.167999953,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Green",
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hand Trigger.072475.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hand Trigger.072475.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/hands/hand\")\r\n\nend)\n__bundle_register(\"lua/components/hands/hand\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param obj table\r\n---@return boolean\r\nlocal function isCash(obj)\r\n  if (obj == nil) then return false end\r\n  return obj.hasTag('credits')\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectEnterZone(zone, obj)\r\n  if (zone == self and isCash(obj)) then\r\n    obj.setRotation({0, 90, 0})\r\n  end\r\nend\r\n\nend)\nreturn __bundle_require(\"Hand Trigger.072475.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "63dfa5",
      "Name": "HandTrigger",
      "Transform": {
        "posX": 37.0,
        "posY": 2.5,
        "posZ": -48.5,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 24.0,
        "scaleY": 6.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.39199996,
        "b": 0.112999953,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Orange",
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hand Trigger.63dfa5.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hand Trigger.63dfa5.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/hands/hand\")\r\n\nend)\n__bundle_register(\"lua/components/hands/hand\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param obj table\r\n---@return boolean\r\nlocal function isCash(obj)\r\n  if (obj == nil) then return false end\r\n  return obj.hasTag('credits')\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectEnterZone(zone, obj)\r\n  if (zone == self and isCash(obj)) then\r\n    obj.setRotation({0, 90, 0})\r\n  end\r\nend\r\n\nend)\nreturn __bundle_require(\"Hand Trigger.63dfa5.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "4c8dd9",
      "Name": "HandTrigger",
      "Transform": {
        "posX": -36.99691,
        "posY": 2.5,
        "posZ": -48.5,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 24.0,
        "scaleY": 6.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171999961,
        "a": 0.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Yellow",
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hand Trigger.4c8dd9.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hand Trigger.4c8dd9.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/hands/hand\")\r\n\nend)\n__bundle_register(\"lua/components/hands/hand\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param obj table\r\n---@return boolean\r\nlocal function isCash(obj)\r\n  if (obj == nil) then return false end\r\n  return obj.hasTag('credits')\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectEnterZone(zone, obj)\r\n  if (zone == self and isCash(obj)) then\r\n    obj.setRotation({0, 90, 0})\r\n  end\r\nend\r\n\nend)\nreturn __bundle_require(\"Hand Trigger.4c8dd9.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "63b39b",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -12.5132961,
        "posY": 0.99907887,
        "posZ": -33.51746,
        "rotX": 359.8696,
        "rotY": 0.00560844271,
        "rotZ": 0.08972316,
        "scaleX": 2.0,
        "scaleY": 2.0,
        "scaleZ": 2.0
      },
      "Nickname": "Red Ship",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.6916378,
        "g": 0.05837076,
        "b": 0.0518084466
      },
      "Tags": [
        "miniature",
        "player",
        "red",
        "ship"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": true,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_ship.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_ship.obj",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "2f8c98",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -36.5132751,
        "posY": 0.99907887,
        "posZ": -33.5174637,
        "rotX": 359.8696,
        "rotY": 0.004700515,
        "rotZ": 0.08972617,
        "scaleX": 2.0,
        "scaleY": 2.0,
        "scaleZ": 2.0
      },
      "Nickname": "Yellow Ship",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171987385
      },
      "Tags": [
        "miniature",
        "player",
        "ship",
        "yellow"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": true,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_ship.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_ship.obj",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "3da2d6",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 12.4867115,
        "posY": 0.99907887,
        "posZ": -33.5173645,
        "rotX": 359.8696,
        "rotY": 0.005621808,
        "rotZ": 0.08972081,
        "scaleX": 2.0,
        "scaleY": 2.0,
        "scaleZ": 2.0
      },
      "Nickname": "Green Ship",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.1919874,
        "g": 0.701,
        "b": 0.167987376
      },
      "Tags": [
        "green",
        "miniature",
        "player",
        "ship"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": true,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_ship.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_ship.obj",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "f17c87",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 37.48671,
        "posY": 0.99907887,
        "posZ": -33.5174942,
        "rotX": 359.8696,
        "rotY": 0.004691874,
        "rotZ": 0.08972329,
        "scaleX": 2.0,
        "scaleY": 2.0,
        "scaleZ": 2.0
      },
      "Nickname": "Orange Ship",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.3919867,
        "b": 0.112986691
      },
      "Tags": [
        "miniature",
        "orange",
        "player",
        "ship"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": true,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_ship.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_ship.obj",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "fdf9e3",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 0.0,
        "posY": 0.0,
        "posZ": 0.0,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Table Shared",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249986827,
        "g": 0.249986827,
        "b": 0.249986827
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": true,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/table_shared.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 4,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "7df0c6",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 0.0,
        "posY": 0.0,
        "posZ": 0.0,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Table Main",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249987215,
        "g": 0.249987215,
        "b": 0.249987215
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": true,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/table_main.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 4,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "332a2b",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 0.0,
        "posY": 0.0,
        "posZ": 0.0,
        "rotX": 359.93,
        "rotY": 0.053673733,
        "rotZ": 359.9385,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/table_board.obj",
        "DiffuseURL": "https://github.com/greeze/tts_mov/raw/main/assets/board/board_44x26.jpg",
        "NormalURL": "",
        "ColliderURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/table_board_collider.obj",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 4,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "8c8f95",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 0.0,
        "posY": 0.0,
        "posZ": 0.0,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Table Players",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249986827,
        "g": 0.249986827,
        "b": 0.249986827
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": true,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/table_players.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 4,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "dc621a",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -12.25,
        "posY": 1.0,
        "posZ": -31.5,
        "rotX": -1.0414923E-07,
        "rotY": -1.752026E-10,
        "rotZ": -2.66678724E-09,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Cash: 0 c",
      "Description": "Net Worth: 0 c",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0,
        "a": 0.2509804
      },
      "Tags": [
        "display",
        "player",
        "red"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/net_worth.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 4,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/net_worth/net_worth.xml -->\n<Defaults>\r\n  <Text color=\"#FFFFFF\" fontStyle=\"bold\" />\r\n  <Text class=\"title\" fontSize=\"18\" />\r\n  <Text class=\"value\" fontSize=\"60\" />\r\n</Defaults>\r\n\r\n<TableLayout\r\n  id=\"NetWorthLayout\"\r\n  width=\"2260\"\r\n  height=\"105\"\r\n  position=\"0 -20 -60\"\r\n  rotation=\"-55 0 0\"\r\n>\r\n  <Row preferredHeight=\"30\">\r\n    <Cell>\r\n      <Text class=\"title\">Cash on Hand</Text>\r\n    </Cell>\r\n    <Cell>\r\n      <Text class=\"title\">Total Net Worth</Text>\r\n    </Cell>\r\n  </Row>\r\n  <Row>\r\n    <Cell>\r\n      <Text id=\"cash\" class=\"value\">0 c</Text>\r\n    </Cell>\r\n    <Cell>\r\n      <Text id=\"total\" class=\"value\">0 c</Text>\r\n    </Cell>\r\n  </Row>\r\n</TableLayout>\r\n\n<!-- include lua/components/net_worth/net_worth.xml -->"
    },
    {
      "GUID": "9014c8",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -12.333,
        "posY": 2.5,
        "posZ": -40.4988174,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 24.0,
        "scaleY": 6.0,
        "scaleZ": 18.9976387
      },
      "Nickname": "Player Zone",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "player",
        "red",
        "scoring",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Player Zone.9014c8.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Player Zone.9014c8.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/net_worth/net_worth_zone\")\r\n\nend)\n__bundle_register(\"lua/components/net_worth/net_worth_zone\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal sumValueItems = require(\"lua/utils/sumValueItems\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isCash(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'credits' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isScoringItem(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'scoring' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isPlayerDisplay(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'player', 'display' })\r\nend\r\n\r\n---@param containedObjects table[]\r\n---@return integer\r\nlocal function calculateCash(containedObjects)\r\n  local cashItems = table.filter(containedObjects, isCash)\r\n  local cashValue = sumValueItems(cashItems)\r\n  return cashValue or 0\r\nend\r\n\r\n---@param containedObjects table[]\r\n---@return integer\r\nlocal function calculateTotal(containedObjects)\r\n  local scoringItems = table.filter(containedObjects, isScoringItem)\r\n  local totalValue = sumValueItems(scoringItems)\r\n  return totalValue or 0\r\nend\r\n\r\nlocal function updatePlayerDisplay()\r\n  local containedObjects = self.getObjects()\r\n  if (containedObjects == nil or #containedObjects == 0) then return end\r\n\r\n  local cashValue = calculateCash(containedObjects) .. ' c'\r\n  local totalValue = calculateTotal(containedObjects) .. ' c'\r\n  local playerDisplay = table.find(containedObjects, isPlayerDisplay)\r\n  if (playerDisplay ~= nil) then\r\n    playerDisplay.UI.setValue('cash', cashValue)\r\n    playerDisplay.UI.setValue('total', totalValue)\r\n    playerDisplay.setName('Cash: ' .. cashValue)\r\n    playerDisplay.setDescription('Net Worth: ' .. totalValue)\r\n  end\r\nend\r\n\r\n---@param save_state table\r\nfunction onLoad(save_state)\r\n  updatePlayerDisplay()\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectEnterZone(zone)\r\n  if (zone == self) then\r\n    updatePlayerDisplay()\r\n  end\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectLeaveZone(zone)\r\n  if (zone ~= nil and zone == self) then\r\n    updatePlayerDisplay()\r\n  end\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/sumValueItems\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given a table of objects, sums the values that were assigned using `object.setVar('value', number)`\r\n---@param valueItems table[] @table of TTS objects\r\n---@param valueVarName string @string name of the numeric variable to sum, retrieved using `object.getVar('value')`. Defaults to 'value'.\r\n---@return number\r\nlocal function sumValueItems(valueItems, valueVarName)\r\n  valueVarName = valueVarName or 'value'\r\n  local values = table.map(\r\n    valueItems,\r\n    function(valueItem)\r\n      if (valueItem == nil) then return 0 end\r\n      return (valueItem.getVar(valueVarName) or 0) * math.abs(valueItem.getQuantity())\r\n    end\r\n  )\r\n  return table.sum(values)\r\nend\r\n\r\nreturn sumValueItems\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Player Zone.9014c8.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "308967",
      "Name": "Custom_PDF",
      "Transform": {
        "posX": 5.591633E-06,
        "posY": 7.0,
        "posZ": 40.0,
        "rotX": 45.0000038,
        "rotY": 180.0,
        "rotZ": -2.72776124E-05,
        "scaleX": 4.0,
        "scaleY": 1.0,
        "scaleZ": 4.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "https://github.com/greeze/tts_mov/raw/main/assets/rules/mov_rulebook_classic_hi.pdf",
        "PDFPassword": "",
        "PDFPage": 15,
        "PDFPageOffset": 0
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "3b8ada",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 12.25,
        "posY": 1.0,
        "posZ": -31.5,
        "rotX": 2.42913785E-07,
        "rotY": -2.517515E-10,
        "rotZ": -3.67944359E-08,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Cash: 0 c",
      "Description": "Net Worth: 0 c",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0,
        "a": 0.2509804
      },
      "Tags": [
        "display",
        "green",
        "player"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/net_worth.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 4,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/net_worth/net_worth.xml -->\n<Defaults>\r\n  <Text color=\"#FFFFFF\" fontStyle=\"bold\" />\r\n  <Text class=\"title\" fontSize=\"18\" />\r\n  <Text class=\"value\" fontSize=\"60\" />\r\n</Defaults>\r\n\r\n<TableLayout\r\n  id=\"NetWorthLayout\"\r\n  width=\"2260\"\r\n  height=\"105\"\r\n  position=\"0 -20 -60\"\r\n  rotation=\"-55 0 0\"\r\n>\r\n  <Row preferredHeight=\"30\">\r\n    <Cell>\r\n      <Text class=\"title\">Cash on Hand</Text>\r\n    </Cell>\r\n    <Cell>\r\n      <Text class=\"title\">Total Net Worth</Text>\r\n    </Cell>\r\n  </Row>\r\n  <Row>\r\n    <Cell>\r\n      <Text id=\"cash\" class=\"value\">0 c</Text>\r\n    </Cell>\r\n    <Cell>\r\n      <Text id=\"total\" class=\"value\">0 c</Text>\r\n    </Cell>\r\n  </Row>\r\n</TableLayout>\r\n\n<!-- include lua/components/net_worth/net_worth.xml -->"
    },
    {
      "GUID": "1bb59f",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 37.0,
        "posY": 1.0,
        "posZ": -31.5,
        "rotX": 2.81959132E-07,
        "rotY": 9.590618E-10,
        "rotZ": -7.873978E-09,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Cash: 0 c",
      "Description": "Net Worth: 0 c",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0,
        "a": 0.2509804
      },
      "Tags": [
        "display",
        "orange",
        "player"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/net_worth.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 4,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/net_worth/net_worth.xml -->\n<Defaults>\r\n  <Text color=\"#FFFFFF\" fontStyle=\"bold\" />\r\n  <Text class=\"title\" fontSize=\"18\" />\r\n  <Text class=\"value\" fontSize=\"60\" />\r\n</Defaults>\r\n\r\n<TableLayout\r\n  id=\"NetWorthLayout\"\r\n  width=\"2260\"\r\n  height=\"105\"\r\n  position=\"0 -20 -60\"\r\n  rotation=\"-55 0 0\"\r\n>\r\n  <Row preferredHeight=\"30\">\r\n    <Cell>\r\n      <Text class=\"title\">Cash on Hand</Text>\r\n    </Cell>\r\n    <Cell>\r\n      <Text class=\"title\">Total Net Worth</Text>\r\n    </Cell>\r\n  </Row>\r\n  <Row>\r\n    <Cell>\r\n      <Text id=\"cash\" class=\"value\">0 c</Text>\r\n    </Cell>\r\n    <Cell>\r\n      <Text id=\"total\" class=\"value\">0 c</Text>\r\n    </Cell>\r\n  </Row>\r\n</TableLayout>\r\n\n<!-- include lua/components/net_worth/net_worth.xml -->"
    },
    {
      "GUID": "909dc6",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -37.0,
        "posY": 2.5,
        "posZ": -40.4954529,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 24.0,
        "scaleY": 6.0,
        "scaleZ": 18.9909019
      },
      "Nickname": "Player Zone",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "player",
        "scoring",
        "yellow",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Player Zone.909dc6.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Player Zone.909dc6.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/net_worth/net_worth_zone\")\r\n\nend)\n__bundle_register(\"lua/components/net_worth/net_worth_zone\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal sumValueItems = require(\"lua/utils/sumValueItems\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isCash(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'credits' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isScoringItem(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'scoring' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isPlayerDisplay(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'player', 'display' })\r\nend\r\n\r\n---@param containedObjects table[]\r\n---@return integer\r\nlocal function calculateCash(containedObjects)\r\n  local cashItems = table.filter(containedObjects, isCash)\r\n  local cashValue = sumValueItems(cashItems)\r\n  return cashValue or 0\r\nend\r\n\r\n---@param containedObjects table[]\r\n---@return integer\r\nlocal function calculateTotal(containedObjects)\r\n  local scoringItems = table.filter(containedObjects, isScoringItem)\r\n  local totalValue = sumValueItems(scoringItems)\r\n  return totalValue or 0\r\nend\r\n\r\nlocal function updatePlayerDisplay()\r\n  local containedObjects = self.getObjects()\r\n  if (containedObjects == nil or #containedObjects == 0) then return end\r\n\r\n  local cashValue = calculateCash(containedObjects) .. ' c'\r\n  local totalValue = calculateTotal(containedObjects) .. ' c'\r\n  local playerDisplay = table.find(containedObjects, isPlayerDisplay)\r\n  if (playerDisplay ~= nil) then\r\n    playerDisplay.UI.setValue('cash', cashValue)\r\n    playerDisplay.UI.setValue('total', totalValue)\r\n    playerDisplay.setName('Cash: ' .. cashValue)\r\n    playerDisplay.setDescription('Net Worth: ' .. totalValue)\r\n  end\r\nend\r\n\r\n---@param save_state table\r\nfunction onLoad(save_state)\r\n  updatePlayerDisplay()\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectEnterZone(zone)\r\n  if (zone == self) then\r\n    updatePlayerDisplay()\r\n  end\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectLeaveZone(zone)\r\n  if (zone ~= nil and zone == self) then\r\n    updatePlayerDisplay()\r\n  end\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/sumValueItems\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given a table of objects, sums the values that were assigned using `object.setVar('value', number)`\r\n---@param valueItems table[] @table of TTS objects\r\n---@param valueVarName string @string name of the numeric variable to sum, retrieved using `object.getVar('value')`. Defaults to 'value'.\r\n---@return number\r\nlocal function sumValueItems(valueItems, valueVarName)\r\n  valueVarName = valueVarName or 'value'\r\n  local values = table.map(\r\n    valueItems,\r\n    function(valueItem)\r\n      if (valueItem == nil) then return 0 end\r\n      return (valueItem.getVar(valueVarName) or 0) * math.abs(valueItem.getQuantity())\r\n    end\r\n  )\r\n  return table.sum(values)\r\nend\r\n\r\nreturn sumValueItems\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Player Zone.909dc6.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "b78bda",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 12.33,
        "posY": 2.5,
        "posZ": -40.49674,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 24.0,
        "scaleY": 6.0,
        "scaleZ": 18.9934711
      },
      "Nickname": "Player Zone",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "green",
        "player",
        "scoring",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Player Zone.b78bda.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Player Zone.b78bda.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/net_worth/net_worth_zone\")\r\n\nend)\n__bundle_register(\"lua/components/net_worth/net_worth_zone\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal sumValueItems = require(\"lua/utils/sumValueItems\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isCash(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'credits' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isScoringItem(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'scoring' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isPlayerDisplay(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'player', 'display' })\r\nend\r\n\r\n---@param containedObjects table[]\r\n---@return integer\r\nlocal function calculateCash(containedObjects)\r\n  local cashItems = table.filter(containedObjects, isCash)\r\n  local cashValue = sumValueItems(cashItems)\r\n  return cashValue or 0\r\nend\r\n\r\n---@param containedObjects table[]\r\n---@return integer\r\nlocal function calculateTotal(containedObjects)\r\n  local scoringItems = table.filter(containedObjects, isScoringItem)\r\n  local totalValue = sumValueItems(scoringItems)\r\n  return totalValue or 0\r\nend\r\n\r\nlocal function updatePlayerDisplay()\r\n  local containedObjects = self.getObjects()\r\n  if (containedObjects == nil or #containedObjects == 0) then return end\r\n\r\n  local cashValue = calculateCash(containedObjects) .. ' c'\r\n  local totalValue = calculateTotal(containedObjects) .. ' c'\r\n  local playerDisplay = table.find(containedObjects, isPlayerDisplay)\r\n  if (playerDisplay ~= nil) then\r\n    playerDisplay.UI.setValue('cash', cashValue)\r\n    playerDisplay.UI.setValue('total', totalValue)\r\n    playerDisplay.setName('Cash: ' .. cashValue)\r\n    playerDisplay.setDescription('Net Worth: ' .. totalValue)\r\n  end\r\nend\r\n\r\n---@param save_state table\r\nfunction onLoad(save_state)\r\n  updatePlayerDisplay()\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectEnterZone(zone)\r\n  if (zone == self) then\r\n    updatePlayerDisplay()\r\n  end\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectLeaveZone(zone)\r\n  if (zone ~= nil and zone == self) then\r\n    updatePlayerDisplay()\r\n  end\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/sumValueItems\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given a table of objects, sums the values that were assigned using `object.setVar('value', number)`\r\n---@param valueItems table[] @table of TTS objects\r\n---@param valueVarName string @string name of the numeric variable to sum, retrieved using `object.getVar('value')`. Defaults to 'value'.\r\n---@return number\r\nlocal function sumValueItems(valueItems, valueVarName)\r\n  valueVarName = valueVarName or 'value'\r\n  local values = table.map(\r\n    valueItems,\r\n    function(valueItem)\r\n      if (valueItem == nil) then return 0 end\r\n      return (valueItem.getVar(valueVarName) or 0) * math.abs(valueItem.getQuantity())\r\n    end\r\n  )\r\n  return table.sum(values)\r\nend\r\n\r\nreturn sumValueItems\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Player Zone.b78bda.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "611f3a",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 37.0,
        "posY": 2.5,
        "posZ": -40.49894,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 24.0,
        "scaleY": 6.0,
        "scaleZ": 18.9978752
      },
      "Nickname": "Player Zone",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "orange",
        "player",
        "scoring",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Player Zone.611f3a.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Player Zone.611f3a.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/net_worth/net_worth_zone\")\r\n\nend)\n__bundle_register(\"lua/components/net_worth/net_worth_zone\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal sumValueItems = require(\"lua/utils/sumValueItems\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isCash(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'credits' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isScoringItem(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'scoring' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isPlayerDisplay(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'player', 'display' })\r\nend\r\n\r\n---@param containedObjects table[]\r\n---@return integer\r\nlocal function calculateCash(containedObjects)\r\n  local cashItems = table.filter(containedObjects, isCash)\r\n  local cashValue = sumValueItems(cashItems)\r\n  return cashValue or 0\r\nend\r\n\r\n---@param containedObjects table[]\r\n---@return integer\r\nlocal function calculateTotal(containedObjects)\r\n  local scoringItems = table.filter(containedObjects, isScoringItem)\r\n  local totalValue = sumValueItems(scoringItems)\r\n  return totalValue or 0\r\nend\r\n\r\nlocal function updatePlayerDisplay()\r\n  local containedObjects = self.getObjects()\r\n  if (containedObjects == nil or #containedObjects == 0) then return end\r\n\r\n  local cashValue = calculateCash(containedObjects) .. ' c'\r\n  local totalValue = calculateTotal(containedObjects) .. ' c'\r\n  local playerDisplay = table.find(containedObjects, isPlayerDisplay)\r\n  if (playerDisplay ~= nil) then\r\n    playerDisplay.UI.setValue('cash', cashValue)\r\n    playerDisplay.UI.setValue('total', totalValue)\r\n    playerDisplay.setName('Cash: ' .. cashValue)\r\n    playerDisplay.setDescription('Net Worth: ' .. totalValue)\r\n  end\r\nend\r\n\r\n---@param save_state table\r\nfunction onLoad(save_state)\r\n  updatePlayerDisplay()\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectEnterZone(zone)\r\n  if (zone == self) then\r\n    updatePlayerDisplay()\r\n  end\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectLeaveZone(zone)\r\n  if (zone ~= nil and zone == self) then\r\n    updatePlayerDisplay()\r\n  end\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/sumValueItems\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given a table of objects, sums the values that were assigned using `object.setVar('value', number)`\r\n---@param valueItems table[] @table of TTS objects\r\n---@param valueVarName string @string name of the numeric variable to sum, retrieved using `object.getVar('value')`. Defaults to 'value'.\r\n---@return number\r\nlocal function sumValueItems(valueItems, valueVarName)\r\n  valueVarName = valueVarName or 'value'\r\n  local values = table.map(\r\n    valueItems,\r\n    function(valueItem)\r\n      if (valueItem == nil) then return 0 end\r\n      return (valueItem.getVar(valueVarName) or 0) * math.abs(valueItem.getQuantity())\r\n    end\r\n  )\r\n  return table.sum(values)\r\nend\r\n\r\nreturn sumValueItems\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Player Zone.611f3a.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "f894c4",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -23.593401,
        "posY": 2.25,
        "posZ": 14.5506382,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s01",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "33b366",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -5.258741,
        "posY": 2.25,
        "posZ": 16.3781281,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s02",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "febd6b",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 24.247118,
        "posY": 2.25,
        "posZ": 16.7351513,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s03",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "233df3",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 9.611609,
        "posY": 2.25,
        "posZ": 9.676543,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s05",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "80d1f1",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -0.9955977,
        "posY": 2.25,
        "posZ": 2.73091221,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s07",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "dc5d39",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -13.9528408,
        "posY": 2.25,
        "posZ": 9.592082,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s04",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "0b20e4",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -21.2907944,
        "posY": 2.25,
        "posZ": 2.58431816,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s06",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "c76167",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -23.8176537,
        "posY": 2.25,
        "posZ": -7.40658951,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s09",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "a868d0",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 1.94875336,
        "posY": 2.25,
        "posZ": -5.67896271,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s10",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "d447c1",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 16.617054,
        "posY": 2.25,
        "posZ": -6.344774,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s11",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "a1d148",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 24.4793644,
        "posY": 2.25,
        "posZ": 1.29055631,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s08",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "9622bb",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 25.0863972,
        "posY": 2.25,
        "posZ": -17.05381,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s14",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "2bac95",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 8.0237875,
        "posY": 2.25,
        "posZ": -14.2775993,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s13",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "c9af9b",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -21.0296249,
        "posY": 2.25,
        "posZ": -17.1525288,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 6.0,
        "scaleY": 2.5,
        "scaleZ": 6.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "culture",
        "s12",
        "system",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "711a6c",
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": -38.5,
        "posY": 1.25,
        "posZ": 28.5,
        "rotX": -2.49743746E-08,
        "rotY": 3.313597E-08,
        "rotZ": -1.94834051E-08,
        "scaleX": 5.0,
        "scaleY": 0.5,
        "scaleZ": 3.25
      },
      "Nickname": "Culture Cards",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.6358885,
        "g": 0.6358885,
        "b": 0.6358885
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 6,
        "CastShadows": true
      },
      "Bag": {
        "Order": 2
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "AttachedDecals": [
        {
          "Transform": {
            "posX": 0.000409698318,
            "posY": 0.51,
            "posZ": -7.04253534E-06,
            "rotX": 90.0,
            "rotY": 270.036438,
            "rotZ": 0.0,
            "scaleX": 0.9999997,
            "scaleY": 1.00000012,
            "scaleZ": 4.99999952
          },
          "CustomDecal": {
            "Name": "culture card back",
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
            "Size": 5.0
          }
        }
      ]
    },
    {
      "GUID": "e7d694",
      "Name": "CardCustom",
      "Transform": {
        "posX": 37.5,
        "posY": 1.01360488,
        "posZ": -39.5,
        "rotX": 6.413342E-08,
        "rotY": 180.001556,
        "rotZ": 4.36440821E-08,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "Scout",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "card",
        "orange",
        "player"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": false,
      "CardID": 1700,
      "SidewaysCard": false,
      "CustomDeck": {
        "17": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_scout_orange.jpg",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_scout_orange.jpg",
          "NumWidth": 1,
          "NumHeight": 1,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 1
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "States": {
        "4": {
          "GUID": "a22f79",
          "Name": "CardCustom",
          "Transform": {
            "posX": 37.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": 6.413342E-08,
            "rotY": 180.001556,
            "rotZ": 4.36440821E-08,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Freighter",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 1300,
          "SidewaysCard": false,
          "CustomDeck": {
            "13": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_freighter_orange.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_freighter_orange.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        "3": {
          "GUID": "14b32b",
          "Name": "CardCustom",
          "Transform": {
            "posX": 37.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": 6.413342E-08,
            "rotY": 180.001556,
            "rotZ": 4.36440821E-08,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Transport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 1600,
          "SidewaysCard": false,
          "CustomDeck": {
            "16": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_transport_orange.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_transport_orange.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        "2": {
          "GUID": "6f439d",
          "Name": "CardCustom",
          "Transform": {
            "posX": 37.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": 6.413342E-08,
            "rotY": 180.001556,
            "rotZ": 4.36440821E-08,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Clipper",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 1500,
          "SidewaysCard": false,
          "CustomDeck": {
            "15": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_clipper_orange.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_clipper_orange.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      }
    },
    {
      "GUID": "b3435d",
      "Name": "CardCustom",
      "Transform": {
        "posX": 12.5,
        "posY": 1.01360488,
        "posZ": -39.5,
        "rotX": -5.18423668E-08,
        "rotY": 180.001556,
        "rotZ": 1.38675382E-08,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "Scout",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "card",
        "green",
        "player"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": false,
      "CardID": 1800,
      "SidewaysCard": false,
      "CustomDeck": {
        "18": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_scout_green.jpg",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_scout_green.jpg",
          "NumWidth": 1,
          "NumHeight": 1,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 1
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "States": {
        "2": {
          "GUID": "6f439d",
          "Name": "CardCustom",
          "Transform": {
            "posX": 12.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": -5.18423668E-08,
            "rotY": 180.001556,
            "rotZ": 1.38675382E-08,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Clipper",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 1500,
          "SidewaysCard": false,
          "CustomDeck": {
            "15": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_clipper_green.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_clipper_green.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        "3": {
          "GUID": "14b32b",
          "Name": "CardCustom",
          "Transform": {
            "posX": 12.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": -5.18423668E-08,
            "rotY": 180.001556,
            "rotZ": 1.38675382E-08,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Transport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 1200,
          "SidewaysCard": false,
          "CustomDeck": {
            "12": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_transport_green.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_transport_green.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        "4": {
          "GUID": "a22f79",
          "Name": "CardCustom",
          "Transform": {
            "posX": 12.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": -5.18423668E-08,
            "rotY": 180.001556,
            "rotZ": 1.38675382E-08,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Freighter",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 1500,
          "SidewaysCard": false,
          "CustomDeck": {
            "15": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_freighter_green.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_freighter_green.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      }
    },
    {
      "GUID": "425839",
      "Name": "Die_6",
      "Transform": {
        "posX": -45.24993,
        "posY": 1.43011665,
        "posZ": -41.750206,
        "rotX": 90.0,
        "rotY": 0.0229418855,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "21e609",
      "Name": "Die_6",
      "Transform": {
        "posX": -45.74993,
        "posY": 1.430152,
        "posZ": -40.75009,
        "rotX": 90.0,
        "rotY": 0.0158912241,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "8d31fc",
      "Name": "Die_6",
      "Transform": {
        "posX": -46.24993,
        "posY": 1.43012536,
        "posZ": -41.750206,
        "rotX": 90.0,
        "rotY": 0.02398547,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "b5a396",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -46.9999657,
        "posY": 1.075,
        "posZ": -33.0,
        "rotX": 3.29887E-07,
        "rotY": 4.9499733E-05,
        "rotZ": -3.84682828E-08,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Yellow Factories",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "factory",
        "player",
        "yellow"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "445365",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -47.0,
            "posY": 2.61009145,
            "posZ": -33.0,
            "rotX": 1.59898082E-05,
            "rotY": 270.0,
            "rotZ": -0.00338153937,
            "scaleX": 0.375,
            "scaleY": 1.0,
            "scaleZ": 0.375
          },
          "Nickname": "Yellow Factory",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "factory",
            "player",
            "token",
            "yellow"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_factory_yellow.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "ee5c39",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -9.921749E-07,
            "posY": 6.166672,
            "posZ": -1.80630366E-07,
            "rotX": 9.2207556E-05,
            "rotY": 269.999939,
            "rotZ": 90.0000153,
            "scaleX": 2.533333,
            "scaleY": 0.6666667,
            "scaleZ": 0.25
          },
          "Nickname": "Yellow Factory",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "factory",
            "player",
            "token",
            "yellow"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_factory_yellow.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "cb80a1",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -27.0,
        "posY": 1.075,
        "posZ": -33.0,
        "rotX": -6.051719E-08,
        "rotY": 2.90178956E-08,
        "rotZ": -2.193476E-07,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Yellow Merchant Spaceports",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "player",
        "spaceport",
        "yellow"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "d4a675",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -27.0,
            "posY": 1.20475745,
            "posZ": -33.0,
            "rotX": -1.4927266E-06,
            "rotY": 89.99965,
            "rotZ": 5.3554345E-06,
            "scaleX": 0.375,
            "scaleY": 1.0,
            "scaleZ": 0.375
          },
          "Nickname": "Yellow Merchant Spaceport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "player",
            "spaceport",
            "token",
            "yellow"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_merchant_spaceport_yellow.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "eccf3c",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -2.90181723E-09,
            "posY": 6.171609,
            "posZ": -1.29546129E-09,
            "rotX": 0.0,
            "rotY": 89.999855,
            "rotZ": 270.0,
            "scaleX": 2.49999976,
            "scaleY": 0.6666667,
            "scaleZ": 0.25
          },
          "Nickname": "Yellow Merchant Spaceport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "player",
            "spaceport",
            "token",
            "yellow"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_merchant_spaceport_yellow.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "1a1669",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -2.0,
        "posY": 1.075,
        "posZ": -33.0,
        "rotX": 1.8711961E-07,
        "rotY": 2.08098336E-05,
        "rotZ": 2.58259973E-07,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Red Merchant Spaceports",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "player",
        "red",
        "spaceport"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "16d5be",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -17.5,
            "posY": 1.20605326,
            "posZ": -28.5,
            "rotX": -4.329405E-06,
            "rotY": 89.99991,
            "rotZ": 1.85621491E-06,
            "scaleX": 0.375,
            "scaleY": 1.0,
            "scaleZ": 0.375
          },
          "Nickname": "Red Merchant Spaceport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "player",
            "red",
            "spaceport",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_merchant_spaceport_red.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "c4f885",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -4.7041387E-05,
            "posY": 6.16666555,
            "posZ": 4.452398E-05,
            "rotX": 0.0,
            "rotY": 89.99998,
            "rotZ": 270.0,
            "scaleX": 2.533333,
            "scaleY": 0.6666667,
            "scaleZ": 0.25
          },
          "Nickname": "Red Merchant Spaceport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "player",
            "red",
            "spaceport",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_merchant_spaceport_red.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "26737d",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -22.0,
        "posY": 1.075,
        "posZ": -33.0,
        "rotX": 5.916751E-08,
        "rotY": -0.0008397739,
        "rotZ": 2.10967372E-07,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Red Factories",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "factory",
        "player",
        "red"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "50b7be",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -14.0,
            "posY": 1.20605206,
            "posZ": -27.0,
            "rotX": 3.33468847E-06,
            "rotY": 270.0008,
            "rotZ": 2.96957325E-07,
            "scaleX": 0.375,
            "scaleY": 1.0,
            "scaleZ": 0.375
          },
          "Nickname": "Red Factory",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "factory",
            "player",
            "red",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_factory_red.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "91b6a4",
          "Name": "Custom_Token",
          "Transform": {
            "posX": 9.540017E-06,
            "posY": 6.16666555,
            "posZ": -0.000209776452,
            "rotX": -5.122642E-06,
            "rotY": 270.000854,
            "rotZ": 90.0,
            "scaleX": 2.53333378,
            "scaleY": 0.666666746,
            "scaleZ": 0.25000003
          },
          "Nickname": "Red Factory",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "factory",
            "player",
            "red",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_factory_red.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "98b689",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 23.0,
        "posY": 1.075,
        "posZ": -33.0,
        "rotX": -7.871761E-08,
        "rotY": 3.32424088E-06,
        "rotZ": 2.5119553E-07,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Green Merchant Spaceports",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "green",
        "player",
        "spaceport"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "bc2d3f",
          "Name": "Custom_Token",
          "Transform": {
            "posX": 8.0,
            "posY": 1.2060349,
            "posZ": -28.0,
            "rotX": 4.70953546E-06,
            "rotY": 90.00017,
            "rotZ": -7.136589E-06,
            "scaleX": 0.375,
            "scaleY": 1.0,
            "scaleZ": 0.375
          },
          "Nickname": "Green Merchant Spaceport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "green",
            "player",
            "spaceport",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_merchant_spaceport_green.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "14fc4c",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -4.70511E-05,
            "posY": 6.16666555,
            "posZ": 4.452337E-05,
            "rotX": -3.41509462E-06,
            "rotY": 89.99951,
            "rotZ": 270.0,
            "scaleX": 2.533333,
            "scaleY": 0.6666667,
            "scaleZ": 0.25
          },
          "Nickname": "Green Merchant Spaceport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "green",
            "player",
            "spaceport",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_merchant_spaceport_green.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "e0811e",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 2.0,
        "posY": 1.075,
        "posZ": -33.0,
        "rotX": -1.12390715E-07,
        "rotY": -1.62425511E-06,
        "rotZ": 1.49963341E-07,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Green Factories",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "factory",
        "green",
        "player"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "50ad2d",
          "Name": "Custom_Token",
          "Transform": {
            "posX": 13.5,
            "posY": 1.20605278,
            "posZ": -27.5,
            "rotX": -5.86443139E-06,
            "rotY": 270.000549,
            "rotZ": 8.44000965E-07,
            "scaleX": 0.375,
            "scaleY": 1.0,
            "scaleZ": 0.375
          },
          "Nickname": "Green Factory",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "factory",
            "green",
            "player",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_factory_green.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "e728c1",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -4.703237E-05,
            "posY": 6.16666555,
            "posZ": 4.44950056E-05,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 90.0,
            "scaleX": 2.533333,
            "scaleY": 0.6666667,
            "scaleZ": 0.25
          },
          "Nickname": "Green Factory",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "factory",
            "green",
            "player",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_factory_green.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "30e2dd",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 47.0,
        "posY": 1.075,
        "posZ": -33.0,
        "rotX": -3.35754748E-08,
        "rotY": -2.26991524E-05,
        "rotZ": 4.828231E-07,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Orange Merchant Spaceports",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "orange",
        "player",
        "spaceport"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "2a97fd",
          "Name": "Custom_Token",
          "Transform": {
            "posX": 32.5,
            "posY": 1.206064,
            "posZ": -28.5,
            "rotX": 8.409644E-06,
            "rotY": 89.99885,
            "rotZ": -4.49347226E-06,
            "scaleX": 0.375,
            "scaleY": 1.0,
            "scaleZ": 0.375
          },
          "Nickname": "Orange Merchant Spaceport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "orange",
            "player",
            "spaceport",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_merchant_spaceport_orange.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "16411c",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -4.57950337E-05,
            "posY": 6.166665,
            "posZ": 4.445875E-05,
            "rotX": 8.537737E-06,
            "rotY": 90.00003,
            "rotZ": 270.0,
            "scaleX": 2.53333378,
            "scaleY": 0.666666865,
            "scaleZ": 0.2500001
          },
          "Nickname": "Orange Merchant Spaceport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "orange",
            "player",
            "spaceport",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_merchant_spaceport_orange.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "e78406",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 27.0,
        "posY": 1.075,
        "posZ": -33.0,
        "rotX": -2.91711579E-08,
        "rotY": 6.461684E-05,
        "rotZ": 2.555999E-07,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Orange Factories",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "factory",
        "orange",
        "player"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "040934",
          "Name": "Custom_Token",
          "Transform": {
            "posX": 37.5,
            "posY": 1.204616,
            "posZ": -28.5,
            "rotX": -1.32876232E-06,
            "rotY": 270.00058,
            "rotZ": 3.00398E-06,
            "scaleX": 0.375,
            "scaleY": 1.0,
            "scaleZ": 0.375
          },
          "Nickname": "Orange Factory",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "factory",
            "orange",
            "player",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_factory_orange.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "e9b12b",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -4.581156E-05,
            "posY": 6.16666555,
            "posZ": 4.45111618E-05,
            "rotX": 1.70754731E-06,
            "rotY": 269.999939,
            "rotZ": 90.0,
            "scaleX": 2.49999976,
            "scaleY": 0.6666667,
            "scaleZ": 0.25
          },
          "Nickname": "Orange Factory",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Tags": [
            "factory",
            "orange",
            "player",
            "token"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_chit_factory_orange.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "beed72",
      "Name": "Die_6",
      "Transform": {
        "posX": -44.25,
        "posY": 1.3302002,
        "posZ": -37.25,
        "rotX": 90.0,
        "rotY": 0.503221154,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "b7cdb5",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 5.53736754E-07,
        "posY": 2.25000286,
        "posZ": 29.0,
        "rotX": -6.71628277E-06,
        "rotY": -0.0008144892,
        "rotZ": 3.08955737E-06,
        "scaleX": 2.5,
        "scaleY": 2.5,
        "scaleZ": 2.5
      },
      "Nickname": "Shields",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "c02bd9",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -12.5000534,
            "posY": 6.500861,
            "posZ": 24.5008526,
            "rotX": 357.669617,
            "rotY": 179.989365,
            "rotZ": -0.00263348338,
            "scaleX": 1.25,
            "scaleY": 1.0,
            "scaleZ": 1.25
          },
          "Nickname": "Shield",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_shield.png",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_shield.png",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 3,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "c02bd9",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -0.0006510511,
            "posY": 1.18954372,
            "posZ": 0.00146934949,
            "rotX": 89.91153,
            "rotY": 179.9361,
            "rotZ": 0.0,
            "scaleX": 0.5,
            "scaleY": 0.399999976,
            "scaleZ": 0.49999994
          },
          "Nickname": "Shield",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_shield.png",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_shield.png",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 3,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "594d40",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -1.31849083E-06,
        "posY": 1.75000119,
        "posZ": 26.9999256,
        "rotX": 5.76267048E-05,
        "rotY": 1.6994527E-05,
        "rotZ": -1.05830613E-05,
        "scaleX": 2.5,
        "scaleY": 1.5,
        "scaleZ": 0.5
      },
      "Nickname": "Combo Drives",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "74d72d",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -14.4999428,
            "posY": 2.58631158,
            "posZ": 24.4999485,
            "rotX": 354.984222,
            "rotY": 179.9974,
            "rotZ": 180.000214,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Combo Drive",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_drive_combo.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "74d72d",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -0.0007305744,
            "posY": 1.13637567,
            "posZ": 0.004139124,
            "rotX": 89.91153,
            "rotY": 179.935867,
            "rotZ": 0.0,
            "scaleX": 0.2000001,
            "scaleY": 1.99999392,
            "scaleZ": 0.333333433
          },
          "Nickname": "Combo Drive",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_drive_combo.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "0b1d03",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -2.99947286,
        "posY": 1.75000131,
        "posZ": 27.9998169,
        "rotX": 6.223857E-05,
        "rotY": 45.0000038,
        "rotZ": -1.02552649E-05,
        "scaleX": 2.5,
        "scaleY": 1.5,
        "scaleZ": 0.5
      },
      "Nickname": "Yellow Drives",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "7b6894",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -17.9999161,
            "posY": 2.61081815,
            "posZ": 23.9999046,
            "rotX": -7.792709E-05,
            "rotY": 179.997375,
            "rotZ": -1.03930388E-05,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Yellow Drive",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_drive_yellow.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "d13928",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -0.00072879513,
            "posY": 1.13423169,
            "posZ": 0.004124454,
            "rotX": 89.91153,
            "rotY": 179.935944,
            "rotZ": 0.0,
            "scaleX": 0.2000001,
            "scaleY": 1.99999392,
            "scaleZ": 0.333333433
          },
          "Nickname": "Yellow Drive",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_drive_yellow.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "6d647d",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 3.000569,
        "posY": 1.75000024,
        "posZ": 27.99994,
        "rotX": 2.74706381E-05,
        "rotY": 315.0,
        "rotZ": -7.59261275E-06,
        "scaleX": 2.5,
        "scaleY": 1.5,
        "scaleZ": 0.5
      },
      "Nickname": "Red Drives",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "d13928",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -21.499939,
            "posY": 2.59198618,
            "posZ": 24.4999237,
            "rotX": 354.800568,
            "rotY": 179.997284,
            "rotZ": 0.000187709928,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Red Drive",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_drive_red.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "a9648b",
          "Name": "Custom_Token",
          "Transform": {
            "posX": -0.0003384597,
            "posY": 1.13352787,
            "posZ": 0.0019379023,
            "rotX": 89.91153,
            "rotY": 179.935944,
            "rotZ": 0.0,
            "scaleX": 0.2000001,
            "scaleY": 1.99999392,
            "scaleZ": 0.333333433
          },
          "Nickname": "Red Drive",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/equipment/equipment_drive_red.png",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomToken": {
              "Thickness": 0.1,
              "MergeDistancePixels": 15.0,
              "StandUp": false,
              "Stackable": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "f6a761",
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": 42.5,
        "posY": 2.250002,
        "posZ": 28.5,
        "rotX": -3.4769515E-10,
        "rotY": 0.002633676,
        "rotZ": 1.34155925E-07,
        "scaleX": 2.5,
        "scaleY": 2.5,
        "scaleZ": 2.5
      },
      "Nickname": "Draw Bag Items",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "event"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 6,
        "CastShadows": true
      },
      "Bag": {
        "Order": 2
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ChildObjects": [
        {
          "GUID": "fa466c",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -3.239729E-09,
            "posY": 1.2,
            "posZ": -1.79120574E-09,
            "rotX": 90.0,
            "rotY": 179.997375,
            "rotZ": 0.0,
            "scaleX": 0.5,
            "scaleY": 0.4,
            "scaleZ": 0.5
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 3,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "55db5c",
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": -43.50057,
        "posY": 2.24999976,
        "posZ": 28.5006065,
        "rotX": -3.19369946E-07,
        "rotY": 135.000076,
        "rotZ": -2.92024538E-09,
        "scaleX": 1.5,
        "scaleY": 2.5,
        "scaleZ": 1.5
      },
      "Nickname": "Encounters",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "encounter"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 6,
        "CastShadows": true
      },
      "Bag": {
        "Order": 2
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ChildObjects": [
        {
          "GUID": "40a26a",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -2.15421132E-05,
            "posY": 0.89999944,
            "posZ": 0.0005934827,
            "rotX": 90.0,
            "rotY": 44.9999352,
            "rotZ": 0.0,
            "scaleX": 0.5000001,
            "scaleY": 0.6666667,
            "scaleZ": 0.300000072
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3607843,
            "g": 0.3607843,
            "b": 0.3607843
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "cf939c",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 9.5,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": 0.0701175258,
        "rotY": 180.02684,
        "rotZ": 0.0615200065,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Bionic Perfume: +60 at 04",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c04",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_bionic_perfume_60_to_04.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "a91ada",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 12.25,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": 0.07007225,
        "rotY": 179.9967,
        "rotZ": 0.06141604,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Bionic Perfume: +60 at 04",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c04",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_bionic_perfume_60_to_04.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "c1d3e0",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 15.0,
        "posY": 1.49075449,
        "posZ": 44.5,
        "rotX": 0.07010025,
        "rotY": 180.025375,
        "rotZ": 0.06153834,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Bionic Perfume: +60 at 05",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c05",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_bionic_perfume_60_to_05.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "3325ea",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 17.75,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": 0.07005862,
        "rotY": 180.019,
        "rotZ": 0.0614490323,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Canned Traits: +60 at 04",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c04",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_canned_traits_60_to_04.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "4bbcc8",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 20.5,
        "posY": 1.49075449,
        "posZ": 44.5,
        "rotX": 2.35910943E-06,
        "rotY": 179.995636,
        "rotZ": -1.40848015E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Chicle Liquor: +60 at 11",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c11",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_chicle_liquor_60_to_11.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "9d8da9",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 23.25,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": -1.4506466E-05,
        "rotY": 179.98761,
        "rotZ": -1.44667856E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Chicle Liquor: +60 at 12",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c12",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_chicle_liquor_60_to_12.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "f1808f",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 26.0,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": -1.69799375E-08,
        "rotY": 180.012329,
        "rotZ": -1.34568893E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Chicle Liquor: +60 at 12",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c12",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_chicle_liquor_60_to_12.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "6eea8c",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 28.75,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": -8.1978493E-07,
        "rotY": 180.01239,
        "rotZ": 4.7756123E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Designer Genes: +40 at 02",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c02",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_designer_genes_40_to_02.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "f40ad2",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 31.5,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": -3.97086078E-05,
        "rotY": 180.02887,
        "rotZ": -1.37463394E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Designer Genes: +40 at 02",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c02",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_designer_genes_40_to_02.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "49ac29",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 34.25,
        "posY": 1.49075449,
        "posZ": 44.5,
        "rotX": -1.09376024E-05,
        "rotY": 180.005447,
        "rotZ": 9.36814E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Designer Genes: +60 at 14",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c14",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_designer_genes_60_to_14.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "ee7588",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 37.0,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": -2.452397E-05,
        "rotY": 179.977112,
        "rotZ": 2.026527E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Designer Genes: +60 at 14",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c14",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_designer_genes_60_to_14.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "ea05fd",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 39.75,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": -1.3252004E-06,
        "rotY": 179.975937,
        "rotZ": 1.11926249E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Finest Dust: +50 at 06",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c06",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_finest_dust_50_to_06.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "61f85a",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 42.5,
        "posY": 1.496917,
        "posZ": 44.5,
        "rotX": 2.02403527E-07,
        "rotY": 180.007431,
        "rotZ": 5.811112E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Finest Dust: +50 at 06",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c06",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_finest_dust_50_to_06.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "95b0f9",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 9.5,
        "posY": 1.496917,
        "posZ": 40.75,
        "rotX": -1.50685719E-05,
        "rotY": 179.98764,
        "rotZ": 1.09331941E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Finest Dust: +50 at 07",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c07",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_finest_dust_50_to_07.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "a1b393",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 12.25,
        "posY": 1.49075449,
        "posZ": 40.75,
        "rotX": -3.79855663E-07,
        "rotY": 180.000122,
        "rotZ": -6.89401531E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Finest Dust: +50 at 07",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c07",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_finest_dust_50_to_07.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "40ba73",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 15.0,
        "posY": 1.496917,
        "posZ": 40.75,
        "rotX": -1.77423817E-06,
        "rotY": 180.003876,
        "rotZ": -1.08615177E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Finest Dust: +50 at 09",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c09",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 5,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_finest_dust_50_to_09.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "abe035",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 17.75,
        "posY": 1.49075449,
        "posZ": 40.75,
        "rotX": -1.37022862E-05,
        "rotY": 180.015259,
        "rotZ": 7.722199E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Finest Dust: +50 at 09",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c09",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 6,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_finest_dust_50_to_09.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "204c74",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 20.5,
        "posY": 1.496917,
        "posZ": 40.75,
        "rotX": -3.662664E-06,
        "rotY": 179.999,
        "rotZ": -3.207865E-08,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Finest Dust: +50 at 09",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c09",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 7,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_finest_dust_50_to_09.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "fc8304",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 23.25,
        "posY": 1.49075449,
        "posZ": 40.75,
        "rotX": -4.57436636E-06,
        "rotY": 179.99968,
        "rotZ": -2.45003253E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Glorious Junk: +40 at 06",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c06",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_glorious_junk_40_to_06.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "5fd5fd",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 26.0,
        "posY": 1.496917,
        "posZ": 40.75,
        "rotX": -6.303555E-06,
        "rotY": 180.000916,
        "rotZ": -1.90050912E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Glorious Junk: +40 at 06",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c06",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_glorious_junk_40_to_06.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "652207",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 28.75,
        "posY": 1.49075449,
        "posZ": 40.75,
        "rotX": -1.0584223E-06,
        "rotY": 180.002884,
        "rotZ": -1.9610313E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Glorious Junk: +40 at 06",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c06",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_glorious_junk_40_to_06.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "db6918",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 31.5,
        "posY": 1.496917,
        "posZ": 40.75,
        "rotX": 3.297866E-06,
        "rotY": 179.998856,
        "rotZ": -3.535862E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Glorious Junk: +40 at 06",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c06",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_glorious_junk_40_to_06.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "9bb95b",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 34.25,
        "posY": 1.49075449,
        "posZ": 40.75,
        "rotX": -1.160655E-06,
        "rotY": 180.001465,
        "rotZ": -9.692367E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Glorious Junk: +60 at 04",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c04",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 6,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_glorious_junk_60_to_04.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "6f0c3e",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 37.0,
        "posY": 1.496917,
        "posZ": 40.75,
        "rotX": -5.20323169E-07,
        "rotY": 180.001282,
        "rotZ": 1.2146013E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Glorious Junk: +60 at 04",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c04",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 5,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_glorious_junk_60_to_04.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "2951aa",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 39.75,
        "posY": 1.496917,
        "posZ": 40.75,
        "rotX": -5.130325E-06,
        "rotY": 180.002518,
        "rotZ": -5.18717229E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Immortal Grease: +50 at 10",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c10",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_immortal_grease_50_to_10.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "63a9e0",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 42.5,
        "posY": 1.496917,
        "posZ": 40.75,
        "rotX": -3.95378356E-06,
        "rotY": 179.998276,
        "rotZ": -1.49268578E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Immortal Grease: +50 at 10",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c10",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_immortal_grease_50_to_10.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "052e8c",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 9.5,
        "posY": 1.496917,
        "posZ": 37.0,
        "rotX": -9.706471E-06,
        "rotY": 180.004929,
        "rotZ": -2.03635E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Immortal Grease: +50 at 10",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c10",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_immortal_grease_50_to_10.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "0435f6",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 12.25,
        "posY": 1.496917,
        "posZ": 37.0,
        "rotX": -1.45695358E-05,
        "rotY": 179.995911,
        "rotZ": -1.74511774E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Immortal Grease: +50 at 12",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c12",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_immortal_grease_50_to_12.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "c17895",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 15.0,
        "posY": 1.496917,
        "posZ": 37.0,
        "rotX": 2.59104613E-08,
        "rotY": 180.000061,
        "rotZ": 1.14650412E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Immortal Grease: +50 at 12",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c12",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 5,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_immortal_grease_50_to_12.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "0de6d1",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 17.75,
        "posY": 1.49075449,
        "posZ": 37.0,
        "rotX": -5.213421E-06,
        "rotY": 180.001389,
        "rotZ": -4.474641E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Impossible Furniture: +70 at 13",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c13",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_impossible_furniture_70_to_13.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "afbc91",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 20.5,
        "posY": 1.496917,
        "posZ": 37.0,
        "rotX": -1.80908282E-05,
        "rotY": 180.002274,
        "rotZ": 3.26229383E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Living Toys: +40 at 07",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c07",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_living_toys_40_to_07.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "68a9c3",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 23.25,
        "posY": 1.496917,
        "posZ": 37.0,
        "rotX": -4.19052526E-07,
        "rotY": 179.999939,
        "rotZ": -2.669663E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Living Toys: +40 at 07",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c07",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_living_toys_40_to_07.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "a45d73",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 26.0,
        "posY": 1.49075449,
        "posZ": 37.0,
        "rotX": 6.46183054E-08,
        "rotY": 179.999161,
        "rotZ": -3.67711181E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Living Toys: +40 at 07",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c07",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_living_toys_40_to_07.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "428343",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 28.75,
        "posY": 1.496917,
        "posZ": 37.0,
        "rotX": -5.57239728E-05,
        "rotY": 179.994263,
        "rotZ": -9.429186E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Living Toys: +60 at 05",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c05",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_living_toys_60_to_05.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "8acc5b",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 31.5,
        "posY": 1.496917,
        "posZ": 37.0,
        "rotX": -3.773445E-07,
        "rotY": 180.002441,
        "rotZ": -8.41640428E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Living Toys: +60 at 05",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c05",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 5,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_living_toys_60_to_05.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "cc9086",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 34.25,
        "posY": 1.49075449,
        "posZ": 37.0,
        "rotX": -1.8836201E-05,
        "rotY": 180.001541,
        "rotZ": -9.077965E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Melf Pelts: +50 at 08",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c08",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_melf_pelts_50_to_08.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "933291",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 37.0,
        "posY": 1.49075449,
        "posZ": 37.0,
        "rotX": 1.07150154E-05,
        "rotY": 179.997543,
        "rotZ": -4.942121E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Demand - Psychotic Sculpture: +90 at 03",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c03",
        "demand",
        "event",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_demand_psychotic_sculpture_90_to_03.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "02d550",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 39.75,
        "posY": 1.496917,
        "posZ": 37.0,
        "rotX": 1.22908364E-06,
        "rotY": 179.974365,
        "rotZ": -5.16354532E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Ambassador",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c13",
        "event",
        "expansion",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 14,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_expansion_ambassador.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "daa476",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 42.5,
        "posY": 1.49075449,
        "posZ": 37.0,
        "rotX": 5.31646856E-06,
        "rotY": 179.997116,
        "rotZ": 2.03170184E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Arms Dealer",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c03",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 10,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_arms_dealer.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "93cef7",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 9.5,
        "posY": 1.49075449,
        "posZ": 33.25,
        "rotX": -1.09154153E-05,
        "rotY": 180.011124,
        "rotZ": -2.679385E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Caterer",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c00",
        "event",
        "expansion",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 5,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_expansion_caterer.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "86bbe1",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 12.25,
        "posY": 1.496917,
        "posZ": 33.25,
        "rotX": 3.29827744E-05,
        "rotY": 180.018982,
        "rotZ": -4.90559869E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Census Taker",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c00",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_census_taker.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "fdeaa0",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 15.0,
        "posY": 1.496917,
        "posZ": 33.25,
        "rotX": 6.54727842E-07,
        "rotY": 179.996384,
        "rotZ": -3.00442E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Diva",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c06",
        "event",
        "expansion",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 6,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_expansion_diva.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "ed74b4",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 17.75,
        "posY": 1.496917,
        "posZ": 33.25,
        "rotX": 0.04334359,
        "rotY": 180.0,
        "rotZ": 0.03320826,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Invader",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c07",
        "event",
        "expansion",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_expansion_invader.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "6eee31",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 20.5,
        "posY": 1.49075449,
        "posZ": 33.25,
        "rotX": -7.125478E-06,
        "rotY": 180.002045,
        "rotZ": -1.50065252E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Optometrist",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c05",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 15,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_optometrist.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "b2f27a",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 23.25,
        "posY": 1.496917,
        "posZ": 33.25,
        "rotX": -1.17117384E-06,
        "rotY": 180.005234,
        "rotZ": -1.10341512E-06,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Philosopher",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c00",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 11,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_philosopher.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "034730",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 26.0,
        "posY": 1.496917,
        "posZ": 33.25,
        "rotX": 1.90981918E-05,
        "rotY": 180.023315,
        "rotZ": -5.46859628E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Politician",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c04",
        "event",
        "expansion",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_expansion_politician.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "bd91a3",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 28.75,
        "posY": 1.496917,
        "posZ": 33.25,
        "rotX": 2.2423239E-05,
        "rotY": 179.996964,
        "rotZ": -6.91673849E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Salesman",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c09",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 9,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_salesman.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "9aafc8",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 31.5,
        "posY": 1.49075449,
        "posZ": 33.25,
        "rotX": -6.303179E-05,
        "rotY": 179.977051,
        "rotZ": -6.80048543E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Scientist",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c08",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 7,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_scientist.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "ba0385",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 34.25,
        "posY": 1.496917,
        "posZ": 33.25,
        "rotX": 1.8415838E-05,
        "rotY": 180.026978,
        "rotZ": -4.77224748E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Specimen",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c00",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_specimen.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "b55add",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 37.0,
        "posY": 1.496917,
        "posZ": 33.25,
        "rotX": 1.15161117E-06,
        "rotY": 179.995255,
        "rotZ": -4.95856E-07,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Spy",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c07",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 8,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_spy.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "25ffa3",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 39.75,
        "posY": 1.496917,
        "posZ": 33.25,
        "rotX": -2.00501313E-06,
        "rotY": 179.987869,
        "rotZ": -1.029137E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Tax Collector",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c00",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 12,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_tax_collector.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "67439f",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 42.5,
        "posY": 1.49075449,
        "posZ": 33.25,
        "rotX": 2.32629668E-06,
        "rotY": 179.999481,
        "rotZ": 1.01441792E-05,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Passenger - Toaster",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c10",
        "event",
        "original",
        "passenger",
        "token"
      ],
      "LayoutGroupSortIndex": 13,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_passenger_original_toaster.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/events/event_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "2eb919",
      "Name": "Card",
      "Transform": {
        "posX": -44.0,
        "posY": 1.49075449,
        "posZ": 44.0,
        "rotX": 0.06955078,
        "rotY": 180.000061,
        "rotZ": 0.0146465842,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 01 - Nillis",
      "Description": "These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c01",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 1600,
      "SidewaysCard": false,
      "CustomDeck": {
        "16": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 01 - Nillis.2eb919.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 01 - Nillis.2eb919.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 01 - Nillis.2eb919.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "4172e1",
      "Name": "Card",
      "Transform": {
        "posX": -40.25,
        "posY": 1.49075449,
        "posZ": 44.0,
        "rotX": 0.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 02 - Volois",
      "Description": "These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c02",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 301,
      "SidewaysCard": false,
      "CustomDeck": {
        "3": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 02 - Volois.4172e1.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 02 - Volois.4172e1.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 02 - Volois.4172e1.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "d2119d",
      "Name": "Card",
      "Transform": {
        "posX": -36.5,
        "posY": 1.49075449,
        "posZ": 44.0,
        "rotX": 0.0700702742,
        "rotY": 179.999985,
        "rotZ": 0.0614220649,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 03 - Graw",
      "Description": "These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c03",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 402,
      "SidewaysCard": false,
      "CustomDeck": {
        "4": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 03 - Graw.d2119d.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 03 - Graw.d2119d.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 03 - Graw.d2119d.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "b9c843",
      "Name": "Card",
      "Transform": {
        "posX": -32.75,
        "posY": 1.49075449,
        "posZ": 44.0,
        "rotX": 0.06974916,
        "rotY": 180.000092,
        "rotZ": 0.0116693228,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 04 - Niks",
      "Description": "Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c04",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 503,
      "SidewaysCard": false,
      "CustomDeck": {
        "5": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 04 - Niks.b9c843.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 04 - Niks.b9c843.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 04 - Niks.b9c843.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "770aae",
      "Name": "Card",
      "Transform": {
        "posX": -29.0,
        "posY": 1.496917,
        "posZ": 44.0,
        "rotX": 0.07007193,
        "rotY": 180.000015,
        "rotZ": 0.0614220053,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 05 - Dell",
      "Description": "The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c05",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 604,
      "SidewaysCard": false,
      "CustomDeck": {
        "6": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 05 - Dell.770aae.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 05 - Dell.770aae.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 05 - Dell.770aae.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "dabbf8",
      "Name": "Card",
      "Transform": {
        "posX": -44.0,
        "posY": 1.496917,
        "posZ": 38.75,
        "rotX": 0.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 06 - Humans",
      "Description": "Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c06",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 705,
      "SidewaysCard": false,
      "CustomDeck": {
        "7": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 06 - Humans.dabbf8.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 06 - Humans.dabbf8.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 06 - Humans.dabbf8.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "dac0e2",
      "Name": "Card",
      "Transform": {
        "posX": -40.25,
        "posY": 1.49075449,
        "posZ": 38.75,
        "rotX": 0.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 07 - Shenna",
      "Description": "These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c07",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 806,
      "SidewaysCard": false,
      "CustomDeck": {
        "8": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 07 - Shenna.dac0e2.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 07 - Shenna.dac0e2.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 07 - Shenna.dac0e2.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "b019ff",
      "Name": "Card",
      "Transform": {
        "posX": -36.5,
        "posY": 1.49075449,
        "posZ": 38.75,
        "rotX": -2.43172565E-07,
        "rotY": 180.0,
        "rotZ": -4.39095942E-07,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 08 - Yxklyx",
      "Description": "These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c08",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 907,
      "SidewaysCard": false,
      "CustomDeck": {
        "9": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 08 - Yxklyx.b019ff.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 08 - Yxklyx.b019ff.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 08 - Yxklyx.b019ff.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "7cb6c1",
      "Name": "Card",
      "Transform": {
        "posX": -32.75,
        "posY": 1.496917,
        "posZ": 38.75,
        "rotX": 2.82328415E-07,
        "rotY": 180.0,
        "rotZ": -1.67228535E-07,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 09 - Zum",
      "Description": "Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c09",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 1008,
      "SidewaysCard": false,
      "CustomDeck": {
        "10": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 09 - Zum.7cb6c1.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 09 - Zum.7cb6c1.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 09 - Zum.7cb6c1.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "9d6127",
      "Name": "Card",
      "Transform": {
        "posX": -29.0,
        "posY": 1.496917,
        "posZ": 38.75,
        "rotX": 0.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 10 - Eeepeeep",
      "Description": "The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c10",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 1109,
      "SidewaysCard": false,
      "CustomDeck": {
        "11": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 10 - Eeepeeep.9d6127.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 10 - Eeepeeep.9d6127.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 10 - Eeepeeep.9d6127.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "06a41f",
      "Name": "Card",
      "Transform": {
        "posX": -44.0,
        "posY": 1.496917,
        "posZ": 33.5,
        "rotX": 0.0700727552,
        "rotY": 180.000015,
        "rotZ": 0.0614223443,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 11 - Whynom",
      "Description": "These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c11",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 1210,
      "SidewaysCard": false,
      "CustomDeck": {
        "12": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 11 - Whynom.06a41f.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 11 - Whynom.06a41f.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 11 - Whynom.06a41f.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "d43e9d",
      "Name": "Card",
      "Transform": {
        "posX": -40.25,
        "posY": 1.496917,
        "posZ": 33.5,
        "rotX": 0.0700702742,
        "rotY": 180.000031,
        "rotZ": 0.06142225,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 12 - Cholos",
      "Description": "These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c12",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 1311,
      "SidewaysCard": false,
      "CustomDeck": {
        "13": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 12 - Cholos.d43e9d.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 12 - Cholos.d43e9d.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 12 - Cholos.d43e9d.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "004f0a",
      "Name": "Card",
      "Transform": {
        "posX": -36.5,
        "posY": 1.496917,
        "posZ": 33.5,
        "rotX": 0.0700702742,
        "rotY": 180.000046,
        "rotZ": 0.06142252,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 13 - Wollow",
      "Description": "These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c13",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 1412,
      "SidewaysCard": false,
      "CustomDeck": {
        "14": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 13 - Wollow.004f0a.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 13 - Wollow.004f0a.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 13 - Wollow.004f0a.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "429ca0",
      "Name": "Card",
      "Transform": {
        "posX": -32.75,
        "posY": 1.49075449,
        "posZ": 33.5,
        "rotX": 0.07007085,
        "rotY": 180.0,
        "rotZ": 0.06142308,
        "scaleX": 1.625,
        "scaleY": 1.0,
        "scaleZ": 1.625
      },
      "Nickname": "Culture 14 - Qossuth",
      "Description": "Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "c14",
        "card",
        "culture"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": true,
      "CardID": 1513,
      "SidewaysCard": false,
      "CustomDeck": {
        "15": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_deck.png",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/cards/culture_card_back.jpg",
          "NumWidth": 5,
          "NumHeight": 3,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 0
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 14 - Qossuth.429ca0.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 14 - Qossuth.429ca0.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/card\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/card\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\nlocal cultureData = require(\"data/data\").cultures\r\n\r\n--- Get the scripting zone for this card's system\r\n---@return table\r\nlocal function getSystem()\r\n  local systemZones = table.filter(getObjects(), function(obj)\r\n    return obj.hasTag('system') and obj.hasTag('zone')\r\n  end)\r\n\r\n  ---@type table\r\n  local systemZone = table.find(systemZones, function(zone) return table.includes(zone.getObjects(), self) end)\r\n\r\n  return systemZone\r\nend\r\n\r\n--- Get the tagName for this card's culture (eg 'C09')\r\n---@return string\r\nlocal function getCultureTag()\r\n  return table.find(constants.CULTURE_TAGS, function(cultureTag) return self.hasTag(cultureTag) end)\r\nend\r\n\r\n--- Get the tagName for this card's system (eg 'S05')\r\n---@param system table\r\n---@return string\r\nlocal function getSystemTag(system)\r\n  return table.find(constants.SYSTEM_TAGS, function(systemTag) return system.hasTag(systemTag) end)\r\nend\r\n\r\n--- Deals the Goods, Factory Deed, and Culture Token for a given culture to a given system.\r\n---@param cultureTag string\r\n---@param systemTag string\r\nlocal function dealCultureTokensToSystem(cultureTag, systemTag)\r\n  if (systemTag == nil) then return end\r\n\r\n  local cultureTokens = getObjectsWithAllTags({ cultureTag, 'token' })\r\n  local systemSnaps = table.filter(Global.getSnapPoints(), function(snap) return tagHelpers.snapHasTag(snap, systemTag) end)\r\n  local cultureSnaps = table.filter(systemSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'culture') end)\r\n\r\n  local cultureDetailsToken = table.find(cultureTokens, function(obj) return obj.hasTag('details') end)\r\n  local cultureDetailsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasTag(snap, 'details') end)\r\n\r\n  local normalGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('normal') and obj.hasTag('good') end)\r\n  local normalGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'normal', 'good'}) end)\r\n\r\n  local factoryGoodsToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('good') end)\r\n  local factoryGoodsSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'good'}) end)\r\n\r\n  local factoryDeedToken = table.find(cultureTokens, function(obj) return obj.hasTag('factory') and obj.hasTag('deed') end)\r\n  local factoryDeedSnap = table.find(cultureSnaps, function(snap) return tagHelpers.snapHasAllTags(snap, {'factory', 'deed'}) end)\r\n\r\n  interactions.dealObjectToSnap(cultureDetailsToken, cultureDetailsSnap)\r\n  interactions.dealObjectToSnap(normalGoodsToken, normalGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryGoodsToken, factoryGoodsSnap)\r\n  interactions.dealObjectToSnap(factoryDeedToken, factoryDeedSnap)\r\nend\r\n\r\n---@param player table\r\nlocal function discover(player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  local systemZone = getSystem()\r\n  if (systemZone == nil) then return end\r\n\r\n  local systemTag = getSystemTag(systemZone)\r\n  local cultureTag = getCultureTag()\r\n\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n  local cardData = table.find(cultureData, function (data) return data.id == cultureId end)\r\n  self.setVar('iou', cardData.iou)\r\n\r\n  self.UI.hide('discoverButton')\r\n  self.deal(1, player.color)\r\n\r\n  dealCultureTokensToSystem(cultureTag, systemTag)\r\nend\r\n\r\n--- Called from a button in the XML UI. Cannot be `local` function.\r\nfunction handleDiscoverClick(player)\r\n  discover(player)\r\nend\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Culture 14 - Qossuth.429ca0.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/card.xml -->\n  <!-- colors: normal, highlighted, pressed, disabled -->\r\n  <Defaults>\r\n    <Button\r\n      fontSize=\"24\"\r\n      textColor=\"#FFFFFF\"\r\n      colors=\"#333333|#999999|#666666|rgba(0.78,0.78,0.78,0.5)\"\r\n      fontStyle=\"bold\"\r\n    />\r\n  </Defaults>\r\n\r\n  <Button\r\n    id=\"discoverButton\"\r\n    onClick=\"handleDiscoverClick\"\r\n    width=\"375\"\r\n    height=\"48\"\r\n    position=\"0 0 -100\"\r\n    rotation=\"0 0 180\"\r\n    scale=\"0.5 0.5\"\r\n  >\r\n    Discover This Culture\r\n  </Button>\r\n\n<!-- include lua/components/cultures/card.xml -->"
    },
    {
      "GUID": "2c5e14",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -25.5,
        "posY": 1.496917,
        "posZ": 45.0,
        "rotX": 0.07007505,
        "rotY": 180.000122,
        "rotZ": 0.0614246055,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Blue 10",
      "Description": "",
      "GMNotes": "Hazard - Blue 10",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.16377759,
        "b": 0.311841
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 7,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_blue_10.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Blue 10.2c5e14.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Blue 10.2c5e14.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Blue 10.2c5e14.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "a65899",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -22.75,
        "posY": 1.496917,
        "posZ": 45.0,
        "rotX": 0.07007645,
        "rotY": 180.000626,
        "rotZ": 0.061423637,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Blue 10",
      "Description": "",
      "GMNotes": "Hazard - Blue 10",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.16377759,
        "b": 0.311841
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_blue_10.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Blue 10.a65899.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Blue 10.a65899.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Blue 10.a65899.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "8b0985",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -20.0,
        "posY": 1.49075449,
        "posZ": 45.0,
        "rotX": 0.07007645,
        "rotY": 179.999954,
        "rotZ": 0.06142443,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Blue 20",
      "Description": "",
      "GMNotes": "Hazard - Blue 20",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.16377762,
        "b": 0.311841041
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 6,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_blue_20.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Blue 20.8b0985.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Blue 20.8b0985.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Blue 20.8b0985.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "f49bfe",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -17.25,
        "posY": 1.49691689,
        "posZ": 45.0,
        "rotX": 0.0700784251,
        "rotY": 179.989365,
        "rotZ": 0.0614153743,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Blue 20",
      "Description": "",
      "GMNotes": "Hazard - Blue 20",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.16377762,
        "b": 0.311841041
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_blue_20.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Blue 20.f49bfe.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Blue 20.f49bfe.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Blue 20.f49bfe.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "d07631",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -14.5,
        "posY": 1.49075449,
        "posZ": 45.0,
        "rotX": 0.0700784251,
        "rotY": 180.000122,
        "rotZ": 0.0614174567,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Blue 30",
      "Description": "",
      "GMNotes": "Hazard - Blue 30",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777709,
        "b": 0.31184113
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 5,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_blue_30.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Blue 30.d07631.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Blue 30.d07631.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Blue 30.d07631.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "f83a56",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -11.75,
        "posY": 1.496917,
        "posZ": 45.0,
        "rotX": 0.07007638,
        "rotY": 180.000015,
        "rotZ": 0.06142555,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Blue 30",
      "Description": "",
      "GMNotes": "Hazard - Blue 30",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777709,
        "b": 0.31184113
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_blue_30.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Blue 30.f83a56.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Blue 30.f83a56.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Blue 30.f83a56.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "c56234",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -9.0,
        "posY": 1.496917,
        "posZ": 45.0,
        "rotX": 0.04066656,
        "rotY": 179.999222,
        "rotZ": 0.07744816,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Blue 40",
      "Description": "",
      "GMNotes": "Hazard - Blue 40",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777769,
        "b": 0.31184122
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_blue_40.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Blue 40.c56234.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Blue 40.c56234.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Blue 40.c56234.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "576e5d",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -25.5,
        "posY": 1.49075449,
        "posZ": 42.0,
        "rotX": 3.31742958E-05,
        "rotY": 179.990372,
        "rotZ": -2.935968E-05,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Red 10",
      "Description": "",
      "GMNotes": "Hazard - Red 10",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777769,
        "b": 0.31184122
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_red_10.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Red 10.576e5d.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Red 10.576e5d.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Red 10.576e5d.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "f62067",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -22.75,
        "posY": 1.496917,
        "posZ": 42.0,
        "rotX": 0.07007645,
        "rotY": 179.999954,
        "rotZ": 0.06142388,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Red 20",
      "Description": "",
      "GMNotes": "Hazard - Red 20",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777649,
        "b": 0.311841071
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 5,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_red_20.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Red 20.f62067.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Red 20.f62067.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Red 20.f62067.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "1d5475",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -20.0,
        "posY": 1.496917,
        "posZ": 42.0,
        "rotX": 0.07007715,
        "rotY": 180.000122,
        "rotZ": 0.0614264943,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Red 20",
      "Description": "",
      "GMNotes": "Hazard - Red 20",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777649,
        "b": 0.311841071
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_red_20.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Red 20.1d5475.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Red 20.1d5475.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Red 20.1d5475.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "7d939f",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -17.25,
        "posY": 1.496917,
        "posZ": 42.0,
        "rotX": 0.07007435,
        "rotY": 179.999954,
        "rotZ": 0.061424844,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Red 30",
      "Description": "",
      "GMNotes": "Hazard - Red 30",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.16377759,
        "b": 0.311841
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_red_30.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Red 30.7d939f.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Red 30.7d939f.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Red 30.7d939f.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "dae5ba",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -14.5,
        "posY": 1.496917,
        "posZ": 42.0,
        "rotX": 0.0700769946,
        "rotY": 180.000015,
        "rotZ": 0.0614227243,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Red 30",
      "Description": "",
      "GMNotes": "Hazard - Red 30",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.16377759,
        "b": 0.311841
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 6,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_red_30.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Red 30.dae5ba.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Red 30.dae5ba.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Red 30.dae5ba.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "0be4f2",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -11.75,
        "posY": 1.49075449,
        "posZ": 42.0,
        "rotX": 0.07007715,
        "rotY": 180.000122,
        "rotZ": 0.06142494,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Red 40",
      "Description": "",
      "GMNotes": "Hazard - Red 40",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_red_40.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Red 40.0be4f2.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Red 40.0be4f2.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Red 40.0be4f2.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "12a5f6",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -9.0,
        "posY": 1.496917,
        "posZ": 42.0,
        "rotX": 0.07007715,
        "rotY": 180.000122,
        "rotZ": 0.06142297,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Yellow 10",
      "Description": "",
      "GMNotes": "Hazard - Yellow 10",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_yellow_10.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Yellow 10.12a5f6.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Yellow 10.12a5f6.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Yellow 10.12a5f6.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "18f9b3",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -25.5,
        "posY": 1.496917,
        "posZ": 39.0,
        "rotX": 0.0700791255,
        "rotY": 179.999954,
        "rotZ": 0.0614273325,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Yellow 20",
      "Description": "",
      "GMNotes": "Hazard - Yellow 20",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777649,
        "b": 0.311841071
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_yellow_20.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Yellow 20.18f9b3.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Yellow 20.18f9b3.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Yellow 20.18f9b3.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "ad9822",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -22.75,
        "posY": 1.49075437,
        "posZ": 39.0,
        "rotX": 0.07007715,
        "rotY": 180.000122,
        "rotZ": 0.0614249445,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Yellow 30",
      "Description": "",
      "GMNotes": "Hazard - Yellow 30",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777649,
        "b": 0.311841071
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_yellow_30.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Yellow 30.ad9822.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Yellow 30.ad9822.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Yellow 30.ad9822.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "e9ffd1",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -20.0,
        "posY": 1.496917,
        "posZ": 39.0,
        "rotX": 0.0332173966,
        "rotY": 179.999146,
        "rotZ": 0.0528564751,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Hazard - Yellow 40",
      "Description": "",
      "GMNotes": "Hazard - Yellow 40",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.16377762,
        "b": 0.311841041
      },
      "Tags": [
        "encounter",
        "hazard",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_hazard_yellow_40.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Hazard - Yellow 40.e9ffd1.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Hazard - Yellow 40.e9ffd1.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Hazard - Yellow 40.e9ffd1.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "09fd1e",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -17.25,
        "posY": 1.49075449,
        "posZ": 39.0,
        "rotX": 0.07007645,
        "rotY": 179.999954,
        "rotZ": 0.06142388,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Relic - Air Foil",
      "Description": "",
      "GMNotes": "Relic - Air Foil",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "relic",
        "token"
      ],
      "LayoutGroupSortIndex": 8,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_relic_air_foil.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Relic - Air Foil.09fd1e.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Relic - Air Foil.09fd1e.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Relic - Air Foil.09fd1e.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "0982b2",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -14.5,
        "posY": 1.496917,
        "posZ": 39.0,
        "rotX": 0.0700798258,
        "rotY": 179.997025,
        "rotZ": 0.0614206642,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Relic - Auto Pilot",
      "Description": "",
      "GMNotes": "Relic - Auto Pilot",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "relic",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_relic_auto_pilot.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Relic - Auto Pilot.0982b2.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Relic - Auto Pilot.0982b2.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Relic - Auto Pilot.0982b2.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "1729eb",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -11.75,
        "posY": 1.49075449,
        "posZ": 39.0,
        "rotX": 0.07010816,
        "rotY": 179.972122,
        "rotZ": 0.0613846257,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Relic - Gate Lock",
      "Description": "",
      "GMNotes": "Relic - Gate Lock",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777769,
        "b": 0.31184122
      },
      "Tags": [
        "encounter",
        "relic",
        "token"
      ],
      "LayoutGroupSortIndex": 7,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_relic_gate_lock.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Relic - Gate Lock.1729eb.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Relic - Gate Lock.1729eb.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Relic - Gate Lock.1729eb.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "4cc16a",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -9.0,
        "posY": 1.496917,
        "posZ": 39.0,
        "rotX": 0.07007365,
        "rotY": 179.999954,
        "rotZ": 0.0614238642,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Relic - Jump Start",
      "Description": "",
      "GMNotes": "Relic - Jump Start",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "relic",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_relic_jump_start.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Relic - Jump Start.4cc16a.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Relic - Jump Start.4cc16a.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Relic - Jump Start.4cc16a.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "a5d0fd",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -25.5,
        "posY": 1.49691689,
        "posZ": 36.0,
        "rotX": 0.0700648,
        "rotY": 180.0039,
        "rotZ": 0.0614275336,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Relic - Mulligan Gear",
      "Description": "",
      "GMNotes": "Relic - Mulligan Gear",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "relic",
        "token"
      ],
      "LayoutGroupSortIndex": 5,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_relic_mulligan_gear.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Relic - Mulligan Gear.a5d0fd.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Relic - Mulligan Gear.a5d0fd.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Relic - Mulligan Gear.a5d0fd.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "4acee5",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -22.75,
        "posY": 1.496917,
        "posZ": 36.0,
        "rotX": 0.07007225,
        "rotY": 179.999619,
        "rotZ": 0.06142109,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Relic - Shield",
      "Description": "",
      "GMNotes": "Relic - Shield",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777769,
        "b": 0.31184122
      },
      "Tags": [
        "encounter",
        "relic",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_relic_shield.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Relic - Shield.4acee5.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Relic - Shield.4acee5.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Relic - Shield.4acee5.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "9bf19f",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -20.0,
        "posY": 1.496917,
        "posZ": 36.0,
        "rotX": 0.07007355,
        "rotY": 180.000015,
        "rotZ": 0.0614252537,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Relic - Spy Eye",
      "Description": "",
      "GMNotes": "Relic - Spy Eye",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777828,
        "b": 0.311841279
      },
      "Tags": [
        "encounter",
        "relic",
        "token"
      ],
      "LayoutGroupSortIndex": 9,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_relic_spy_eye.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Relic - Spy Eye.9bf19f.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Relic - Spy Eye.9bf19f.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Relic - Spy Eye.9bf19f.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "0cc3d4",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -17.25,
        "posY": 1.49075449,
        "posZ": 36.0,
        "rotX": 0.07007225,
        "rotY": 180.000122,
        "rotZ": 0.061427407,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Relic - Switch Switch",
      "Description": "",
      "GMNotes": "Relic - Switch Switch",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "relic",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_relic_switch_switch.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Relic - Switch Switch.0cc3d4.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Relic - Switch Switch.0cc3d4.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Relic - Switch Switch.0cc3d4.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "698b38",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -14.5,
        "posY": 1.496917,
        "posZ": 36.0,
        "rotX": -0.005531982,
        "rotY": 180.000412,
        "rotZ": 0.04701709,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Relic - Yellow Drive",
      "Description": "",
      "GMNotes": "Relic - Yellow Drive",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777769,
        "b": 0.31184122
      },
      "Tags": [
        "encounter",
        "relic",
        "token"
      ],
      "LayoutGroupSortIndex": 6,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_relic_yellow_drive.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Relic - Yellow Drive.698b38.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Relic - Yellow Drive.698b38.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Relic - Yellow Drive.698b38.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "1ca9f1",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -11.75,
        "posY": 1.496917,
        "posZ": 36.0,
        "rotX": 6.51366463E-06,
        "rotY": 179.997589,
        "rotZ": 1.01436854E-05,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Spaceport",
      "Description": "",
      "GMNotes": "Spaceport",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777709,
        "b": 0.31184113
      },
      "Tags": [
        "encounter",
        "spaceport",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_spaceport.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Spaceport.1ca9f1.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Spaceport.1ca9f1.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Spaceport.1ca9f1.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "fa1242",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -9.0,
        "posY": 1.49075449,
        "posZ": 36.0,
        "rotX": 0.07007505,
        "rotY": 180.000122,
        "rotZ": 0.0614251457,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Spaceport",
      "Description": "",
      "GMNotes": "Spaceport",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777709,
        "b": 0.31184113
      },
      "Tags": [
        "encounter",
        "spaceport",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_spaceport.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Spaceport.fa1242.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Spaceport.fa1242.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Spaceport.fa1242.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "b81340",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -25.5,
        "posY": 1.496917,
        "posZ": 33.0,
        "rotX": 0.07007575,
        "rotY": 180.000122,
        "rotZ": 0.0614252649,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Spaceport",
      "Description": "",
      "GMNotes": "Spaceport",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777709,
        "b": 0.31184113
      },
      "Tags": [
        "encounter",
        "spaceport",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_spaceport.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Spaceport.b81340.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Spaceport.b81340.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Spaceport.b81340.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "dea4dd",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -22.75,
        "posY": 1.496917,
        "posZ": 33.0,
        "rotX": 0.07007715,
        "rotY": 180.000122,
        "rotZ": 0.0614249,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Telegate 1",
      "Description": "",
      "GMNotes": "Telegate 1",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777709,
        "b": 0.31184113
      },
      "Tags": [
        "encounter",
        "telegate",
        "token"
      ],
      "LayoutGroupSortIndex": 1,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_telegate_01.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Telegate 1.dea4dd.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Telegate 1.dea4dd.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Telegate 1.dea4dd.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "cb86a2",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -20.0,
        "posY": 1.496917,
        "posZ": 33.0,
        "rotX": 0.07007155,
        "rotY": 179.999954,
        "rotZ": 0.0614271872,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Telegate 2",
      "Description": "",
      "GMNotes": "Telegate 2",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777709,
        "b": 0.31184113
      },
      "Tags": [
        "encounter",
        "telegate",
        "token"
      ],
      "LayoutGroupSortIndex": 2,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_telegate_02.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Telegate 2.cb86a2.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Telegate 2.cb86a2.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Telegate 2.cb86a2.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "ca8a75",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -17.25,
        "posY": 1.496917,
        "posZ": 33.0,
        "rotX": 7.041501E-05,
        "rotY": 180.0,
        "rotZ": 5.133312E-05,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Telegate 3",
      "Description": "",
      "GMNotes": "Telegate 3",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "telegate",
        "token"
      ],
      "LayoutGroupSortIndex": 5,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_telegate_03.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Telegate 3.ca8a75.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Telegate 3.ca8a75.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Telegate 3.ca8a75.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "083445",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -14.5,
        "posY": 1.496917,
        "posZ": 33.0,
        "rotX": 0.07007295,
        "rotY": 179.999954,
        "rotZ": 0.06142454,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Telegate 4",
      "Description": "",
      "GMNotes": "Telegate 4",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "telegate",
        "token"
      ],
      "LayoutGroupSortIndex": 6,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_telegate_04.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Telegate 4.083445.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Telegate 4.083445.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Telegate 4.083445.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "41cdb6",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -11.75,
        "posY": 1.496917,
        "posZ": 33.0,
        "rotX": 0.07007435,
        "rotY": 179.999466,
        "rotZ": 0.0614254475,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Telegate 5",
      "Description": "",
      "GMNotes": "Telegate 5",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "telegate",
        "token"
      ],
      "LayoutGroupSortIndex": 4,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_telegate_05.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Telegate 5.41cdb6.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Telegate 5.41cdb6.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Telegate 5.41cdb6.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "cbd165",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -9.0,
        "posY": 1.49075449,
        "posZ": 33.0,
        "rotX": 0.07007715,
        "rotY": 179.999954,
        "rotZ": 0.0614239722,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Telegate 6",
      "Description": "",
      "GMNotes": "Telegate 6",
      "ColorDiffuse": {
        "r": 0.0342270657,
        "g": 0.163777739,
        "b": 0.3118412
      },
      "Tags": [
        "encounter",
        "telegate",
        "token"
      ],
      "LayoutGroupSortIndex": 3,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": true,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_telegate_06.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/encounters/encounter_back.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Telegate 6.cbd165.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Telegate 6.cbd165.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/encounters/encounter\")\nend)\n__bundle_register(\"lua/components/encounters/encounter\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\nlocal function toggleTooltip()\r\n  if (self.is_face_down) then\r\n    self.setName('Encounter')\r\n  else\r\n    self.setName(self.getGMNotes() or 'Encounter')\r\n  end\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isFaceUpTelegate(obj)\r\n  return obj.hasTag('telegate') and not obj.is_face_down\r\nend\r\n\r\nlocal function getFaceUpTelegates()\r\n  local telegates = getObjectsWithAllTags({'telegate', 'encounter'})\r\n  return table.filter(telegates, function(telegate)\r\n    return telegate ~= nil and telegate ~= self and isFaceUpTelegate(telegate)\r\n  end)\r\nend\r\n\r\n---@param playerColor string\r\nlocal function pingTelegates(playerColor)\r\n  if(not isFaceUpTelegate(self)) then return end\r\n\r\n  table.forEach(getFaceUpTelegates(), function(telegate)\r\n    telegate.highlightOn(playerColor, 5)\r\n    interactions.pingObject(telegate, playerColor)\r\n  end)\r\nend\r\n\r\nfunction onCollisionEnter()\r\n  toggleTooltip()\r\nend\r\n\r\nfunction onCollisionExit()\r\n  toggleTooltip()\r\nend\r\n\r\n---@param playerColor string\r\nfunction onPickUp(playerColor)\r\n  pingTelegates(playerColor)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Telegate 6.cbd165.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "db2ac5",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.496917,
        "posZ": 19.5,
        "rotX": 0.054860387,
        "rotY": 179.999954,
        "rotZ": 0.0389449969,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 01 - Nillis",
      "Description": "Shield: c60",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c01",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_01_nillis.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 01 - Nillis.db2ac5.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 01 - Nillis.db2ac5.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 01 - Nillis.db2ac5.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "c88f38",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.496917,
        "posZ": 16.5,
        "rotX": 0.0700916052,
        "rotY": 179.999817,
        "rotZ": 0.0614368729,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 02 - Volois",
      "Description": "Combo Drives: c300",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c02",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_02_volois.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 02 - Volois.c88f38.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 02 - Volois.c88f38.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 02 - Volois.c88f38.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "0f377f",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.496917,
        "posZ": 13.5,
        "rotX": 0.07009918,
        "rotY": 179.98111,
        "rotZ": 0.06141086,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 03 - Graw",
      "Description": "Primitive. No tech or ships for sale or barter.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c03",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_03_graw.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 03 - Graw.0f377f.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 03 - Graw.0f377f.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 03 - Graw.0f377f.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "ed3eef",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.49075449,
        "posZ": 10.5,
        "rotX": 0.07008123,
        "rotY": 179.999924,
        "rotZ": 0.0614248924,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 04 - Niks",
      "Description": "Shield: c60",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c04",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_04_niks.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 04 - Niks.ed3eef.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 04 - Niks.ed3eef.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 04 - Niks.ed3eef.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "6493b9",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.49075449,
        "posZ": 7.5,
        "rotX": 0.0700695738,
        "rotY": 180.0,
        "rotZ": 0.0614100173,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 05 - Dell",
      "Description": "Yellow Drives: c80\nTransport: c240\nFreighter: c300",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c05",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_05_dell.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 05 - Dell.6493b9.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 05 - Dell.6493b9.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 05 - Dell.6493b9.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "5fbb01",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.49075449,
        "posZ": 4.5,
        "rotX": 0.0700881,
        "rotY": 179.999725,
        "rotZ": 0.0614387244,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 06 - Humans",
      "Description": "Red Drives: c120\nScout: c60\nClipper: c120",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c06",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_06_humans.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 06 - Humans.5fbb01.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 06 - Humans.5fbb01.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 06 - Humans.5fbb01.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "84f523",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.49075449,
        "posZ": 1.5,
        "rotX": 0.07005442,
        "rotY": 179.999741,
        "rotZ": 0.0613988526,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 07 - Shenna",
      "Description": "Primitive. No tech or ships for sale or barter.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c07",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_07_shenna.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 07 - Shenna.84f523.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 07 - Shenna.84f523.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 07 - Shenna.84f523.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "d2e5bf",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.49075449,
        "posZ": -1.5,
        "rotX": 0.07010058,
        "rotY": 179.999741,
        "rotZ": 0.0614012666,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 08 - Yxklyx",
      "Description": "Red Drives: c120\nScout: c60\nClipper: c120",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c08",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_08_yxklyx.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 08 - Yxklyx.d2e5bf.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 08 - Yxklyx.d2e5bf.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 08 - Yxklyx.d2e5bf.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "56b053",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.49075449,
        "posZ": -4.5,
        "rotX": 0.07008263,
        "rotY": 180.000122,
        "rotZ": 0.0614269078,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 09 - Zum",
      "Description": "Yellow Drives: c80\nTransport: c240\nFreighter: c300",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c09",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_09_zum.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 09 - Zum.56b053.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 09 - Zum.56b053.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 09 - Zum.56b053.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "93093b",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.49075449,
        "posZ": -7.5,
        "rotX": 0.07009498,
        "rotY": 179.999878,
        "rotZ": 0.0614158064,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 10 - Eeepeeep",
      "Description": "Red Drives: c120\nScout: c60\nClipper: c120",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c10",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_10_eeepeeep.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 10 - Eeepeeep.93093b.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 10 - Eeepeeep.93093b.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 10 - Eeepeeep.93093b.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "d433a0",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.49075449,
        "posZ": -10.5,
        "rotX": 0.07007295,
        "rotY": 180.004929,
        "rotZ": 0.06142778,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 11 - Whynoms",
      "Description": "Yellow Drives: c80\nTransport: c240\nFreighter: c300",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c11",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_11_whynoms.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 11 - Whynoms.d433a0.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 11 - Whynoms.d433a0.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 11 - Whynoms.d433a0.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "40ccd3",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.496917,
        "posZ": -13.5,
        "rotX": 0.07007505,
        "rotY": 179.999832,
        "rotZ": 0.0614313968,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 12 - Cholos",
      "Description": "Shield: c60",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c12",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_12_cholos.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 12 - Cholos.40ccd3.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 12 - Cholos.40ccd3.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 12 - Cholos.40ccd3.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "dc626d",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.496917,
        "posZ": -16.5,
        "rotX": 0.0700577945,
        "rotY": 180.000168,
        "rotZ": 0.06143852,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 13 - Wollow",
      "Description": "Primitive. No tech or ships for sale or barter.",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c13",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_13_wollow.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 13 - Wollow.dc626d.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 13 - Wollow.dc626d.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 13 - Wollow.dc626d.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "a88e13",
      "Name": "Custom_Token",
      "Transform": {
        "posX": -33.5,
        "posY": 1.496917,
        "posZ": -19.5,
        "rotX": 0.07003029,
        "rotY": 180.000046,
        "rotZ": 0.0613948777,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Culture 14 - Qossuth",
      "Description": "Combo Drives: c300",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "c14",
        "culture",
        "details",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/cultures/tokens/culture_14_qossuth.png",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomToken": {
          "Thickness": 0.1,
          "MergeDistancePixels": 15.0,
          "StandUp": false,
          "Stackable": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Culture 14 - Qossuth.a88e13.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Culture 14 - Qossuth.a88e13.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/cultures/detailsToken\")\r\n\nend)\n__bundle_register(\"lua/components/cultures/detailsToken\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\n\r\n---@type table<string, table | nil>\r\nlocal demands = {}\r\n\r\n--- Refreshes the grid layout of demands for this culture's token.\r\nlocal function updateDemandUI()\r\n  local assets = {}\r\n  local gridLayout = {\r\n    tag = 'GridLayout',\r\n    attributes = {\r\n      cellSize = '300 300',\r\n      childAlignment = 'LowerCenter',\r\n      width = 940,\r\n      height = 940,\r\n      rotation = '90 0 180',\r\n      spacing = '20 20',\r\n      position = '0 0 -500',\r\n      scale = '1 0.75',\r\n    },\r\n    children = {},\r\n  }\r\n\r\n  table.forEach(demands, function(demand, guid)\r\n    table.insert(assets, { name = guid, url = demand.CustomImage.ImageURL })\r\n    table.insert(gridLayout.children, { tag = \"Button\", attributes = { image = guid, onClick = 'handleDemandButtonClick(' .. guid .. ')' } })\r\n  end)\r\n\r\n  self.UI.setCustomAssets(assets)\r\n  self.UI.setXmlTable({ gridLayout })\r\nend\r\n\r\n--- On clicking a demand in the culture details UI, removes the demand from the UI and spawns the actual object.\r\n---@param player table\r\n---@param guid string\r\nlocal function spawnDemand(player, guid)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then\r\n    broadcastToColor('You must be seated at the table to use this.', player.color, 'Red')\r\n    return\r\n  end\r\n\r\n  local data = demands[guid]\r\n  demands[guid] = nil\r\n  if (data) then\r\n    local selfPos = self.getPosition()\r\n    spawnObjectData({\r\n      data = data,\r\n      position = { x = selfPos.x, y = selfPos.y + 5, z = selfPos.z - 2 },\r\n      callback_function = function(obj) obj.deal(1, player.color) end,\r\n    })\r\n  end\r\n  updateDemandUI()\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isEventToken(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'event', 'token' })\r\nend\r\n\r\nfunction onLoad()\r\n  updateDemandUI()\r\nend\r\n\r\nfunction handleDemandButtonClick(player, guid)\r\n  spawnDemand(player, guid)\r\nend\r\n\r\nfunction onCollisionEnter(collisionInfo)\r\n  local obj = collisionInfo.collision_object\r\n  if (isEventToken(obj)) then\r\n    local guid = obj.getGUID()\r\n    local data = obj.getData()\r\n    demands[guid] = data\r\n    obj.destruct()\r\n  end\r\n  updateDemandUI()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Culture 14 - Qossuth.a88e13.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/cultures/detailsToken.xml -->\n<GridLayout />\r\n\n<!-- include lua/components/cultures/detailsToken.xml -->"
    },
    {
      "GUID": "f9b7ce",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.496917,
        "posZ": 19.5,
        "rotX": 0.07010676,
        "rotY": 179.985931,
        "rotZ": 0.06140356,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 01 - Bionic Perfume",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.442992061,
        "g": 0.230992079,
        "b": 0.08999356
      },
      "Tags": [
        "c01",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 5,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_01_normal_front_bionic_perfume.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_01_normal_back_bionic_perfume.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "041174",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.496917,
        "posZ": 16.5,
        "rotX": 0.07071491,
        "rotY": 179.988922,
        "rotZ": 0.06395098,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 02 - Canned Traits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.442992061,
        "g": 0.230992079,
        "b": 0.08999356
      },
      "Tags": [
        "c02",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 6,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_02_normal_front_canned_traits.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_02_normal_back_canned_traits.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "1cff98",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.49075449,
        "posZ": 13.5,
        "rotX": 0.07071724,
        "rotY": 179.978363,
        "rotZ": 0.0639578551,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 03 - Glorious Junk",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c03",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 6,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_03_normal_front_glorious_junk.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_03_normal_back_glorious_junk.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "feef79",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.49075449,
        "posZ": 10.5,
        "rotX": 0.07082224,
        "rotY": 179.985062,
        "rotZ": 0.064380914,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 04 - Living Toys",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c04",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 6,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_04_normal_front_living_toys.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_04_normal_back_living_toys.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "bbd9c3",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.49075449,
        "posZ": 7.5,
        "rotX": 0.07081482,
        "rotY": 179.986,
        "rotZ": 0.06437225,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 05 - Finest Dust",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.442992061,
        "g": 0.230992079,
        "b": 0.08999356
      },
      "Tags": [
        "c05",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 6,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_05_normal_front_finest_dust.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_05_normal_back_finest_dust.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "c1c92f",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.496917,
        "posZ": 4.5,
        "rotX": 0.0708464,
        "rotY": 179.989914,
        "rotZ": 0.06460703,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 06 - Rock Videos",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c06",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 5,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_06_normal_front_rock_videos.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_06_normal_back_rock_videos.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "2a78d9",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.496917,
        "posZ": 1.5,
        "rotX": 0.0708287358,
        "rotY": 179.973648,
        "rotZ": 0.06437556,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 07 - Melf Pelts",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c07",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 6,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_07_normal_front_melf_pelts.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_07_normal_back_melf_pelts.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "6dc37b",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.496917,
        "posZ": -1.5,
        "rotX": 0.07083762,
        "rotY": 179.973709,
        "rotZ": 0.0643806756,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 08 - Immortal Grease",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c08",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 6,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_08_normal_front_immortal_grease.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_08_normal_back_immortal_grease.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "76e238",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.49075449,
        "posZ": -4.5,
        "rotX": 0.07083755,
        "rotY": 179.976364,
        "rotZ": 0.06434718,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 09 - Chicle Liquor",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c09",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 6,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_09_normal_front_chicle_liquor.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_09_normal_back_chicle_liquor.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "273036",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.496917,
        "posZ": -7.5,
        "rotX": 0.07083624,
        "rotY": 180.025177,
        "rotZ": 0.06483956,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 10 - Pedigree Bolts",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c10",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 4,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_10_normal_front_pedigree_bolts.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_10_normal_back_pedigree_bolts.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "28d9b8",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.49075449,
        "posZ": -10.5,
        "rotX": 0.070841074,
        "rotY": 180.013,
        "rotZ": 0.0647308,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 11 - Impossible Furniture",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c11",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 5,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_11_normal_front_impossible_furniture.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_11_normal_back_impossible_furniture.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "96065d",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.49075449,
        "posZ": -13.5,
        "rotX": 0.0706832,
        "rotY": 180.011627,
        "rotZ": 0.064007394,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 12 - Designer Genes",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c12",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 6,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_12_normal_front_designer_genes.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_12_normal_back_designer_genes.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "ab4aa9",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.496917,
        "posZ": -16.5,
        "rotX": 0.07082698,
        "rotY": 180.026062,
        "rotZ": 0.06473888,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 13 - Megalith Paperweight",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c13",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 5,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_13_normal_front_megalith_paperweight.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_13_normal_back_megalith_paperweight.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "98a836",
      "Name": "Custom_Tile_Stack",
      "Transform": {
        "posX": -37.5,
        "posY": 1.496917,
        "posZ": -19.5,
        "rotX": 0.07085328,
        "rotY": 180.003525,
        "rotZ": 0.06478626,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Good 14 - Psychotic Sculpture",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.4429921,
        "g": 0.230992109,
        "b": 0.08999359
      },
      "Tags": [
        "c14",
        "good",
        "normal",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 4,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_14_normal_front_psychotic_sculpture.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_14_normal_back_psychotic_sculpture.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "226076",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.24075437,
        "posZ": 19.5,
        "rotX": 0.06044254,
        "rotY": 179.990219,
        "rotZ": 0.04351238,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 01 - Bionic Perfume ",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c01",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_01_factory_front_bionic_perfume.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_01_factory_back_bionic_perfume.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "d1c36c",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.24075437,
        "posZ": 16.5,
        "rotX": 0.074283734,
        "rotY": 180.023056,
        "rotZ": 0.0756142,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 02 - Canned Traits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c02",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_02_factory_front_canned_traits.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_02_factory_back_canned_traits.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "4f1d86",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": 13.5,
        "rotX": 0.07417012,
        "rotY": 180.016785,
        "rotZ": 0.07465048,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 03 - Glorious Junk",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c03",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_03_factory_front_glorious_junk.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_03_factory_back_glorious_junk.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "fef3ea",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": 10.5,
        "rotX": 0.08065868,
        "rotY": 180.0002,
        "rotZ": 0.069035545,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 04 - Living Toys ",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c04",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_04_factory_front_living_toys.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_04_factory_back_living_toys.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "3517e2",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": 7.5,
        "rotX": 0.08119619,
        "rotY": 180.000656,
        "rotZ": 0.06963834,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 05 - Finest Dust",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c05",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_05_factory_front_finest_dust.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_05_factory_back_finest_dust.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "4a811e",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": 4.5,
        "rotX": 0.08133783,
        "rotY": 180.001251,
        "rotZ": 0.069593735,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 06 - Rock Videos",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c06",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_06_factory_front_rock_videos.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_06_factory_back_rock_videos.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "674338",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": 1.5,
        "rotX": 0.0806546062,
        "rotY": 180.000153,
        "rotZ": 0.06905822,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 07 - Melf Pelts",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c07",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_07_factory_front_melf_pelts.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_07_factory_back_melf_pelts.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "3e9e8b",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": -1.5,
        "rotX": 0.0807365552,
        "rotY": 179.995758,
        "rotZ": 0.0690371841,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 08 - Immortal Grease",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c08",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_08_factory_front_immortal_grease.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_08_factory_back_immortal_grease.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "ada97b",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": -4.5,
        "rotX": 0.08122067,
        "rotY": 179.988312,
        "rotZ": 0.069601506,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 09 - Chicle Liquor",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c09",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_09_factory_front_chicle_liquor.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_09_factory_back_chicle_liquor.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "a9a716",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": -7.5,
        "rotX": 0.0818619356,
        "rotY": 179.995575,
        "rotZ": 0.07007537,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 10 - Pedigree Bolts",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c10",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_10_factory_front_pedigree_bolts.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_10_factory_back_pedigree_bolts.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "a92c79",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": -10.5,
        "rotX": 0.08191627,
        "rotY": 180.000443,
        "rotZ": 0.06943181,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 11 - Impossible Furniture",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c11",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_11_factory_front_impossible_furniture.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_11_factory_back_impossible_furniture.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "dd5142",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.246917,
        "posZ": -13.5,
        "rotX": 0.07456938,
        "rotY": 179.970062,
        "rotZ": 0.07556311,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 12 - Designer Genes",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c12",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_12_factory_front_designer_genes.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_12_factory_back_designer_genes.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "266bc7",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.24075437,
        "posZ": -16.5,
        "rotX": 0.08116566,
        "rotY": 180.022125,
        "rotZ": 0.06928158,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 13 - Megalith Paperweight",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c13",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_13_factory_front_megalith_paperweight.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_13_factory_back_megalith_paperweight.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "5f434d",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.24075437,
        "posZ": -19.5,
        "rotX": 0.08173576,
        "rotY": 180.000275,
        "rotZ": 0.07002583,
        "scaleX": 1.25,
        "scaleY": 1.0,
        "scaleZ": 1.25
      },
      "Nickname": "Factory Good 14 - Psychotic Sculpture",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c14",
        "factory",
        "good",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_14_factory_front_psychotic_sculpture.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/goods/good_14_factory_back_psychotic_sculpture.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 3,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    },
    {
      "GUID": "14e2f6",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": 19.5,
        "rotX": -5.72383533E-06,
        "rotY": 180.001083,
        "rotZ": -5.608428E-08,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 01",
      "Description": "",
      "GMNotes": "100",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c01",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_01.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_01.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 01.14e2f6.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 01.14e2f6.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 01.14e2f6.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "92b15b",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": 16.5,
        "rotX": 0.0740076452,
        "rotY": 180.016266,
        "rotZ": 0.07908427,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 02",
      "Description": "",
      "GMNotes": "200",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c02",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_02.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_02.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 02.92b15b.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 02.92b15b.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 02.92b15b.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "b7c152",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": 13.5,
        "rotX": 0.07683561,
        "rotY": 179.993225,
        "rotZ": 0.08246111,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 03",
      "Description": "",
      "GMNotes": "200",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c03",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_03.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_03.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 03.b7c152.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 03.b7c152.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 03.b7c152.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "a8ea37",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": 10.5,
        "rotX": 0.08284781,
        "rotY": 179.999344,
        "rotZ": 0.07580317,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 04",
      "Description": "",
      "GMNotes": "200",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c04",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_04.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_04.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 04.a8ea37.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 04.a8ea37.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 04.a8ea37.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "e0477f",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": 7.5,
        "rotX": 0.08069389,
        "rotY": 180.00209,
        "rotZ": 0.0734456554,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 05",
      "Description": "",
      "GMNotes": "200",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c05",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_05.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_05.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 05.e0477f.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 05.e0477f.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 05.e0477f.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "0030d6",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": 4.5,
        "rotX": 0.08563477,
        "rotY": 180.00267,
        "rotZ": 0.07626802,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 06",
      "Description": "",
      "GMNotes": "100",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c06",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_06.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_06.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 06.0030d6.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 06.0030d6.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 06.0030d6.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "149602",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": 1.5,
        "rotX": 0.08283711,
        "rotY": 180.003235,
        "rotZ": 0.0758405253,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 07",
      "Description": "",
      "GMNotes": "100",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c07",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_07.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_07.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 07.149602.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 07.149602.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 07.149602.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "2a214f",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": -1.5,
        "rotX": 0.08490014,
        "rotY": 180.006042,
        "rotZ": 0.0754871145,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 08",
      "Description": "",
      "GMNotes": "200",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c08",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_08.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_08.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 08.2a214f.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 08.2a214f.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 08.2a214f.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "d6312e",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": -4.5,
        "rotX": 0.08071242,
        "rotY": 179.998871,
        "rotZ": 0.07341572,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 09",
      "Description": "",
      "GMNotes": "200",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c09",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_09.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_09.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 09.d6312e.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 09.d6312e.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 09.d6312e.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "205ecb",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": -7.5,
        "rotX": 0.0841932446,
        "rotY": 180.000427,
        "rotZ": 0.07731705,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 10",
      "Description": "",
      "GMNotes": "100",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c10",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_10.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_10.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 10.205ecb.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 10.205ecb.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 10.205ecb.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "537dca",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": -10.5,
        "rotX": 0.0820395052,
        "rotY": 180.002777,
        "rotZ": 0.0652938,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 11",
      "Description": "",
      "GMNotes": "100",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c11",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_11.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_11.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 11.537dca.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 11.537dca.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 11.537dca.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "757b2c",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": -13.5,
        "rotX": 0.07604711,
        "rotY": 179.999725,
        "rotZ": 0.07870244,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 12",
      "Description": "",
      "GMNotes": "200",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c12",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_12.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_12.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 12.757b2c.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 12.757b2c.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 12.757b2c.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "a860f6",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": -16.5,
        "rotX": 0.0804731,
        "rotY": 180.00145,
        "rotZ": 0.06694693,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 13",
      "Description": "",
      "GMNotes": "100",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c13",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_13.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_13.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 13.a860f6.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 13.a860f6.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 13.a860f6.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "ba617f",
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -37.5,
        "posY": 2.496917,
        "posZ": -19.5,
        "rotX": 0.08293631,
        "rotY": 180.0014,
        "rotZ": 0.07686114,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Factory Deed 14",
      "Description": "",
      "GMNotes": "200",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171992511
      },
      "Tags": [
        "c14",
        "deed",
        "factory",
        "scoring",
        "token"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_14.png",
        "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_factory_14.png",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Factory Deed 14.ba617f.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Factory Deed 14.ba617f.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nlocal function setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip on credits only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Factory Deed 14.ba617f.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "383e77",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -37.0,
        "posY": 1.0,
        "posZ": -31.5,
        "rotX": 2.17138322E-07,
        "rotY": -3.614918E-10,
        "rotZ": -8.29267854E-09,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Cash: 0 c",
      "Description": "Net Worth: 0 c",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0,
        "a": 0.2509804
      },
      "Tags": [
        "display",
        "player",
        "yellow"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/net_worth.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 4,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/net_worth/net_worth.xml -->\n<Defaults>\r\n  <Text color=\"#FFFFFF\" fontStyle=\"bold\" />\r\n  <Text class=\"title\" fontSize=\"18\" />\r\n  <Text class=\"value\" fontSize=\"60\" />\r\n</Defaults>\r\n\r\n<TableLayout\r\n  id=\"NetWorthLayout\"\r\n  width=\"2260\"\r\n  height=\"105\"\r\n  position=\"0 -20 -60\"\r\n  rotation=\"-55 0 0\"\r\n>\r\n  <Row preferredHeight=\"30\">\r\n    <Cell>\r\n      <Text class=\"title\">Cash on Hand</Text>\r\n    </Cell>\r\n    <Cell>\r\n      <Text class=\"title\">Total Net Worth</Text>\r\n    </Cell>\r\n  </Row>\r\n  <Row>\r\n    <Cell>\r\n      <Text id=\"cash\" class=\"value\">0 c</Text>\r\n    </Cell>\r\n    <Cell>\r\n      <Text id=\"total\" class=\"value\">0 c</Text>\r\n    </Cell>\r\n  </Row>\r\n</TableLayout>\r\n\n<!-- include lua/components/net_worth/net_worth.xml -->"
    },
    {
      "GUID": "c4a628",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -2.29553616E-11,
        "posY": 1.0,
        "posZ": -26.5,
        "rotX": 1.32879565E-08,
        "rotY": -0.001990424,
        "rotZ": -2.26852723E-08,
        "scaleX": 1.5,
        "scaleY": 1.0,
        "scaleZ": 1.5
      },
      "Nickname": "Transaction Tablet",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "tablet",
        "transactions"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_tablet_8x6.obj",
        "DiffuseURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_tablet_8x6.png",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 4,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Transaction Tablet.c4a628.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Transaction Tablet.c4a628.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/transaction_tablet/transactionTablet\")\r\n\nend)\n__bundle_register(\"lua/components/transaction_tablet/transactionTablet\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\n\r\n---@class State\r\n---@field factoryColor string | boolean\r\n---@field factoryGets number\r\n---@field cashTotal integer\r\n---@field playerGets integer\r\n---@field playerOwes integer\r\n---@field spaceportColor string | boolean\r\n---@field spaceportGets number\r\n---@field transaction string\r\n\r\n---@class TransactionStates\r\n---@field buyState State\r\n---@field sellState State\r\n\r\n---@type State\r\nlocal initialState = {\r\n  factoryColor = false,\r\n  factoryGets = 0,\r\n  cashTotal = 0,\r\n  playerGets = 0,\r\n  playerOwes = 0,\r\n  spaceportColor = false,\r\n  spaceportGets = 0,\r\n  transaction = 'buy',\r\n}\r\n\r\n---@type State\r\nlocal state = {}\r\n\r\n---@type TransactionStates\r\nlocal previousTransactionStates\r\n\r\nlocal transactions = { ['0'] = 'buy', ['1'] = 'sell' }\r\nlocal playerColors = { ['0'] = false, ['1'] = 'yellow', ['2'] = 'red', ['3'] = 'green', ['4'] = 'orange' }\r\nlocal transactionToggleButtons = { buy = 'BuyToggleButton', sell = 'SellToggleButton' }\r\nlocal transactionPanes = { buy = 'BuySettings', sell = 'SellSettings' }\r\nlocal xmlIDs = {\r\n  factoryGetsText = 'FactoryGetsText',\r\n  playerGetsText = 'PlayerGetsText',\r\n  playerOwesTitleText = 'PlayerOwesTitleText',\r\n  playerOwesText = 'PlayerOwesText',\r\n  spaceportGetsTextBuy = 'SpaceportGetsTextBuy',\r\n  spaceportGetsTextSell = 'SpaceportGetsTextSell',\r\n  submitButton = 'SubmitButton',\r\n}\r\n\r\n---@param amount integer\r\nlocal function setFactoryGetsUi(amount)\r\n  local factoryGetsStr = 'Factory Gets: ' .. amount .. 'c'\r\n\r\n  self.UI.setValue(xmlIDs.factoryGetsText, factoryGetsStr)\r\nend\r\n\r\n---@param amount integer\r\nlocal function setPlayerGetsUi(amount)\r\n  local playerGetsStr = amount .. 'c'\r\n\r\n  self.UI.setValue(xmlIDs.playerGetsText, playerGetsStr)\r\nend\r\n\r\n---@param amount integer\r\nlocal function setPlayerOwesUi(amount, cashTotal)\r\n  local adjustedAmount = amount\r\n  local playerOwesTitleStr = 'Player Owes:'\r\n  if (amount < 0) then\r\n    adjustedAmount = math.min(amount * -1, cashTotal)\r\n\r\n    playerOwesTitleStr = 'Player Gets Change:'\r\n  end\r\n  local amountStr = adjustedAmount .. 'c'\r\n\r\n  self.UI.setValue(xmlIDs.playerOwesTitleText, playerOwesTitleStr)\r\n  self.UI.setValue(xmlIDs.playerOwesText, amountStr)\r\nend\r\n\r\n---@param amount integer\r\nlocal function setSpaceportGetsUi(amount)\r\n  local spaceportGetsStr = 'Spaceport Gets: ' .. amount .. 'c'\r\n\r\n  self.UI.setValue(xmlIDs.spaceportGetsTextBuy, spaceportGetsStr)\r\n  self.UI.setValue(xmlIDs.spaceportGetsTextSell, spaceportGetsStr)\r\nend\r\n\r\n---@param transaction string\r\nlocal function switchUiPane(transaction)\r\n  table.forEach(transactionToggleButtons, function(v, k)\r\n    local attrs = self.UI.getAttributes(v)\r\n    attrs.isOn = k == transaction\r\n    self.UI.setAttributes(v, attrs)\r\n  end)\r\n  table.forEach(transactionPanes, function(v, k)\r\n    local attrs = self.UI.getAttributes(v)\r\n    attrs.active = k == transaction\r\n    self.UI.setAttributes(v, attrs)\r\n  end)\r\nend\r\n\r\n---@param playerOwes number\r\n---@param transaction string\r\nlocal function validateSubmitButtonState(playerOwes, transaction)\r\n  local attrs = self.UI.getAttributes(xmlIDs.submitButton)\r\n  if (transaction == 'buy') then\r\n    attrs.interactable = playerOwes <= 0\r\n  else\r\n    attrs.interactable = true\r\n  end\r\n  self.UI.setAttributes(xmlIDs.submitButton, attrs)\r\nend\r\n\r\n---@param newState State\r\nlocal function updateTransactionTabletUi(newState)\r\n  state = table.merge(state, newState)\r\n\r\n  setFactoryGetsUi(state.factoryGets)\r\n  setPlayerGetsUi(state.playerGets)\r\n  setPlayerOwesUi(state.playerOwes, state.cashTotal)\r\n  setSpaceportGetsUi(state.spaceportGets)\r\n  switchUiPane(state.transaction)\r\n  validateSubmitButtonState(state.playerOwes, state.transaction)\r\nend\r\n\r\nlocal function resetUi()\r\n  updateTransactionTabletUi(initialState)\r\nend\r\n\r\n--- Receives updated buy and sell values from handleNewStateFromTransactionZone\r\n---@param transactionStates TransactionStates\r\nfunction handleNewStateFromTransactionZone(transactionStates)\r\n  previousTransactionStates = transactionStates\r\n  if (state.transaction == 'buy') then\r\n    updateTransactionTabletUi(transactionStates.buyState)\r\n  else\r\n    updateTransactionTabletUi(transactionStates.sellState)\r\n  end\r\nend\r\n\r\nfunction handleTransactionTabChanged(player, val)\r\n  local transaction = transactions[val]\r\n  local previousTransactionState = {}\r\n\r\n  if (previousTransactionStates) then\r\n    if (transaction == 'buy') then\r\n      previousTransactionState = previousTransactionStates.buyState\r\n    else\r\n      previousTransactionState = previousTransactionStates.sellState\r\n    end\r\n  end\r\n\r\n  local newState = table.merge(previousTransactionState, { transaction = transaction })\r\n  updateTransactionTabletUi(newState)\r\nend\r\n\r\nfunction handleFactoryChanged(player, val)\r\n  state.factoryColor = playerColors[val]\r\nend\r\n\r\nfunction handleSpaceportChanged(player, val)\r\n  state.spaceportColor = playerColors[val]\r\nend\r\n\r\nfunction handleSubmitClicked(player)\r\n  local transactionZone = getObjectFromGUID(constants.GUIDS.TransactionZoneGUID)\r\n  if (transactionZone ~= nil) then\r\n    transactionZone.call('handleSubmit', { player = player, transactionState = state })\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  resetUi()\r\nend\r\n\r\nfunction onSpawn()\r\n  resetUi()\r\nend\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Transaction Tablet.c4a628.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/transaction_tablet/transactionTablet.xml -->\n<Defaults>\r\n  <!-- =========================================================== -->\r\n  <!-- Color Defaults -->\r\n  <!-- =========================================================== -->\r\n  <Color name=\"playerColor\" color=\"white\" />\r\n\r\n  <!-- =========================================================== -->\r\n  <!-- Text Defaults -->\r\n  <!-- =========================================================== -->\r\n  <Text color=\"#FFFFFF\" fontSize=\"18\" fontStyle=\"bold\" />\r\n  <Text class=\"title\" fontSize=\"42\" />\r\n\r\n  <!-- =========================================================== -->\r\n  <!-- Button Defaults -->\r\n  <!-- =========================================================== -->\r\n  <Dropdown\r\n    fontSize=\"18\"\r\n    fontStyle=\"bold\"\r\n    textColor=\"#FFFFFF\"\r\n    itemTextColor=\"#666666\"\r\n    colors=\"#666666|#999999|#333333|#000000\"\r\n    itemBackgroundColors=\"#333333|#999999|#666666|#000000\"\r\n  />\r\n  <!-- normalColor|highlightedColor|pressedColor|disabledColor -->\r\n  <Button\r\n    fontSize=\"18\"\r\n    textColors=\"#FFFFFF|#FFFFFF|#FFFFFF|#666666\"\r\n    colors=\"#666666|#999999|#333333|#333333\"\r\n    fontStyle=\"bold\"\r\n  />\r\n  <!-- normalColor|highlightedColor|pressedColor|disabledColor -->\r\n  <ToggleButton\r\n    fontSize=\"18\"\r\n    deselectedBackgroundColor=\"#333333\"\r\n    textColors=\"#FFFFFF|#FFFFFF|#FFFFFF|#666666\"\r\n    colors=\"#999999|#666666|#333333|#000000\"\r\n    fontStyle=\"bold\"\r\n  />\r\n\r\n  <!-- =========================================================== -->\r\n  <!-- Layout Defaults -->\r\n  <!-- =========================================================== -->\r\n  <HorizontalLayout childAlignment=\"MiddleCenter\" childForceExpandWidth=\"false\" />\r\n  <HorizontalLayout class=\"@ToggleGroup>@HorizontalLayout\" childForceExpandWidth=\"true\" />\r\n  <VerticalLayout childAlignment=\"MiddleCenter\" childForceExpandHeight=\"false\" />\r\n  <VerticalLayout class=\"@ToggleGroup>@VerticalLayout\" childForceExpandHeight=\"true\" />\r\n\r\n  <!-- =========================================================== -->\r\n  <!--Layout Structure -->\r\n  <!-- =========================================================== -->\r\n  <VerticalLayout class=\"Container\" color=\"clear\" width=\"750\" height=\"550\" position=\"0 0 -12\" />\r\n  <Panel class=\"VerticalDivider\" color=\"playerColor\" preferredWidth=\"2\" />\r\n  <Panel class=\"HorizontalDivider\" color=\"playerColor\" preferredHeight=\"2\" />\r\n  <Panel class=\"yellow:VerticalDivider\" color=\"yellow\" preferredWidth=\"2\" />\r\n  <Panel class=\"yellow:HorizontalDivider\" color=\"yellow\" preferredHeight=\"2\" />\r\n  <Panel class=\"red:VerticalDivider\" color=\"red\" preferredWidth=\"2\" />\r\n  <Panel class=\"red:HorizontalDivider\" color=\"red\" preferredHeight=\"2\" />\r\n  <Panel class=\"green:VerticalDivider\" color=\"green\" preferredWidth=\"2\" />\r\n  <Panel class=\"green:HorizontalDivider\" color=\"green\" preferredHeight=\"2\" />\r\n  <Panel class=\"orange:VerticalDivider\" color=\"orange\" preferredWidth=\"2\" />\r\n  <Panel class=\"orange:HorizontalDivider\" color=\"orange\" preferredHeight=\"2\" />\r\n\r\n  <!-- Header -->\r\n  <Panel class=\"ColorBar\" color=\"playerColor\" preferredHeight=\"10\" />\r\n  <Panel class=\"TransactionToggleWrapper\" color=\"playerColor\" preferredHeight=\"50\" />\r\n  <Panel class=\"yellow:ColorBar\" color=\"yellow\" preferredHeight=\"10\" />\r\n  <Panel class=\"yellow:TransactionToggleWrapper\" color=\"yellow\" preferredHeight=\"50\" />\r\n  <Panel class=\"red:ColorBar\" color=\"red\" preferredHeight=\"10\" />\r\n  <Panel class=\"red:TransactionToggleWrapper\" color=\"red\" preferredHeight=\"50\" />\r\n  <Panel class=\"green:ColorBar\" color=\"green\" preferredHeight=\"10\" />\r\n  <Panel class=\"green:TransactionToggleWrapper\" color=\"green\" preferredHeight=\"50\" />\r\n  <Panel class=\"orange:ColorBar\" color=\"orange\" preferredHeight=\"10\" />\r\n  <Panel class=\"orange:TransactionToggleWrapper\" color=\"orange\" preferredHeight=\"50\" />\r\n\r\n  <!-- Body -->\r\n  <HorizontalLayout class=\"TransactionArea\" preferredHeight=\"450\" />\r\n    <Panel class=\"TransactionDropZone\" padding=\"100\" preferredWidth=\"500\" />\r\n    <VerticalLayout class=\"TransactionSettings\" padding=\"10 10 0 0\" preferredWidth=\"250\" spacing=\"15\" />\r\n      <Text class=\"TransactionSettings:SettingTitle\" preferredHeight=\"40\" />\r\n      <VerticalLayout class=\"TransactionSettings>Section\" preferredHeight=\"120\" />\r\n      <Button class=\"PlayerOwes>@Button\" preferredHeight=\"80\" />\r\n      <ToggleGroup class=\"TransactionCut>@ToggleGroup\" preferredHeight=\"80\" />\r\n    <VerticalLayout class=\"TransactionSettings Sell>Section\" preferredHeight=\"175\" />\r\n  <!-- Footer -->\r\n  <Panel class=\"SubmitWrapper\" preferredHeight=\"50\" />\r\n</Defaults>\r\n<!-- =========================================================== -->\r\n\r\n\r\n<!-- =========================================================== -->\r\n<!-- Transactions UI -->\r\n<!-- =========================================================== -->\r\n<VerticalLayout class=\"Container\" id=\"Container\">\r\n  <!-- Header -->\r\n  <Panel class=\"ColorBar\" />\r\n  <Panel class=\"TransactionToggleWrapper\">\r\n    <ToggleGroup onValueChanged=\"handleTransactionTabChanged\">\r\n      <HorizontalLayout>\r\n        <ToggleButton id=\"BuyToggleButton\" isOn=\"true\">Buy</ToggleButton>\r\n        <ToggleButton id=\"SellToggleButton\">Sell</ToggleButton>\r\n      </HorizontalLayout>\r\n    </ToggleGroup>\r\n  </Panel>\r\n\r\n  <Panel class=\"HorizontalDivider\" />\r\n\r\n  <!-- Body -->\r\n  <HorizontalLayout class=\"TransactionArea\">\r\n    <Panel class=\"TransactionDropZone\">\r\n      <Text>Drop all items and cash related to this transaction here.</Text>\r\n    </Panel>\r\n    <Panel class=\"VerticalDivider\" />\r\n\r\n    <!-- Buy Settings -->\r\n    <VerticalLayout active=\"true\" class=\"Buy TransactionSettings\" id=\"BuySettings\">\r\n      <VerticalLayout class=\"PlayerOwes Section\">\r\n        <Text class=\"SettingTitle\" id=\"PlayerOwesTitleText\">Player Owes</Text>\r\n        <Text id=\"PlayerOwesText\" fontSize=\"36\">0c</Text>\r\n      </VerticalLayout>\r\n      <Panel class=\"HorizontalDivider\" />\r\n      <VerticalLayout class=\"TransactionCut Section\">\r\n        <Text class=\"SettingTitle\" id=\"FactoryGetsText\">Factory Gets: 0c</Text>\r\n        <ToggleGroup preferredHeight=\"80\" onValueChanged=\"handleFactoryChanged\">\r\n          <TableLayout>\r\n            <Row>\r\n              <Cell columnSpan=\"2\"><ToggleButton selected=\"true\">None</ToggleButton></Cell>\r\n            </Row>\r\n            <Row>\r\n              <Cell><ToggleButton>Yellow</ToggleButton></Cell>\r\n              <Cell><ToggleButton>Red</ToggleButton></Cell>\r\n            </Row>\r\n            <Row>\r\n              <Cell><ToggleButton>Green</ToggleButton></Cell>\r\n              <Cell><ToggleButton>Orange</ToggleButton></Cell>\r\n            </Row>\r\n          </TableLayout>\r\n        </ToggleGroup>\r\n      </VerticalLayout>\r\n      <Panel class=\"HorizontalDivider\" />\r\n      <VerticalLayout class=\"TransactionCut\">\r\n        <Text class=\"SettingTitle\" id=\"SpaceportGetsTextBuy\">Spaceport Gets: 0c</Text>\r\n        <ToggleGroup preferredHeight=\"80\" onValueChanged=\"handleSpaceportChanged\">\r\n          <TableLayout>\r\n            <Row>\r\n              <Cell columnSpan=\"2\"><ToggleButton selected=\"true\">None</ToggleButton></Cell>\r\n            </Row>\r\n            <Row>\r\n              <Cell><ToggleButton>Yellow</ToggleButton></Cell>\r\n              <Cell><ToggleButton>Red</ToggleButton></Cell>\r\n            </Row>\r\n            <Row>\r\n              <Cell><ToggleButton>Green</ToggleButton></Cell>\r\n              <Cell><ToggleButton>Orange</ToggleButton></Cell>\r\n            </Row>\r\n          </TableLayout>\r\n        </ToggleGroup>\r\n      </VerticalLayout>\r\n    </VerticalLayout>\r\n    <!-- =========================================================== -->\r\n\r\n    <!-- Sell Settings -->\r\n    <VerticalLayout active=\"false\" class=\"Sell TransactionSettings\" id=\"SellSettings\">\r\n      <VerticalLayout class=\"PlayerGets Section\">\r\n        <Text class=\"SettingTitle\">Player Gets:</Text>\r\n        <Text id=\"PlayerGetsText\" fontSize=\"36\">0c</Text>\r\n      </VerticalLayout>\r\n      <Panel class=\"HorizontalDivider\" />\r\n      <VerticalLayout class=\"TransactionCut Section\">\r\n        <Text class=\"SettingTitle\" id=\"SpaceportGetsTextSell\">Spaceport Gets: 0c</Text>\r\n        <ToggleGroup preferredHeight=\"80\" onValueChanged=\"handleSpaceportChanged\">\r\n          <TableLayout>\r\n            <Row>\r\n              <Cell columnSpan=\"2\"><ToggleButton selected=\"true\">None</ToggleButton></Cell>\r\n            </Row>\r\n            <Row>\r\n              <Cell><ToggleButton>Yellow</ToggleButton></Cell>\r\n              <Cell><ToggleButton>Red</ToggleButton></Cell>\r\n            </Row>\r\n            <Row>\r\n              <Cell><ToggleButton>Green</ToggleButton></Cell>\r\n              <Cell><ToggleButton>Orange</ToggleButton></Cell>\r\n            </Row>\r\n          </TableLayout>\r\n        </ToggleGroup>\r\n      </VerticalLayout>\r\n    </VerticalLayout>\r\n  </HorizontalLayout>\r\n  <!-- =========================================================== -->\r\n\r\n  <Panel class=\"HorizontalDivider\" />\r\n\r\n  <!-- Footer -->\r\n  <Panel class=\"SubmitWrapper\">\r\n    <Button class=\"SubmitButton\" id=\"SubmitButton\" interactable=\"false\" onClick=\"handleSubmitClicked\">Submit</Button>\r\n  </Panel>\r\n</VerticalLayout>\r\n\n<!-- include lua/components/transaction_tablet/transactionTablet.xml -->"
    },
    {
      "GUID": "a85470",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 7.5,
        "posY": 1.075,
        "posZ": 28.5,
        "rotX": 3.993545E-08,
        "rotY": 0.00122138683,
        "rotZ": 2.26077873E-06,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Spaceport Deeds",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "deed",
        "spaceport"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "a58b3a",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 7.500002,
            "posY": 1.17363894,
            "posZ": 28.0000057,
            "rotX": -0.00157621212,
            "rotY": 179.998871,
            "rotZ": 0.0006025468,
            "scaleX": 0.75,
            "scaleY": 1.0,
            "scaleZ": 0.75
          },
          "Nickname": "Spaceport Deed",
          "Description": "",
          "GMNotes": "200",
          "ColorDiffuse": {
            "r": 0.181923866,
            "g": 0.290936977,
            "b": 0.176892489
          },
          "Tags": [
            "deed",
            "scoring",
            "spaceport"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_spaceport.png",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_spaceport.png",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Spaceport Deed.a58b3a.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Spaceport Deed.a58b3a.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Spaceport Deed.a58b3a.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "5ab2ed",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.6167586E-06,
            "posY": 6.16666651,
            "posZ": 0.0133336373,
            "rotX": 90.0,
            "rotY": 180.012848,
            "rotZ": 0.0,
            "scaleX": 0.5,
            "scaleY": 0.6666666,
            "scaleZ": 5.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.181924075,
            "g": 0.290937215,
            "b": 0.1768927
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_spaceport.png",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_spaceport.png",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "53169d",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 10.50933,
        "posY": 1.075,
        "posZ": 28.5201111,
        "rotX": 3.53262323E-07,
        "rotY": 0.00111946068,
        "rotZ": 2.39171172E-08,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "1 Credit",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0001"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "09e9ad",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 10.5,
            "posY": 1.17130888,
            "posZ": 28.5000038,
            "rotX": -0.00086240255,
            "rotY": 179.998856,
            "rotZ": -1.23741775E-05,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "1",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0001",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 1,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0001.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0001.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.09e9ad.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.09e9ad.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.09e9ad.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "d13c9c",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.6338704E-06,
            "posY": 6.16666555,
            "posZ": -0.000110611138,
            "rotX": 90.0,
            "rotY": 180.00502,
            "rotZ": 0.0,
            "scaleX": 0.285714269,
            "scaleY": 1.0,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0001.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0001.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "4cac35",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 13.5093307,
        "posY": 1.07499993,
        "posZ": 28.5201111,
        "rotX": 2.559667E-07,
        "rotY": 0.0137714073,
        "rotZ": -1.05973118E-06,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "5 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0005"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "89b3c1",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 13.75,
            "posY": 1.17130148,
            "posZ": 28.25,
            "rotX": -0.000107070788,
            "rotY": 179.986221,
            "rotZ": 9.50010531E-07,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "5",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0005",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 5,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0005.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0005.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.89b3c1.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.89b3c1.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.89b3c1.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "595ed5",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.11169936E-06,
            "posY": 6.16666651,
            "posZ": -0.000110613051,
            "rotX": 90.0,
            "rotY": 180.002045,
            "rotZ": 0.0,
            "scaleX": 0.285714269,
            "scaleY": 1.0,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0005.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0005.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "4c3f69",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 16.509325,
        "posY": 1.075,
        "posZ": 28.5201111,
        "rotX": -2.65266E-07,
        "rotY": 0.0253932029,
        "rotZ": -6.29679732E-07,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "10 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0010"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "f3cfbf",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 16.75,
            "posY": 1.17130935,
            "posZ": 28.2500038,
            "rotX": -0.0009807635,
            "rotY": 179.974609,
            "rotZ": 2.08277652E-05,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "10",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0010",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 10,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0010.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0010.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.f3cfbf.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.f3cfbf.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.f3cfbf.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "128397",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 4.39437144E-06,
            "posY": 6.16666555,
            "posZ": -0.00011067772,
            "rotX": 90.0,
            "rotY": 179.990463,
            "rotZ": 0.0,
            "scaleX": 0.285714358,
            "scaleY": 1.00000012,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0010.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0010.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "eb2d20",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 19.5093269,
        "posY": 1.075,
        "posZ": 28.5201111,
        "rotX": 6.409737E-08,
        "rotY": 0.0252972059,
        "rotZ": -5.59690648E-07,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "50 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0050"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "718eb4",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 19.75,
            "posY": 1.17130625,
            "posZ": 28.2499962,
            "rotX": 0.0006099155,
            "rotY": 179.97464,
            "rotZ": -9.19301E-06,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "50",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0050",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 50,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0050.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0050.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.718eb4.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.718eb4.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.718eb4.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "b0a051",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 2.20682182E-06,
            "posY": 6.16666555,
            "posZ": -0.000110590605,
            "rotX": 90.0,
            "rotY": 179.99054,
            "rotZ": 0.0,
            "scaleX": 0.285714358,
            "scaleY": 1.00000012,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0050.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0050.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "0c0adc",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 22.5093269,
        "posY": 1.075,
        "posZ": 28.5201225,
        "rotX": -1.08351435E-06,
        "rotY": 0.0137083,
        "rotZ": 1.44425758E-06,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "100 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0100"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "1ef7d8",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 22.5,
            "posY": 1.17130625,
            "posZ": 28.4999962,
            "rotX": 0.0006139445,
            "rotY": 179.9863,
            "rotZ": -6.296809E-06,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "100",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0100",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 100,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0100.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0100.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.1ef7d8.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.1ef7d8.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.1ef7d8.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "bf40bb",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 5.46391175E-06,
            "posY": 6.16666555,
            "posZ": -0.000122029523,
            "rotX": 90.0,
            "rotY": 180.003342,
            "rotZ": 0.0,
            "scaleX": 0.285714269,
            "scaleY": 1.0,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0100.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0100.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "e95e2b",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 25.5093269,
        "posY": 1.07499993,
        "posZ": 28.5201225,
        "rotX": 1.85768556E-06,
        "rotY": 359.9649,
        "rotZ": 3.782701E-07,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "500 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0500"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "aaaa80",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 25.5,
            "posY": 1.17130673,
            "posZ": 28.4999943,
            "rotX": 0.0006665823,
            "rotY": 180.0351,
            "rotZ": -1.29832142E-05,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "500",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0500",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 500,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0500.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0500.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.aaaa80.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.aaaa80.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.aaaa80.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "2091d7",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 5.40575047E-06,
            "posY": 6.16666651,
            "posZ": -0.000122064426,
            "rotX": 90.0,
            "rotY": 180.04155,
            "rotZ": 0.0,
            "scaleX": 0.285714418,
            "scaleY": 0.9999996,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0500.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0500.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "a0d7c4",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": 28.5093269,
        "posY": 1.07499993,
        "posZ": 28.5201111,
        "rotX": 7.14861756E-07,
        "rotY": 0.0137768621,
        "rotZ": -5.58489546E-07,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "1000 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m1000"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "48141b",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 28.75,
            "posY": 1.1713084,
            "posZ": 28.2499943,
            "rotX": 0.0008773648,
            "rotY": 179.986237,
            "rotZ": -1.33737849E-05,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "1000",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m1000",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 1000,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_1000.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_1000.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.48141b.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.48141b.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.48141b.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "5204dd",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.55628754E-08,
            "posY": 6.16666651,
            "posZ": -0.000110607492,
            "rotX": 90.0,
            "rotY": 180.002045,
            "rotZ": 0.0,
            "scaleX": 0.285714269,
            "scaleY": 1.0,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_1000.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_1000.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "d806bf",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -28.4995861,
        "posY": 1.075,
        "posZ": 28.49953,
        "rotX": 1.19556053E-05,
        "rotY": -0.000354607153,
        "rotZ": -2.75827756E-06,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "1000 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m1000"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "48141b",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -28.2499542,
            "posY": 1.179215,
            "posZ": 28.2523823,
            "rotX": 359.1253,
            "rotY": 180.000092,
            "rotZ": 0.0129373977,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "1000",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m1000",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 1000,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_1000.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_1000.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.48141b.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.48141b.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.48141b.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "5204dd",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.55628754E-08,
            "posY": 6.16666651,
            "posZ": -0.000110607492,
            "rotX": 90.0,
            "rotY": 180.002045,
            "rotZ": 0.0,
            "scaleX": 0.285714269,
            "scaleY": 1.0,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_1000.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_1000.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "3a7444",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -13.4995127,
        "posY": 1.075,
        "posZ": 28.5,
        "rotX": 2.89997388E-06,
        "rotY": 0.007996177,
        "rotZ": 1.88424437E-07,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "5 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0005"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "89b3c1",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -13.49995,
            "posY": 1.17602277,
            "posZ": 28.5018463,
            "rotX": 359.488281,
            "rotY": 179.986435,
            "rotZ": 0.004905499,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "5",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0005",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 5,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0005.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0005.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.89b3c1.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.89b3c1.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.89b3c1.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "595ed5",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.11169936E-06,
            "posY": 6.16666651,
            "posZ": -0.000110613051,
            "rotX": 90.0,
            "rotY": 180.002045,
            "rotZ": 0.0,
            "scaleX": 0.285714269,
            "scaleY": 1.0,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0005.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0005.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "a1e300",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -16.5,
        "posY": 1.07499993,
        "posZ": 28.5,
        "rotX": 1.32732737E-07,
        "rotY": 0.025393296,
        "rotZ": 1.11857922E-07,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "10 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0010"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "f3cfbf",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -16.499958,
            "posY": 1.17645276,
            "posZ": 28.50197,
            "rotX": 359.437134,
            "rotY": 179.97438,
            "rotZ": 0.0122690881,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "10",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0010",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 10,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0010.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0010.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.f3cfbf.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.f3cfbf.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.f3cfbf.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "128397",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 4.39437144E-06,
            "posY": 6.16666555,
            "posZ": -0.00011067772,
            "rotX": 90.0,
            "rotY": 179.990463,
            "rotZ": 0.0,
            "scaleX": 0.285714358,
            "scaleY": 1.00000012,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0010.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0010.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "9d3baf",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -19.5,
        "posY": 1.07499993,
        "posZ": 28.5,
        "rotX": -3.01035321E-08,
        "rotY": 0.02529731,
        "rotZ": 3.160939E-07,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "50 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0050"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "718eb4",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -19.49996,
            "posY": 1.17684948,
            "posZ": 28.5021114,
            "rotX": 359.392426,
            "rotY": 179.98819,
            "rotZ": 0.009673451,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "50",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0050",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 50,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0050.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0050.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.718eb4.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.718eb4.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.718eb4.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "b0a051",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 2.20682182E-06,
            "posY": 6.16666555,
            "posZ": -0.000110590605,
            "rotX": 90.0,
            "rotY": 179.99054,
            "rotZ": 0.0,
            "scaleX": 0.285714358,
            "scaleY": 1.00000012,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0050.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0050.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "166ccd",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -7.5,
        "posY": 1.075,
        "posZ": 28.5,
        "rotX": -5.314533E-09,
        "rotY": 0.00526348036,
        "rotZ": 1.92442755E-07,
        "scaleX": 1.5,
        "scaleY": 0.15,
        "scaleZ": 1.5
      },
      "Nickname": "Spaceport Deeds",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "deed",
        "spaceport"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cylinder_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "a58b3a",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -7.25000429,
            "posY": 1.177041,
            "posZ": 28.2514477,
            "rotX": 359.823059,
            "rotY": 179.996323,
            "rotZ": 0.06767476,
            "scaleX": 0.75,
            "scaleY": 1.0,
            "scaleZ": 0.75
          },
          "Nickname": "Spaceport Deed",
          "Description": "",
          "GMNotes": "200",
          "ColorDiffuse": {
            "r": 0.1819239,
            "g": 0.290937,
            "b": 0.176892519
          },
          "Tags": [
            "deed",
            "scoring",
            "spaceport"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_spaceport.png",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_spaceport.png",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Spaceport Deed.a58b3a.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Spaceport Deed.a58b3a.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n  self.value = 0\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Spaceport Deed.a58b3a.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "5ab2ed",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.6167586E-06,
            "posY": 6.16666651,
            "posZ": 0.0133336373,
            "rotX": 90.0,
            "rotY": 180.012848,
            "rotZ": 0.0,
            "scaleX": 0.5,
            "scaleY": 0.6666666,
            "scaleZ": 5.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.181924075,
            "g": 0.290937215,
            "b": 0.1768927
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_spaceport.png",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/deeds/deed_spaceport.png",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "db8586",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -22.5,
        "posY": 1.075,
        "posZ": 28.5,
        "rotX": -8.593707E-09,
        "rotY": 0.0137083614,
        "rotZ": 4.82530247E-08,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "100 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0100"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "1ef7d8",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -22.49995,
            "posY": 1.17705524,
            "posZ": 28.5022564,
            "rotX": 359.375336,
            "rotY": 179.986755,
            "rotZ": 0.006553576,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "100",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0100",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 100,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0100.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0100.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.1ef7d8.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.1ef7d8.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.1ef7d8.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "bf40bb",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 5.46391175E-06,
            "posY": 6.16666555,
            "posZ": -0.000122029523,
            "rotX": 90.0,
            "rotY": 180.003342,
            "rotZ": 0.0,
            "scaleX": 0.285714269,
            "scaleY": 1.0,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0100.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0100.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "1f041f",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -25.4995861,
        "posY": 1.075,
        "posZ": 28.4995289,
        "rotX": -7.52162E-07,
        "rotY": 359.988922,
        "rotZ": -3.18493363E-07,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "500 Credits",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0500"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "aaaa80",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -25.4999542,
            "posY": 1.1774987,
            "posZ": 28.5023823,
            "rotX": 359.321777,
            "rotY": 180.010956,
            "rotZ": 0.0128104221,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "500",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0500",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 500,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0500.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0500.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.aaaa80.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.aaaa80.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.aaaa80.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "2091d7",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 5.40575047E-06,
            "posY": 6.16666651,
            "posZ": -0.000122064426,
            "rotX": 90.0,
            "rotY": 180.04155,
            "rotZ": 0.0,
            "scaleX": 0.285714418,
            "scaleY": 0.9999996,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0500.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0500.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "aa5739",
      "Name": "Custom_Model_Infinite_Bag",
      "Transform": {
        "posX": -10.4995832,
        "posY": 1.075,
        "posZ": 28.4995365,
        "rotX": 1.07078486E-05,
        "rotY": -0.00167723058,
        "rotZ": -5.14236535E-06,
        "scaleX": 1.75,
        "scaleY": 0.15,
        "scaleZ": 1.0
      },
      "Nickname": "1 Credit",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.360778868,
        "g": 0.360778868,
        "b": 0.360778868
      },
      "Tags": [
        "bag",
        "credits",
        "m0001"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/cube_beveled.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 2,
        "TypeIndex": 7,
        "CastShadows": true
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "ContainedObjects": [
        {
          "GUID": "09e9ad",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -10.4999933,
            "posY": 1.17568934,
            "posZ": 28.5017853,
            "rotX": 359.504242,
            "rotY": 179.998917,
            "rotZ": 359.992981,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "credits",
          "Description": "",
          "GMNotes": "1",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "Tags": [
            "credits",
            "m0001",
            "scoring"
          ],
          "LayoutGroupSortIndex": 0,
          "Value": 1,
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0001.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0001.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"credits.09e9ad.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"credits.09e9ad.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/value_tiles/valueTile\")\r\n\nend)\n__bundle_register(\"lua/components/value_tiles/valueTile\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal stringHelpers = require(\"lua/utils/stringHelpers\")\r\n\r\nfunction onLoad()\r\n  setTileValue()\r\nend\r\n\r\nfunction onSpawn()\r\n  setTileValue()\r\nend\r\n\r\nfunction setTileValue()\r\n  local value = stringHelpers.stringToNum(self.getGMNotes())\r\n\r\n  -- For calculating actual value\r\n  self.setVar('value', value)\r\n\r\n  -- For tooltip only\r\n  if (self.hasTag('credits')) then\r\n    self.value = value\r\n  end\r\n\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/stringHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---@param str string\r\n---@return integer\r\nlocal function stringToNum(str)\r\n  local numStr, _ = str:gsub('%D+', '')\r\n  local num = tonumber(numStr)\r\n  return num and num or 0\r\nend\r\n\r\nreturn {\r\n  stringToNum = stringToNum,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"credits.09e9ad.lua\")",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ],
      "ChildObjects": [
        {
          "GUID": "d13c9c",
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.6338704E-06,
            "posY": 6.16666555,
            "posZ": -0.000110611138,
            "rotX": 90.0,
            "rotY": 180.00502,
            "rotZ": 0.0,
            "scaleX": 0.285714269,
            "scaleY": 1.0,
            "scaleZ": 3.333333
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.586717665,
            "g": 0.4901995,
            "b": 0.6498257
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": true,
          "CustomImage": {
            "ImageURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0001.jpg",
            "ImageSecondaryURL": "https://github.com/greeze/tts_mov/raw/main/assets/money/money_0001.jpg",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 0,
              "Thickness": 0.1,
              "Stackable": true,
              "Stretch": true
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      ]
    },
    {
      "GUID": "25cd30",
      "Name": "CardCustom",
      "Transform": {
        "posX": -36.5,
        "posY": 1.01360488,
        "posZ": -39.5,
        "rotX": -5.2477322E-08,
        "rotY": 180.009491,
        "rotZ": -2.14331912E-08,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "Scout",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "card",
        "player",
        "yellow"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": false,
      "CardID": 2000,
      "SidewaysCard": false,
      "CustomDeck": {
        "20": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_scout_yellow.jpg",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_scout_yellow.jpg",
          "NumWidth": 1,
          "NumHeight": 1,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 1
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "States": {
        "2": {
          "GUID": "6f439d",
          "Name": "CardCustom",
          "Transform": {
            "posX": -36.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": -5.2477322E-08,
            "rotY": 180.009491,
            "rotZ": -2.14331912E-08,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Clipper",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 2100,
          "SidewaysCard": false,
          "CustomDeck": {
            "21": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_clipper_yellow.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_clipper_yellow.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        "3": {
          "GUID": "14b32b",
          "Name": "CardCustom",
          "Transform": {
            "posX": -36.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": -5.2477322E-08,
            "rotY": 180.009491,
            "rotZ": -2.14331912E-08,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Transport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 2200,
          "SidewaysCard": false,
          "CustomDeck": {
            "22": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_transport_yellow.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_transport_yellow.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        "4": {
          "GUID": "a22f79",
          "Name": "CardCustom",
          "Transform": {
            "posX": -36.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": -5.2477322E-08,
            "rotY": 180.009491,
            "rotZ": -2.14331912E-08,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Freighter",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 2300,
          "SidewaysCard": false,
          "CustomDeck": {
            "23": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_freighter_yellow.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_freighter_yellow.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      }
    },
    {
      "GUID": "fa76ee",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -45.7499046,
        "posY": 0.999936342,
        "posZ": -41.2500877,
        "rotX": 0.0005008093,
        "rotY": 90.04588,
        "rotZ": -0.001762322,
        "scaleX": 0.66,
        "scaleY": 1.0,
        "scaleZ": 0.66
      },
      "Nickname": "Dice Roller",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249998778,
        "g": 0.249998778,
        "b": 0.249998778
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/rect_bowl_8x6.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/rect_bowl_8x6.obj",
        "Convex": false,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Dice Roller.fa76ee.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Dice Roller.fa76ee.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/dice_rollers/diceRoller\")\r\n\nend)\n__bundle_register(\"lua/components/dice_rollers/diceRoller\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function getHitObjectRef(hitObj)\r\n  return hitObj.hit_object\r\nend\r\n\r\nlocal function isDice(obj)\r\n  return obj.name == 'Die_6'\r\nend\r\n\r\nlocal function rollDie(obj)\r\n  obj.roll()\r\nend\r\n\r\nlocal function rollDice()\r\n  local hitObjs = Physics.cast({\r\n    type = 3,\r\n    origin = self.getPosition(),\r\n    direction = {0, 1, 0},\r\n    size = self.getBounds().size,\r\n  })\r\n\r\n  local hitRefs = table.map(hitObjs, getHitObjectRef)\r\n  local dice = table.filter(hitRefs, isDice)\r\n  table.forEach(dice, rollDie)\r\nend\r\n\r\nfunction handleClick()\r\n  rollDice()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Dice Roller.fa76ee.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/dice_rollers/diceRoller.xml -->\n<Panel\r\n  width=\"550\"\r\n  height=\"750\"\r\n  position=\"200 0 -11\"\r\n  rotation=\"0 0 90\"\r\n>\r\n  <Button\r\n    fontSize=\"72\"\r\n    textColor=\"#FFFFFF\"\r\n    colors=\"#666666|#999999|#333333|#000000\"\r\n    fontStyle=\"bold\"\r\n    width=\"400\"\r\n    height=\"100\"\r\n    position=\"0 -290 0\"\r\n    onClick=\"handleClick\"\r\n  >\r\n    Roll Dice\r\n  </Button>\r\n</Panel>\r\n\n<!-- include lua/components/dice_rollers/diceRoller.xml -->"
    },
    {
      "GUID": "ab78e5",
      "Name": "CardCustom",
      "Transform": {
        "posX": -12.5,
        "posY": 1.01360488,
        "posZ": -39.5,
        "rotX": -1.26039312E-08,
        "rotY": 180.001556,
        "rotZ": -6.46558451E-09,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "Scout",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.713235259,
        "g": 0.713235259,
        "b": 0.713235259
      },
      "Tags": [
        "card",
        "player",
        "red"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": true,
      "Hands": false,
      "CardID": 1900,
      "SidewaysCard": false,
      "CustomDeck": {
        "19": {
          "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_scout_red.jpg",
          "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_scout_red.jpg",
          "NumWidth": 1,
          "NumHeight": 1,
          "BackIsHidden": true,
          "UniqueBack": false,
          "Type": 1
        }
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "States": {
        "2": {
          "GUID": "6f439d",
          "Name": "CardCustom",
          "Transform": {
            "posX": -12.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": -1.26039312E-08,
            "rotY": 180.001556,
            "rotZ": -6.46558451E-09,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Clipper",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 2100,
          "SidewaysCard": false,
          "CustomDeck": {
            "21": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_clipper_red.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_clipper_red.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        "3": {
          "GUID": "14b32b",
          "Name": "CardCustom",
          "Transform": {
            "posX": -12.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": -1.26039312E-08,
            "rotY": 180.001556,
            "rotZ": -6.46558451E-09,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Transport",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 2200,
          "SidewaysCard": false,
          "CustomDeck": {
            "22": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_transport_red.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_transport_red.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        },
        "4": {
          "GUID": "a22f79",
          "Name": "CardCustom",
          "Transform": {
            "posX": -12.5,
            "posY": 1.01360488,
            "posZ": -39.5,
            "rotX": -1.26039312E-08,
            "rotY": 180.001556,
            "rotZ": -6.46558451E-09,
            "scaleX": 3.0,
            "scaleY": 1.0,
            "scaleZ": 3.0
          },
          "Nickname": "Freighter",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.713235259,
            "g": 0.713235259,
            "b": 0.713235259
          },
          "LayoutGroupSortIndex": 0,
          "Value": 0,
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "MeasureMovement": false,
          "DragSelectable": true,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": true,
          "Hands": false,
          "CardID": 2300,
          "SidewaysCard": false,
          "CustomDeck": {
            "23": {
              "FaceURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_freighter_red.jpg",
              "BackURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_mat_freighter_red.jpg",
              "NumWidth": 1,
              "NumHeight": 1,
              "BackIsHidden": true,
              "UniqueBack": false,
              "Type": 1
            }
          },
          "LuaScript": "",
          "LuaScriptState": "",
          "XmlUI": ""
        }
      }
    },
    {
      "GUID": "fa06c4",
      "Name": "Die_6",
      "Transform": {
        "posX": -22.2499619,
        "posY": 1.43013215,
        "posZ": -41.7500267,
        "rotX": 90.0,
        "rotY": 0.0160938,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "9f9424",
      "Name": "Die_6",
      "Transform": {
        "posX": -21.2499485,
        "posY": 1.43012416,
        "posZ": -41.750145,
        "rotX": 90.0,
        "rotY": 359.986176,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "a6f34d",
      "Name": "Die_6",
      "Transform": {
        "posX": -21.7499657,
        "posY": 1.430156,
        "posZ": -40.75017,
        "rotX": 90.0,
        "rotY": 0.0194694139,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "54d6a1",
      "Name": "Custom_Model",
      "Transform": {
        "posX": -21.7502842,
        "posY": 0.9999418,
        "posZ": -41.2501831,
        "rotX": 0.000458686671,
        "rotY": 90.03686,
        "rotZ": -0.00161163567,
        "scaleX": 0.66,
        "scaleY": 1.0,
        "scaleZ": 0.66
      },
      "Nickname": "Dice Roller",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249998778,
        "g": 0.249998778,
        "b": 0.249998778
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/rect_bowl_8x6.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/rect_bowl_8x6.obj",
        "Convex": false,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Dice Roller.54d6a1.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Dice Roller.54d6a1.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/dice_rollers/diceRoller\")\r\n\nend)\n__bundle_register(\"lua/components/dice_rollers/diceRoller\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function getHitObjectRef(hitObj)\r\n  return hitObj.hit_object\r\nend\r\n\r\nlocal function isDice(obj)\r\n  return obj.name == 'Die_6'\r\nend\r\n\r\nlocal function rollDie(obj)\r\n  obj.roll()\r\nend\r\n\r\nlocal function rollDice()\r\n  local hitObjs = Physics.cast({\r\n    type = 3,\r\n    origin = self.getPosition(),\r\n    direction = {0, 1, 0},\r\n    size = self.getBounds().size,\r\n  })\r\n\r\n  local hitRefs = table.map(hitObjs, getHitObjectRef)\r\n  local dice = table.filter(hitRefs, isDice)\r\n  table.forEach(dice, rollDie)\r\nend\r\n\r\nfunction handleClick()\r\n  rollDice()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Dice Roller.54d6a1.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/dice_rollers/diceRoller.xml -->\n<Panel\r\n  width=\"550\"\r\n  height=\"750\"\r\n  position=\"200 0 -11\"\r\n  rotation=\"0 0 90\"\r\n>\r\n  <Button\r\n    fontSize=\"72\"\r\n    textColor=\"#FFFFFF\"\r\n    colors=\"#666666|#999999|#333333|#000000\"\r\n    fontStyle=\"bold\"\r\n    width=\"400\"\r\n    height=\"100\"\r\n    position=\"0 -290 0\"\r\n    onClick=\"handleClick\"\r\n  >\r\n    Roll Dice\r\n  </Button>\r\n</Panel>\r\n\n<!-- include lua/components/dice_rollers/diceRoller.xml -->"
    },
    {
      "GUID": "dd9abc",
      "Name": "Die_6",
      "Transform": {
        "posX": -20.25,
        "posY": 1.3302002,
        "posZ": -37.25,
        "rotX": 90.0,
        "rotY": 0.5032253,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "98a62d",
      "Name": "Die_6",
      "Transform": {
        "posX": 2.75005674,
        "posY": 1.4301188,
        "posZ": -41.75009,
        "rotX": 90.0,
        "rotY": 0.0144414762,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "b3a3c9",
      "Name": "Die_6",
      "Transform": {
        "posX": 3.75005651,
        "posY": 1.43010926,
        "posZ": -41.7498627,
        "rotX": 90.0,
        "rotY": 0.123253569,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "15ec65",
      "Name": "Die_6",
      "Transform": {
        "posX": 3.25005937,
        "posY": 1.43014777,
        "posZ": -40.750206,
        "rotX": 90.0,
        "rotY": 0.006310772,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "cfb387",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 3.24989963,
        "posY": 0.9999305,
        "posZ": -41.2499733,
        "rotX": 0.0005429137,
        "rotY": 90.02673,
        "rotZ": -0.00192126189,
        "scaleX": 0.66,
        "scaleY": 1.0,
        "scaleZ": 0.66
      },
      "Nickname": "Dice Roller",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249998778,
        "g": 0.249998778,
        "b": 0.249998778
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/rect_bowl_8x6.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/rect_bowl_8x6.obj",
        "Convex": false,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Dice Roller.cfb387.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Dice Roller.cfb387.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/dice_rollers/diceRoller\")\r\n\nend)\n__bundle_register(\"lua/components/dice_rollers/diceRoller\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function getHitObjectRef(hitObj)\r\n  return hitObj.hit_object\r\nend\r\n\r\nlocal function isDice(obj)\r\n  return obj.name == 'Die_6'\r\nend\r\n\r\nlocal function rollDie(obj)\r\n  obj.roll()\r\nend\r\n\r\nlocal function rollDice()\r\n  local hitObjs = Physics.cast({\r\n    type = 3,\r\n    origin = self.getPosition(),\r\n    direction = {0, 1, 0},\r\n    size = self.getBounds().size,\r\n  })\r\n\r\n  local hitRefs = table.map(hitObjs, getHitObjectRef)\r\n  local dice = table.filter(hitRefs, isDice)\r\n  table.forEach(dice, rollDie)\r\nend\r\n\r\nfunction handleClick()\r\n  rollDice()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Dice Roller.cfb387.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/dice_rollers/diceRoller.xml -->\n<Panel\r\n  width=\"550\"\r\n  height=\"750\"\r\n  position=\"200 0 -11\"\r\n  rotation=\"0 0 90\"\r\n>\r\n  <Button\r\n    fontSize=\"72\"\r\n    textColor=\"#FFFFFF\"\r\n    colors=\"#666666|#999999|#333333|#000000\"\r\n    fontStyle=\"bold\"\r\n    width=\"400\"\r\n    height=\"100\"\r\n    position=\"0 -290 0\"\r\n    onClick=\"handleClick\"\r\n  >\r\n    Roll Dice\r\n  </Button>\r\n</Panel>\r\n\n<!-- include lua/components/dice_rollers/diceRoller.xml -->"
    },
    {
      "GUID": "6c929a",
      "Name": "Die_6",
      "Transform": {
        "posX": 4.75,
        "posY": 1.3302002,
        "posZ": -37.25,
        "rotX": 90.0,
        "rotY": 0.503229558,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "43c5ff",
      "Name": "Die_6",
      "Transform": {
        "posX": 27.7500458,
        "posY": 1.43013191,
        "posZ": -41.7501373,
        "rotX": 90.0,
        "rotY": 0.0007680756,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "336f43",
      "Name": "Die_6",
      "Transform": {
        "posX": 28.7500534,
        "posY": 1.43012393,
        "posZ": -41.75015,
        "rotX": 90.0,
        "rotY": -0.00133186369,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "f6006d",
      "Name": "Die_6",
      "Transform": {
        "posX": 28.2500381,
        "posY": 1.43015611,
        "posZ": -40.7501526,
        "rotX": 90.0,
        "rotY": -2.89948166E-05,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "7d86be",
      "Name": "Custom_Model",
      "Transform": {
        "posX": 28.2499828,
        "posY": 0.9999417,
        "posZ": -41.2499428,
        "rotX": 0.0004596324,
        "rotY": 90.0178452,
        "rotZ": -0.00161293289,
        "scaleX": 0.66,
        "scaleY": 1.0,
        "scaleZ": 0.66
      },
      "Nickname": "Dice Roller",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249998778,
        "g": 0.249998778,
        "b": 0.249998778
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/rect_bowl_8x6.obj",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "https://github.com/greeze/tts_mov/raw/main/assets/environment/rect_bowl_8x6.obj",
        "Convex": false,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Dice Roller.7d86be.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Dice Roller.7d86be.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/dice_rollers/diceRoller\")\r\n\nend)\n__bundle_register(\"lua/components/dice_rollers/diceRoller\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function getHitObjectRef(hitObj)\r\n  return hitObj.hit_object\r\nend\r\n\r\nlocal function isDice(obj)\r\n  return obj.name == 'Die_6'\r\nend\r\n\r\nlocal function rollDie(obj)\r\n  obj.roll()\r\nend\r\n\r\nlocal function rollDice()\r\n  local hitObjs = Physics.cast({\r\n    type = 3,\r\n    origin = self.getPosition(),\r\n    direction = {0, 1, 0},\r\n    size = self.getBounds().size,\r\n  })\r\n\r\n  local hitRefs = table.map(hitObjs, getHitObjectRef)\r\n  local dice = table.filter(hitRefs, isDice)\r\n  table.forEach(dice, rollDie)\r\nend\r\n\r\nfunction handleClick()\r\n  rollDice()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\nreturn __bundle_require(\"Dice Roller.7d86be.lua\")",
      "LuaScriptState": "",
      "XmlUI": "<!-- include lua/components/dice_rollers/diceRoller.xml -->\n<Panel\r\n  width=\"550\"\r\n  height=\"750\"\r\n  position=\"200 0 -11\"\r\n  rotation=\"0 0 90\"\r\n>\r\n  <Button\r\n    fontSize=\"72\"\r\n    textColor=\"#FFFFFF\"\r\n    colors=\"#666666|#999999|#333333|#000000\"\r\n    fontStyle=\"bold\"\r\n    width=\"400\"\r\n    height=\"100\"\r\n    position=\"0 -290 0\"\r\n    onClick=\"handleClick\"\r\n  >\r\n    Roll Dice\r\n  </Button>\r\n</Panel>\r\n\n<!-- include lua/components/dice_rollers/diceRoller.xml -->"
    },
    {
      "GUID": "69d610",
      "Name": "Die_6",
      "Transform": {
        "posX": 29.75,
        "posY": 1.3302002,
        "posZ": -37.25,
        "rotX": 90.0,
        "rotY": 0.5032303,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": "",
      "RotationValues": [
        {
          "Value": "1",
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "2",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": "3",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": "4",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": "5",
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": "6",
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "GUID": "85a2c2",
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": -22.0,
        "posY": 1.00000012,
        "posZ": -26.5,
        "rotX": 5.99521741E-07,
        "rotY": 1.34268575E-05,
        "rotZ": -2.216608E-07,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Discards",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "discard"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_tablet_8x6.obj",
        "DiffuseURL": "https://raw.githubusercontent.com/greeze/tts_mov/main/assets/environment/discard_tablet_8x6.png",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 6,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "Bag": {
        "Order": 0
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Discards.85a2c2.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Discards.85a2c2.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/discard/discard\")\r\n\nend)\n__bundle_register(\"lua/components/discard/discard\", function(require, _LOADED, __bundle_register, __bundle_modules)\nfunction tryObjectEnter()\r\n  return true\r\nend\r\n\nend)\nreturn __bundle_require(\"Discards.85a2c2.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "60d535",
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": 22.5,
        "posY": 0.99999994,
        "posZ": -26.5,
        "rotX": -7.334748E-08,
        "rotY": 1.343325E-05,
        "rotZ": 9.326344E-08,
        "scaleX": 0.75,
        "scaleY": 1.0,
        "scaleZ": 0.75
      },
      "Nickname": "Discards",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Tags": [
        "discard"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "https://github.com/greeze/tts_mov/raw/main/assets/players/player_tablet_8x6.obj",
        "DiffuseURL": "https://raw.githubusercontent.com/greeze/tts_mov/main/assets/environment/discard_tablet_8x6.png",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 6,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "Bag": {
        "Order": 0
      },
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Discards.60d535.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Discards.60d535.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/discard/discard\")\r\n\nend)\n__bundle_register(\"lua/components/discard/discard\", function(require, _LOADED, __bundle_register, __bundle_modules)\nfunction tryObjectEnter()\r\n  return true\r\nend\r\n\nend)\nreturn __bundle_require(\"Discards.60d535.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "25e029",
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": -2.0,
        "posY": 2.5,
        "posZ": -26.57,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 7.6,
        "scaleY": 6.0,
        "scaleZ": 6.5
      },
      "Nickname": "Transaction Zone",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "card",
        "credits",
        "culture",
        "deed",
        "demand",
        "good",
        "passenger",
        "tablet",
        "transactions"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LuaScript": "-- Bundled by luabundle {\"rootModuleName\":\"Transaction Zone.25e029.lua\",\"version\":\"1.6.0\"}\nlocal __bundle_require, __bundle_loaded, __bundle_register, __bundle_modules = (function(superRequire)\n\tlocal loadingPlaceholder = {[{}] = true}\n\n\tlocal register\n\tlocal modules = {}\n\n\tlocal require\n\tlocal loaded = {}\n\n\tregister = function(name, body)\n\t\tif not modules[name] then\n\t\t\tmodules[name] = body\n\t\tend\n\tend\n\n\trequire = function(name)\n\t\tlocal loadedModule = loaded[name]\n\n\t\tif loadedModule then\n\t\t\tif loadedModule == loadingPlaceholder then\n\t\t\t\treturn nil\n\t\t\tend\n\t\telse\n\t\t\tif not modules[name] then\n\t\t\t\tif not superRequire then\n\t\t\t\t\tlocal identifier = type(name) == 'string' and '\\\"' .. name .. '\\\"' or tostring(name)\n\t\t\t\t\terror('Tried to require ' .. identifier .. ', but no such module has been registered')\n\t\t\t\telse\n\t\t\t\t\treturn superRequire(name)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tloaded[name] = loadingPlaceholder\n\t\t\tloadedModule = modules[name](require, loaded, register, modules)\n\t\t\tloaded[name] = loadedModule\n\t\tend\n\n\t\treturn loadedModule\n\tend\n\n\treturn require, loaded, register, modules\nend)(nil)\n__bundle_register(\"Transaction Zone.25e029.lua\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/components/transaction_tablet/transactionZone\")\r\n\nend)\n__bundle_register(\"lua/components/transaction_tablet/transactionZone\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\nlocal money = require(\"lua/global/money\")\r\nlocal valueData = require(\"data/data\")\r\nlocal sumValueItems = require(\"lua/utils/sumValueItems\")\r\nlocal tagHelpers = require(\"lua/utils/tagHelpers\")\r\nlocal interactions = require(\"lua/utils/interactions\")\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isTransactionTablet(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'tablet', 'transactions' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isCash(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'credits' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isGood(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'good' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isPassenger(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'passenger', 'event' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isDemand(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'demand', 'event' })\r\nend\r\n\r\n---@param obj table\r\n---@return boolean\r\nlocal function isCultureCard(obj)\r\n  return tagHelpers.objHasAllTags(obj, { 'culture', 'card' })\r\nend\r\n\r\n---@param cashItems table[]\r\n---@return integer\r\nlocal function calculateCash(cashItems)\r\n  return sumValueItems(cashItems) or 0\r\nend\r\n\r\n--- Sets buyValue and sellValue for the given good\r\n---@param obj table\r\n---@return integer, integer, number\r\nlocal function getValuesForGood(obj)\r\n  local quantity = math.abs(obj.getQuantity())\r\n  local cultureTag = table.find(constants.CULTURE_TAGS, function(cultureTag) return obj.hasTag(cultureTag) end)\r\n  local cultureId = table.indexOf(constants.CULTURE_TAGS, cultureTag)\r\n\r\n  if (cultureId == 0) then\r\n    return 0, 0, 0\r\n  end\r\n\r\n  local cultureData = table.find(valueData.goods, function (data) return data.from == cultureId end)\r\n\r\n  local buyValue = cultureData.buy * quantity\r\n  local sellValue = cultureData.sell * quantity\r\n  local factoryValue = 0\r\n\r\n  if(obj.hasTag('factory')) then\r\n    buyValue = cultureData.factory.buy\r\n    sellValue = cultureData.factory.sell\r\n    factoryValue = buyValue * 0.5\r\n  end\r\n\r\n  return buyValue, sellValue, factoryValue\r\nend\r\n\r\n---@param goods table[]\r\n---@return integer, integer, number\r\nlocal function calculateGoodsValues(goods)\r\n  local buyTotal = 0\r\n  local sellTotal = 0\r\n  local factoryTotal = 0\r\n\r\n  table.forEach(goods, function(obj)\r\n    local buyValue, sellValue, factoryValue = getValuesForGood(obj)\r\n    buyTotal = buyTotal + buyValue\r\n    sellTotal = sellTotal + sellValue\r\n    factoryTotal = factoryTotal + factoryValue\r\n  end)\r\n\r\n  return buyTotal, sellTotal, factoryTotal\r\nend\r\n\r\n---@param passengers table[]\r\n---@return integer\r\nlocal function calculatePassengerValues(passengers)\r\n  local passengerTotal = 0\r\n  table.forEach(passengers, function (passenger)\r\n    local fullName = passenger.getName()\r\n    local _, idx = string.find(fullName, 'Passenger %- ')\r\n    local passengerName = string.sub(fullName, idx + 1)\r\n    local passengerData = table.find(valueData.passengers, function (data)\r\n      return data.name == string.lower(passengerName)\r\n    end)\r\n    if (passengerData) then\r\n      passengerTotal = passengerTotal + passengerData.value\r\n    end\r\n  end)\r\n  return passengerTotal\r\nend\r\n\r\n---@param demands table[]\r\n---@return integer\r\nlocal function calculateDemandValues(demands)\r\n  local demandTotal = 0\r\n  table.forEach(demands, function (demand)\r\n    local _, _, valStr = string.find(demand.getName(), '%+(%d%d)')\r\n    local value = valStr and tonumber(valStr) or 0\r\n    demandTotal = demandTotal + value\r\n  end)\r\n  return demandTotal\r\nend\r\n\r\nlocal function getCash(containedObjects)\r\n  return table.filter(containedObjects, isCash)\r\nend\r\n\r\nlocal function getGoods(containedObjects)\r\n  return table.filter(containedObjects, isGood)\r\nend\r\n\r\nlocal function getPassengers(containedObjects)\r\n  return table.filter(containedObjects, isPassenger)\r\nend\r\n\r\nlocal function getDemands(containedObjects)\r\n  return table.filter(containedObjects, isDemand)\r\nend\r\n\r\nlocal function getCultureCards(containedObjects)\r\n  return table.filter(containedObjects, isCultureCard)\r\nend\r\n\r\nlocal function getIou(containedObjects)\r\n  local iou = 0\r\n  local cultureCards = getCultureCards(containedObjects)\r\n  if (#cultureCards > 0) then\r\n    iou = cultureCards[1].getVar('iou') or 0\r\n  end\r\n  return iou\r\nend\r\n\r\nlocal function updateTransactionTablet()\r\n  local containedObjects = self.getObjects()\r\n  local transactionTablet = table.find(containedObjects, isTransactionTablet)\r\n\r\n  if (transactionTablet ~= nil) then\r\n    local cashItems = getCash(containedObjects)\r\n    local cashTotal = calculateCash(cashItems)\r\n\r\n    local goods = getGoods(containedObjects)\r\n    local buyTotal, sellTotal, factoryTotal = calculateGoodsValues(goods)\r\n\r\n    local passengers = getPassengers(containedObjects)\r\n    local passengerTotal = calculatePassengerValues(passengers)\r\n\r\n    local demands = getDemands(containedObjects)\r\n    local demandTotal = calculateDemandValues(demands)\r\n\r\n    local iou = getIou(containedObjects)\r\n\r\n    local playerGets = sellTotal + cashTotal + passengerTotal + demandTotal\r\n    local playerOwes = buyTotal - (cashTotal + iou)\r\n\r\n    ---@type State\r\n    local buyState = {\r\n      cashTotal = cashTotal,\r\n      playerOwes = playerOwes,\r\n      factoryGets = factoryTotal,\r\n      spaceportGets = buyTotal * 0.1,\r\n    }\r\n\r\n    ---@type State\r\n    local sellState = {\r\n      playerGets = playerGets,\r\n      spaceportGets = (sellTotal + demandTotal) * 0.1,\r\n    }\r\n\r\n    ---@type TransactionStates\r\n    local transactionStates = { buyState = buyState, sellState = sellState }\r\n\r\n    transactionTablet.call('handleNewStateFromTransactionZone', transactionStates)\r\n  end\r\nend\r\n\r\nlocal function discardItems(items, discard)\r\n  table.forEach(items, function(cashItem)\r\n    discard.putObject(cashItem)\r\n  end)\r\nend\r\n\r\nlocal function resolveBuy(player, transactionState, goods)\r\n  if (transactionState.transaction == 'buy') then\r\n    if (transactionState.playerOwes < 0) then\r\n      local playerRefund = transactionState.playerOwes * -1\r\n      money.payPlayer(playerRefund, player)\r\n    end\r\n\r\n    if (transactionState.factoryColor) then\r\n      money.payPlayer(transactionState.factoryGets, Player[transactionState.factoryColor])\r\n    end\r\n\r\n    table.forEach(goods, function(good)\r\n      -- I tried 9999, but it glitched out. 10 stacked goods is still impossibly high without cheating.\r\n      good.deal(10, player.color)\r\n    end)\r\n  end\r\nend\r\n\r\nlocal function resolveSell(player, transactionState, goods, passengers, demands)\r\n  if (transactionState.transaction == 'sell') then\r\n    money.payPlayer(transactionState.playerGets, player)\r\n\r\n    local eventStagingZone = getObjectFromGUID(constants.GUIDS.EventStagingLayoutGUID)\r\n    local eventStagingPosition = eventStagingZone.getPosition()\r\n\r\n    interactions.dealObjectsToPosition(goods, eventStagingPosition)\r\n    interactions.dealObjectsToPosition(passengers, eventStagingPosition)\r\n    interactions.dealObjectsToPosition(demands, eventStagingPosition)\r\n\r\n    Wait.time(function()\r\n      eventStagingZone.LayoutZone.layout()\r\n    end, 1)\r\n  end\r\nend\r\n\r\nlocal function resolveTransaction(player, transactionState)\r\n  local containedObjects = self.getObjects()\r\n  local cashItems = getCash(containedObjects)\r\n  local goods = getGoods(containedObjects)\r\n  local passengers = getPassengers(containedObjects)\r\n  local firstDemand = getDemands(containedObjects)[1]\r\n  local cultureCards = getCultureCards(containedObjects)\r\n  local discards = getObjectsWithTag('discard')\r\n  local discard = discards[(math.random(1, #discards))]\r\n\r\n  discardItems(cashItems, discard)\r\n  discardItems(cultureCards, discard)\r\n\r\n  resolveBuy(player, transactionState, goods)\r\n  resolveSell(player, transactionState, goods, passengers, { firstDemand })\r\n\r\n  if (transactionState.spaceportColor) then\r\n    money.payPlayer(transactionState.spaceportGets, Player[transactionState.spaceportColor])\r\n  end\r\n\r\n  updateTransactionTablet()\r\nend\r\n\r\n--- Called by transactionTablet when submit is clicked. Takes player and transactionState.\r\n---@param submitParams table\r\nfunction handleSubmit(submitParams)\r\n  local player = submitParams.player\r\n  local transactionState = submitParams.transactionState\r\n  resolveTransaction(player, transactionState)\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectEnterZone(zone)\r\n  if (zone == self) then\r\n    updateTransactionTablet()\r\n  end\r\nend\r\n\r\n---@param zone table\r\nfunction onObjectLeaveZone(zone)\r\n  if (zone == self) then\r\n    updateTransactionTablet()\r\n  end\r\nend\r\n\r\nfunction onLoad()\r\n  money.init()\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/interactions\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\n\r\nlocal function dealObjectToPosition(obj, position)\r\n  obj.setPositionSmooth(position, false, true)\r\nend\r\n\r\nlocal function dealStackToPosition(stack, position)\r\n  for i = 2, stack.getQuantity() do\r\n    stack.takeObject({ position = position })\r\n    if (stack.remainder) then\r\n      dealObjectToPosition(stack.remainder, position)\r\n    end\r\n  end\r\nend\r\n\r\nlocal function dealObjectsToPosition(objects, position)\r\n  table.forEach(objects, function (obj)\r\n    if (obj.getQuantity() == -1) then\r\n      dealObjectToPosition(obj, position)\r\n    else\r\n      dealStackToPosition(obj, position)\r\n    end\r\n  end)\r\nend\r\n\r\n--- Moves an object over a snap point, then drops it\r\n---@param obj table\r\n---@param snap table\r\nlocal function dealObjectToSnap(obj, snap)\r\n  obj.setLock(false)\r\n  local destPosition = {\r\n    x = snap.position.x,\r\n    y = snap.position.y + 1,\r\n    z = snap.position.z,\r\n  }\r\n  obj.setPositionSmooth(destPosition, false)\r\nend\r\n\r\n--- Pings an object with an arrow of the given player's color\r\n---@param obj table\r\n---@param playerColor string\r\nlocal function pingObject(obj, playerColor)\r\n  Player[playerColor].pingTable(obj.getPosition())\r\nend\r\n\r\nreturn {\r\n  dealObjectToPosition = dealObjectToPosition,\r\n  dealStackToPosition = dealStackToPosition,\r\n  dealObjectsToPosition = dealObjectsToPosition,\r\n  dealObjectToSnap = dealObjectToSnap,\r\n  pingObject = pingObject,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/table\", function(require, _LOADED, __bundle_register, __bundle_modules)\n---Turns a table into a Set of uniques\r\n---@generic V\r\n---@param tbl V[]\r\n---@return table<V, boolean>\r\nfunction table.set(tbl)\r\n  local u = { }\r\n  for _, v in ipairs(tbl)do\r\n    u[v] = true\r\n  end\r\n  return u\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@return number[] | K[]\r\nfunction table.keys(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, k)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic V\r\n---@param tbl V[] | table<string, V>\r\n---@return V[]\r\nfunction table.values(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    table.insert(out, v)\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl table<K, V>\r\n---@return table<V, K>\r\nfunction table.reverseLookup(tbl)\r\n  local out = {}\r\n  for k, v in pairs(tbl) do\r\n    out[v] = k\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return string | number\r\nfunction table.indexOf(tbl, val)\r\n  for k, v in pairs(tbl) do\r\n    if (v == val) then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param val V\r\n---@return boolean\r\nfunction table.includes(tbl, val)\r\n  return table.indexOf(tbl, val) > 0\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V | nil\r\nfunction table.find(tbl, fn)\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      return v\r\n    end\r\n  end\r\n  return nil\r\nend\r\n\r\n---Returns table of elements from tbl that satisfy fn(v)\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(val:V):boolean\r\n---@return V[]\r\nfunction table.filter(tbl, fn)\r\n  local out = {}\r\n  for _, v in pairs(tbl) do\r\n    if fn(v) then\r\n      table.insert(out, v)\r\n    end\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@param tbl V[] | table<K, V>\r\n---@param fn fun(v:V, k:K)\r\nfunction table.forEach(tbl, fn)\r\n  for k, v in pairs(tbl) do\r\n    fn(v, k)\r\n  end\r\nend\r\n\r\n---@generic V, T\r\n---@param tbl V[]\r\n---@param fn fun(val:V):T\r\n---@return T[]\r\nfunction table.map(tbl, fn)\r\n  local out = {}\r\n  local t_len = #tbl\r\n  for i = 1, t_len do\r\n    out[i] = fn(tbl[i])\r\n  end\r\n  return out\r\nend\r\n\r\n---@generic K, V\r\n---@vararg table\r\n---@return table<K, V>\r\nfunction table.merge(...)\r\n  local t0 = {}\r\n  for _, tbl in ipairs({ ... }) do\r\n    for k, v in pairs(tbl) do\r\n      t0[k] = v\r\n    end\r\n  end\r\n  return t0\r\nend\r\n\r\n---@generic K, V, T\r\n---@param tbl table<K, V>\r\n---@param fn fun(acc:T, val:V, key:K, tbl:table):T\r\n---@param init T\r\n---@return T\r\nfunction table.reduce(tbl, fn, init)\r\n  local acc = init\r\n  for k, v in pairs(tbl) do\r\n    acc = fn(acc, v, k, tbl)\r\n  end\r\n  return acc\r\nend\r\n\r\n---@param tbl number[]\r\n---@return number\r\nfunction table.sum(tbl)\r\n  return table.reduce(tbl, function(a, b) return a + b end, 0)\r\nend\r\n\nend)\n__bundle_register(\"lua/utils/tagHelpers\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given an object and a list of tagNames, returns whether all the tags exist on the object\r\n---@param obj table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function objHasAllTags(obj, tags)\r\n  if (obj == nil) then return false end\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not obj.hasTag(tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n--- Given a snapPoint and a tagName, returns whether the tag exists on the snapPoint\r\n---@param snap table\r\n---@param tag string\r\n---@return boolean\r\nlocal function snapHasTag(snap, tag)\r\n  return table.includes(snap.tags, tag)\r\nend\r\n\r\n--- Given a snapPoint and a list of tagNames, returns whether all the tags exist on the snapPoint\r\n---@param snap table\r\n---@param tags string[]\r\n---@return boolean\r\nlocal function snapHasAllTags(snap, tags)\r\n  local hasAllTags = true\r\n  table.forEach(tags, function(tag)\r\n    if (not snapHasTag(snap, tag)) then\r\n      hasAllTags = false\r\n    end\r\n  end)\r\n  return hasAllTags\r\nend\r\n\r\n\r\nreturn {\r\n  objHasAllTags = objHasAllTags,\r\n  snapHasAllTags = snapHasAllTags,\r\n  snapHasTag = snapHasTag,\r\n}\r\n\nend)\n__bundle_register(\"lua/utils/sumValueItems\", function(require, _LOADED, __bundle_register, __bundle_modules)\n--- Given a table of objects, sums the values that were assigned using `object.setVar('value', number)`\r\n---@param valueItems table[] @table of TTS objects\r\n---@param valueVarName string @string name of the numeric variable to sum, retrieved using `object.getVar('value')`. Defaults to 'value'.\r\n---@return number\r\nlocal function sumValueItems(valueItems, valueVarName)\r\n  valueVarName = valueVarName or 'value'\r\n  local values = table.map(\r\n    valueItems,\r\n    function(valueItem)\r\n      if (valueItem == nil) then return 0 end\r\n      return (valueItem.getVar(valueVarName) or 0) * math.abs(valueItem.getQuantity())\r\n    end\r\n  )\r\n  return table.sum(values)\r\nend\r\n\r\nreturn sumValueItems\r\n\nend)\n__bundle_register(\"data/data\", function(require, _LOADED, __bundle_register, __bundle_modules)\nlocal data = {\r\n  cardboard = { {\r\n    type = \"angled_square\",\r\n    dimensions = {\r\n      width = 1.25,\r\n      height = 1.25\r\n    }\r\n  }, {\r\n    type = \"board\",\r\n    dimensions = {\r\n      width = 33,\r\n      height = 22\r\n    }\r\n  }, {\r\n    type = \"culture_card\",\r\n    dimensions = {\r\n      width = 1.5,\r\n      height = 2.5\r\n    }\r\n  }, {\r\n    type = \"culture_token\",\r\n    dimensions = {\r\n      width = 1.875,\r\n      height = 1.125\r\n    }\r\n  }, {\r\n    type = \"circle_small\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.75\r\n    }\r\n  }, {\r\n    type = \"player_mat\",\r\n    dimensions = {\r\n      width = 6.75,\r\n      height = 4.5\r\n    }\r\n  }, {\r\n    type = \"player_token\",\r\n    dimensions = {\r\n      width = 0.75,\r\n      height = 0.8\r\n    }\r\n  }, {\r\n    type = \"rounded_rect\",\r\n    dimensions = {\r\n      width = 1.125,\r\n      height = 0.75\r\n    }\r\n  } },\r\n  cultures = { {\r\n    id = 1,\r\n    name = \"nillis\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"These tranquil beings are masters of long-term cross-pollination. Young Nillis sprouts are vitually mindless, but as they grow, they become highly intelligent thinkers. Ancient Nillis can spend years immobile, meditating on the mysteries of life.\"\r\n  }, {\r\n    id = 2,\r\n    name = \"volois\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"These slug-like creatures comprise a collective intelligence that tends to be friendly yet enigmatic. The laws of time and space appear to bend wildly in their presence and it's unclear if they actually manipulate reality or if it's just a projected illusion.\"\r\n  }, {\r\n    id = 3,\r\n    name = \"graw\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These degenerate, fish-like creatures are all that remain of the once proud race that ruled over the entire galaxy. Once highly advanced, they are now just primitive, superstitious brutes who worship their former students, the Qossuth.\"\r\n  }, {\r\n    id = 4,\r\n    name = \"niks\",\r\n    iou = 80,\r\n    science = 1,\r\n    description = \"Small in stature and gregarious in demeanor, the Niks are impish creatures who chatter endlessly on all manner of topics. While they prefer living in rustic tree villages, they are by no means simple and are uniquely attuned to the natural world.\"\r\n  }, {\r\n    id = 5,\r\n    name = \"dell\",\r\n    iou = 60,\r\n    science = 2,\r\n    description = \"The Dell are identified by their multiple eyes and tentacular mandibles. The Rastur invasion brought financial ruin to the Dell and they regressed to an industrial state. They seek to acquire valuables at little or no expense to themselves.\"\r\n  }, {\r\n    id = 6,\r\n    name = \"humans\",\r\n    iou = 90,\r\n    science = 3,\r\n    description = \"Humans are unusually flexible beings, adapting to any environment they occupy with an uncanny knack for inventing and using tools. While not particularly intelligent, Humans can be potentially hazardous if left unsupervised too long.\"\r\n  }, {\r\n    id = 7,\r\n    name = \"shenna\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These aggressive beings can be identified by the tail-like protuberances at the backs of their heads. They live and hunt in small clans and make excellent soldiers. Without external enemies to engage them, they tend to fight amongst themselves.\"\r\n  }, {\r\n    id = 8,\r\n    name = \"yxklyx\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"These asocial, crab-like creatures are brilliant biochemists, capable of fusing machinery and organic materials in revolutionary ways. They are often avoided, due in no small part to their tendency to view other races as potential test subjects.\"\r\n  }, {\r\n    id = 9,\r\n    name = \"zum\",\r\n    iou = 100,\r\n    science = 2,\r\n    description = \"Zum society is peculiar in that it has no formal structures of government or commerce. Each of these large hive insects acts in perfect harmony with its brethren, all seemingly experiencing the exact same thoughts, preferences, and impulses.\"\r\n  }, {\r\n    id = 10,\r\n    name = \"eeepeeep\",\r\n    iou = 100,\r\n    science = 3,\r\n    description = \"The origin of the Eeepeeep is a mystery. One explanation is that they are descendents of a single orphaned kitchen appliance from a long-lost galaxy. They are known for their friendly, logical natures and incredible insight into advanced technology.\"\r\n  }, {\r\n    id = 11,\r\n    name = \"whynoms\",\r\n    iou = 80,\r\n    science = 2,\r\n    description = \"These pracical creatures are renowned for their dry wit. They are rumored to be descendents of irate, uncomfortable horses on a desperate quest to find a comfortable way to sit down. Their hoof-crafted goods are treasured throughout the galaxy.\"\r\n  }, {\r\n    id = 12,\r\n    name = \"cholos\",\r\n    iou = 90,\r\n    science = 1,\r\n    description = \"These microscopic bacteria are ingenious bioengineers who excel at cellular manipulation. They can be difficult to communicate with given that they 'speak' by inflicting precise symptoms upon their host, making it sneeze in a specific rhythm.\"\r\n  }, {\r\n    id = 13,\r\n    name = \"wollow\",\r\n    iou = 90,\r\n    science = 5,\r\n    description = \"These imposing giant lizards follow a philosophy of peace and love. They seek to spread their harmonious message throughout the galaxy. Given their terrifying stature, most beings are inclined to agree with whatever the Wollow are saying.\"\r\n  }, {\r\n    id = 14,\r\n    name = \"qossuth\",\r\n    iou = 120,\r\n    science = 4,\r\n    description = \"Upon discovering the nature of the universe, the Qossuth evolved into amorphous masses of fog and lightning. Their behavior grew erratic, sometimes despondent, sometimes cruelly ambitious. Still, their profoundly disturbing art fetches a high price.\"\r\n  } },\r\n  demands = { {\r\n    name = \"bionic perfume\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"bionic perfume\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"canned traits\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 11,\r\n    value = 60,\r\n    count = 1\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    to = 12,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 2,\r\n    value = 40,\r\n    count = 2\r\n  }, {\r\n    name = \"designer genes\",\r\n    to = 14,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 6,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 7,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"finest dust\",\r\n    to = 9,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 4,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"glorious junk\",\r\n    to = 6,\r\n    value = 40,\r\n    count = 4\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 10,\r\n    value = 50,\r\n    count = 3\r\n  }, {\r\n    name = \"immortal grease\",\r\n    to = 12,\r\n    value = 50,\r\n    count = 2\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    to = 13,\r\n    value = 70,\r\n    count = 1\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    to = 3,\r\n    value = 90,\r\n    count = 1\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 5,\r\n    value = 60,\r\n    count = 2\r\n  }, {\r\n    name = \"living toys\",\r\n    to = 7,\r\n    value = 40,\r\n    count = 3\r\n  }, {\r\n    name = \"melf pelts\",\r\n    to = 8,\r\n    value = 50,\r\n    count = 1\r\n  } },\r\n  encounters = {\r\n    hazards = {\r\n      blue = { 10, 10, 20, 20, 30, 30, 40 },\r\n      red = { 10, 20, 20, 30, 30, 40 },\r\n      yellow = { 10, 20, 30, 40 }\r\n    },\r\n    relics = { {\r\n      name = \"Air Foil\",\r\n      value = 80,\r\n      description = \"Land and take off for 1 movement cost (instead of 2). Travel between surface cities for 1 movement cost.\"\r\n    }, {\r\n      name = \"Auto Pilot\",\r\n      value = 80,\r\n      description = \"Set one die to 4 before rolling for speed.\"\r\n    }, {\r\n      name = \"Gate Lock\",\r\n      value = 100,\r\n      description = \"Treat any telegate as a blue space.\"\r\n    }, {\r\n      name = \"Jump Start\",\r\n      value = 120,\r\n      description = \"House rule: When choosing a navigation die, optionally jump to the same-numbered telegate before moving. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Mulligan Gear\",\r\n      value = 120,\r\n      description = \"House rule: Optionally reroll one die after rolling for speed. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Shield\",\r\n      value = 60,\r\n      description = \"Identical to purchasable shield equipment, but occupies no space on a ship.\"\r\n    }, {\r\n      name = \"Spy Eye\",\r\n      value = 100,\r\n      description = \"House rule: May sneak a peak at an encounter token before choosing to ignore it by leaving it face down, or accept it by turning it face up. May observe a culture from anywhere within its system, rather than just in orbit. (See instructions for original rule.)\"\r\n    }, {\r\n      name = \"Switch Switch\",\r\n      value = 100,\r\n      description = \"Optionally switch navigation die with another speed die as often as desired anytime during a turn.\"\r\n    }, {\r\n      name = \"Yellow Drive\",\r\n      value = 80,\r\n      description = \"Identical to purchasable yellow drive equipment, but occupies no space on a ship.\"\r\n    } },\r\n    spaceports = 3,\r\n    telegates = { 1, 2, 3, 4, 5, 6 }\r\n  },\r\n  equipment = { {\r\n    id = 1,\r\n    name = \"shield\"\r\n  }, {\r\n    id = 2,\r\n    name = \"yellow drive\"\r\n  }, {\r\n    id = 3,\r\n    name = \"red drive\"\r\n  }, {\r\n    id = 4,\r\n    name = \"combo drive\"\r\n  } },\r\n  goods = { {\r\n    name = \"bionic perfume\",\r\n    buy = 80,\r\n    sell = 140,\r\n    from = 1,\r\n    to = { 2, 3, 4, 5 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 140\r\n    }\r\n  }, {\r\n    name = \"canned traits\",\r\n    buy = 140,\r\n    sell = 220,\r\n    from = 2,\r\n    to = { 3, 4, 5, 6 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"glorious junk\",\r\n    buy = 30,\r\n    sell = 80,\r\n    from = 3,\r\n    to = { 4, 5, 6, 7 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"living toys\",\r\n    buy = 20,\r\n    sell = 60,\r\n    from = 4,\r\n    to = { 5, 6, 7, 8 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 80,\r\n      sell = 180\r\n    }\r\n  }, {\r\n    name = \"finest dust\",\r\n    buy = 10,\r\n    sell = 50,\r\n    from = 5,\r\n    to = { 6, 7, 8, 9 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"rock videos\",\r\n    buy = 120,\r\n    sell = 200,\r\n    from = 6,\r\n    to = { 7, 8, 9, 10 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 60,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"melf pelts\",\r\n    buy = 50,\r\n    sell = 110,\r\n    from = 7,\r\n    to = { 8, 9, 10, 11 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 150\r\n    }\r\n  }, {\r\n    name = \"immortal grease\",\r\n    buy = 50,\r\n    sell = 100,\r\n    from = 8,\r\n    to = { 9, 10, 11, 12 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"chicle liquor\",\r\n    buy = 40,\r\n    sell = 90,\r\n    from = 9,\r\n    to = { 10, 11, 12, 13 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 140,\r\n      sell = 220\r\n    }\r\n  }, {\r\n    name = \"pedigree bolts\",\r\n    buy = 200,\r\n    sell = 300,\r\n    from = 10,\r\n    to = { 11, 12, 13, 14 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 100,\r\n      sell = 200\r\n    }\r\n  }, {\r\n    name = \"impossible furniture\",\r\n    buy = 110,\r\n    sell = 180,\r\n    from = 11,\r\n    to = { 12, 13, 14, 1 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"designer genes\",\r\n    buy = 60,\r\n    sell = 120,\r\n    from = 12,\r\n    to = { 13, 14, 1, 2 },\r\n    count = 6,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 160,\r\n      sell = 240\r\n    }\r\n  }, {\r\n    name = \"megalith paperweight\",\r\n    buy = 90,\r\n    sell = 160,\r\n    from = 13,\r\n    to = { 14, 1, 2, 3 },\r\n    count = 5,\r\n    factory = {\r\n      deed = 100,\r\n      buy = 80,\r\n      sell = 160\r\n    }\r\n  }, {\r\n    name = \"psychotic sculpture\",\r\n    buy = 160,\r\n    sell = 250,\r\n    from = 14,\r\n    to = { 1, 2, 3, 4 },\r\n    count = 4,\r\n    factory = {\r\n      deed = 200,\r\n      buy = 120,\r\n      sell = 250\r\n    }\r\n  } },\r\n  passengers = { {\r\n    name = \"arms dealer\",\r\n    from = 3,\r\n    to = 14,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"census taker\",\r\n    from = 0,\r\n    to = 13,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"optometrist\",\r\n    from = 5,\r\n    to = 0,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"philosopher\",\r\n    from = 0,\r\n    to = 3,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"salesman\",\r\n    from = 9,\r\n    to = 2,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"scientist\",\r\n    from = 8,\r\n    to = 6,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"specimen\",\r\n    from = 0,\r\n    to = 12,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"spy\",\r\n    from = 7,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"tax collector\",\r\n    from = 0,\r\n    to = 5,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"toaster\",\r\n    from = 10,\r\n    to = 0,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"classic\"\r\n  }, {\r\n    name = \"ambassador\",\r\n    from = 13,\r\n    to = 4,\r\n    value = 120,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"caterer\",\r\n    from = 0,\r\n    to = 1,\r\n    value = 300,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"diva\",\r\n    from = 6,\r\n    to = 0,\r\n    value = 240,\r\n    cargo = 2,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"invader\",\r\n    from = 7,\r\n    to = 11,\r\n    value = 180,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  }, {\r\n    name = \"politician\",\r\n    from = 4,\r\n    to = 0,\r\n    value = 150,\r\n    cargo = 1,\r\n    ruleset = \"standard\"\r\n  } },\r\n  players = { {\r\n    color = \"red\",\r\n    home = {\r\n      culture = 10,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"orange\",\r\n    home = {\r\n      culture = 14,\r\n      factory = 160,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"yellow\",\r\n    home = {\r\n      culture = 6,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  }, {\r\n    color = \"green\",\r\n    home = {\r\n      culture = 11,\r\n      factory = 80,\r\n      spaceport = 160\r\n    }\r\n  } },\r\n  sciences = { {\r\n    id = 1,\r\n    name = \"biotech\",\r\n    equipment = { 1 },\r\n    ships = { }\r\n  }, {\r\n    id = 2,\r\n    name = \"industry\",\r\n    equipment = { 2 },\r\n    ships = { 3, 4 }\r\n  }, {\r\n    id = 3,\r\n    name = \"technology\",\r\n    equipment = { 3 },\r\n    ships = { 1, 2 }\r\n  }, {\r\n    id = 4,\r\n    name = \"metaphysics\",\r\n    equipment = { 4 },\r\n    ships = { }\r\n  }, {\r\n    id = 5,\r\n    name = \"primitive\",\r\n    equipment = { },\r\n    ships = { }\r\n  } },\r\n  ships = { {\r\n    id = 1,\r\n    name = \"scout\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 60\r\n  }, {\r\n    id = 2,\r\n    name = \"clipper\",\r\n    cargo = 2,\r\n    speed = 3,\r\n    cost = 120\r\n  }, {\r\n    id = 3,\r\n    name = \"transport\",\r\n    cargo = 3,\r\n    speed = 3,\r\n    cost = 240\r\n  }, {\r\n    id = 4,\r\n    name = \"freighter\",\r\n    cargo = 5,\r\n    speed = 2,\r\n    cost = 300\r\n  } }\r\n}\r\n\r\nreturn data\r\n\nend)\n__bundle_register(\"lua/global/money\", function(require, _LOADED, __bundle_register, __bundle_modules)\nrequire(\"lua/utils/table\")\r\nlocal constants = require(\"lua/global/constants\")\r\n\r\n---@type table<string, number> | table<number, string>\r\nlocal lookupTable\r\n\r\n---@type number[]\r\nlocal denominations\r\n\r\nlocal initialized = false\r\nlocal function init()\r\n  if (initialized) then return end\r\n  lookupTable = constants.MONEY_LOOKUP\r\n  denominations = { table.unpack(constants.MONEY_VALUES) } --copy the table because sorting is destructive\r\n  table.sort(denominations, function(a, b) return b < a end) -- sort descending\r\n  initialized = true\r\nend\r\n\r\n---@param amount number\r\n---@param allowedDenominations number[]\r\n---@return table<number, number>\r\nlocal function calculateAmounts(amount, allowedDenominations)\r\n  if (allowedDenominations == nil) then\r\n    allowedDenominations = denominations\r\n  end\r\n\r\n  return table.reduce(allowedDenominations, function(acc, denomination)\r\n    acc[denomination] = 0\r\n    while (denomination <= amount) do\r\n      amount = amount - denomination\r\n      acc[denomination] = acc[denomination] + 1\r\n    end\r\n    return acc\r\n  end, {})\r\nend\r\n\r\n---@param amounts table<number, number>\r\n---@param player table\r\nlocal function dealToPlayer(amounts, player)\r\n  local allowedColors = constants.ALLOWED_PLAYER_COLORS\r\n  local playerIsAllowed = table.includes(allowedColors, player.color)\r\n  if (not playerIsAllowed) then return end\r\n\r\n  for k, v in pairs(amounts) do\r\n    if (v > 0) then\r\n      local moneyTag = lookupTable[k]\r\n      local moneyBag = getObjectsWithAllTags({ 'bag', 'credits', moneyTag })[1]\r\n      moneyBag.deal(v, player.color)\r\n    end\r\n  end\r\nend\r\n\r\n---@param amount number\r\n---@param player table\r\n---@param allowedDenominations number[]\r\nlocal function payPlayer(amount, player, allowedDenominations)\r\n  local amountsToDeal = calculateAmounts(amount, allowedDenominations)\r\n  dealToPlayer(amountsToDeal, player)\r\nend\r\n\r\n---@param amount number\r\n---@param player table\r\n---@return table<number, number>\r\nlocal function breakBill(amount, player)\r\n  -- disallow the bill being broken from the denominations\r\n  local allowedDenominations = table.filter(denominations, function(denomination) return denomination ~= amount end)\r\n  local amountsToDeal = calculateAmounts(amount, player, allowedDenominations)\r\n  return amountsToDeal\r\nend\r\n\r\n---@param amounts number[]\r\n---@param player table\r\n---@return table<number, number>\r\nlocal function combineBills(amounts, player)\r\n  local amount = table.sum(amounts)\r\n  local amountsToDeal = calculateAmounts(amount, player)\r\n  return amountsToDeal\r\nend\r\n\r\nreturn {\r\n  init = init,\r\n  breakBill = breakBill,\r\n  combineBills = combineBills,\r\n  payPlayer = payPlayer,\r\n}\r\n\nend)\n__bundle_register(\"lua/global/constants\", function(require, _LOADED, __bundle_register, __bundle_modules)\n-- ============================================================================\r\n-- All GUIDs referenced ANYWHERE in Lua\r\n-- ============================================================================\r\nlocal GUIDS = {\r\n  CultureCardBagGUID = '711a6c',\r\n  EncounterBagGUID = '55db5c',\r\n  EventTokenBagGUID = 'f6a761',\r\n  EventStagingLayoutGUID = '75b126',\r\n  TransactionZoneGUID = '25e029',\r\n\r\n  TableGUIDs = {\r\n    Board = '332a2b',\r\n    MainTable = '7df0c6',\r\n    PlayerTables = '8c8f95',\r\n    SharedTable = 'fdf9e3',\r\n  },\r\n}\r\n\r\nreturn {\r\n  GUIDS = GUIDS,\r\n  -- ============================================================================\r\n  -- GUIDs to lock so the user can't interact with them (references, no strings)\r\n  -- ============================================================================\r\n  GUIDS_TO_DISABLE = {\r\n    GUIDS.TableGUIDs.Board,\r\n    GUIDS.TableGUIDs.MainTable,\r\n    GUIDS.TableGUIDs.PlayerTables,\r\n    GUIDS.TableGUIDs.SharedTable,\r\n  },\r\n  -- ============================================================================\r\n  -- Constants\r\n  -- ============================================================================\r\n  WORKSHOP_ID = '2413086259',\r\n  ALLOWED_PLAYER_COLORS = { 'Yellow', 'Red', 'Green', 'Orange' },\r\n  CULTURE_TAGS = { 'c01', 'c02', 'c03', 'c04', 'c05', 'c06', 'c07', 'c08', 'c09', 'c10', 'c11', 'c12', 'c13', 'c14', 'c00' },\r\n  SYSTEM_TAGS = { 's01', 's02', 's03', 's04', 's05', 's06', 's07', 's08', 's09', 's10', 's11', 's12', 's13', 's14', 's00' },\r\n  MONEY_VALUES = { 1, 5, 10, 50, 100, 500, 1000 },\r\n  MONEY_LOOKUP = {\r\n    m0001 = 1, m0005 = 5, m0010 = 10, m0050 = 50, m0100 = 100, m0500 = 500, m1000 = 1000,\r\n    [1] = 'm0001', [5] = 'm0005', [10] = 'm0010', [50] = 'm0050', [100] = 'm0100', [500] = 'm0500', [1000] = 'm1000',\r\n  },\r\n}\r\n\nend)\nreturn __bundle_require(\"Transaction Zone.25e029.lua\")",
      "LuaScriptState": ""
    },
    {
      "GUID": "75b126",
      "Name": "LayoutZone",
      "Transform": {
        "posX": 41.0,
        "posY": 2.5,
        "posZ": 18.5,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 14.0,
        "scaleY": 6.0,
        "scaleZ": 14.0
      },
      "Nickname": "Drawbag Staging",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Tags": [
        "event",
        "good",
        "zone"
      ],
      "LayoutGroupSortIndex": 0,
      "Value": 0,
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "MeasureMovement": false,
      "DragSelectable": true,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "LayoutZone": {
        "Options": {
          "Direction": 0,
          "MeldDirection": 0,
          "NewObjectFacing": 1,
          "TriggerForFaceUp": true,
          "TriggerForFaceDown": true,
          "TriggerForNonCards": true,
          "AllowSwapping": true,
          "MaxObjectsPerNewGroup": 1,
          "MaxObjectsPerGroup": 1,
          "MeldSort": 1,
          "MeldReverseSort": false,
          "MeldSortExisting": true,
          "StickyCards": false,
          "HorizontalSpread": 0.6,
          "VerticalSpread": 0.0,
          "HorizontalGroupPadding": 1.0,
          "VerticalGroupPadding": 1.0,
          "SplitAddedDecks": true,
          "CombineIntoDecks": false,
          "CardsPerDeck": 0,
          "AlternateDirection": false,
          "Randomize": false,
          "InstantRefill": true,
          "ManualOnly": false
        },
        "GroupsInZone": []
      },
      "LuaScript": "",
      "LuaScriptState": "",
      "XmlUI": ""
    }
  ]
}
